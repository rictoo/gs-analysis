<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Generations Study</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="generations_files/libs/clipboard/clipboard.min.js"></script>
<script src="generations_files/libs/quarto-html/quarto.js"></script>
<script src="generations_files/libs/quarto-html/popper.min.js"></script>
<script src="generations_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="generations_files/libs/quarto-html/anchor.min.js"></script>
<link href="generations_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="generations_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="generations_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="generations_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="generations_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Generations Study</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<style type="text/css">
.main-container {
  max-width: 1800px;
  margin-left: auto;
  margin-right: auto;
}
</style>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This project focuses on modeling the time until first breast cancer incidence (including DCIS) in individuals who have not experienced previous invasive cancer with the Cox Proportional Hazards model. Individuals are censored at the point of development of nearly any cancer (see definitions below). The model incorporates known and established risk factors, including parity, menopause status, hormone replacement therapy usage, and others. The document is organized into four main sections:</p>
<ol type="1">
<li>Setup (importing data, libraries, etc.)</li>
<li>Pre-processing =&gt; Sanity checking, grouping, deriving survival data (e.g., time of censoring, event status), etc.</li>
<li>Analysis =&gt; Kaplan-Meier plots, univariable and multivariable analyses</li>
<li>Results =&gt; Visualisation of the results</li>
</ol>
<p>The selection criteria and survival data creation are embedded within the relevant sections below.</p>
</section>
<section id="setup" class="level1">
<h1>Setup</h1>
<section id="importing-packages-and-setup" class="level2">
<h2 class="anchored" data-anchor-id="importing-packages-and-setup">Importing packages and setup</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsurvfit)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#options(max.print=100)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="global-variables" class="level2">
<h2 class="anchored" data-anchor-id="global-variables">Global variables</h2>
<p>Directory hidden (due to being public)</p>
</section>
<section id="importing-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-data">Importing data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cancer events:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>dataset_ca <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(dataset_dir, <span class="st">"RDSCaSummary_V1.csv"</span>), <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">"NULL"</span>, <span class="st">""</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk factors:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(dataset_dir, <span class="st">"RDSRiskFactors.csv"</span>), <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">"NULL"</span>, <span class="st">""</span>))</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Deaths:</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#dataset_deaths &lt;- read.csv(paste0(dataset_dir, "Deaths.csv)"))</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Collections:</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>dataset_collections <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">paste0</span>(dataset_dir, <span class="st">"RDSCollections_v1_Full.csv"</span>), <span class="at">na.strings =</span> <span class="st">"NULL"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="pre-processing-and-sanity-checking" class="level1">
<h1>Pre-processing and sanity checking</h1>
<section id="general-information" class="level2">
<h2 class="anchored" data-anchor-id="general-information">General information</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print number of rows</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, <span class="fu">nrow</span>(dataset_rf), <span class="st">' rows in the risk factor dataset'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are 116664 rows in the risk factor dataset"</code></pre>
</div>
</div>
</section>
<section id="sanity-checking-identification-numbers" class="level2">
<h2 class="anchored" data-anchor-id="sanity-checking-identification-numbers">Sanity checking: Identification numbers</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For risk factor dataset:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of correctly-formatted IDs</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>TCode_regex <span class="ot">&lt;-</span> <span class="st">'T</span><span class="sc">\\</span><span class="st">d{3}[A-Z]</span><span class="sc">\\</span><span class="st">d{3}'</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>cnt_crct_ids <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">grepl</span>(TCode_regex, dataset_rf<span class="sc">$</span>TCode))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, cnt_crct_ids, <span class="st">' correctly-formatted IDs in risk factor dataset'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are 116664 correctly-formatted IDs in risk factor dataset"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of empty IDs</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>empty_ids <span class="ot">&lt;-</span> <span class="fu">is.na</span>(dataset_rf<span class="sc">$</span>TCode)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, <span class="fu">ifelse</span>(<span class="fu">sum</span>(empty_ids) <span class="sc">==</span> <span class="dv">0</span>, <span class="st">'no'</span>, <span class="fu">sum</span>(empty_ids)), <span class="st">' empty IDs in risk factor dataset, which will now be removed'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are no empty IDs in risk factor dataset, which will now be removed"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf[<span class="sc">!</span>empty_ids,]</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Counting and removing duplicate IDs</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>dupl_ids <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">duplicated</span>(dataset_rf<span class="sc">$</span>TCode))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(dupl_ids) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">'There are no duplicate IDs'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, <span class="fu">length</span>(dupl_ids), <span class="st">' duplicate IDs in risk factor dataset, which will now be removed'</span>))</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  dataset_rf <span class="ot">&lt;-</span> dataset_rf[<span class="sc">-</span>dupl_ids,]</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are no duplicate IDs"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For cancer summary dataset:</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of correctly-formatted IDs</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>TCode_regex <span class="ot">&lt;-</span> <span class="st">'T</span><span class="sc">\\</span><span class="st">d{3}[A-Z]</span><span class="sc">\\</span><span class="st">d{3}'</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>cnt_crct_ids <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">grepl</span>(TCode_regex, dataset_ca<span class="sc">$</span>tcode))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, cnt_crct_ids, <span class="st">' correctly-formatted IDs in cancer summary dataset'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are 38892 correctly-formatted IDs in cancer summary dataset"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of empty IDs</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>empty_ids <span class="ot">&lt;-</span> <span class="fu">is.na</span>(dataset_ca<span class="sc">$</span>tcode)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, <span class="fu">ifelse</span>(<span class="fu">sum</span>(empty_ids) <span class="sc">==</span> <span class="dv">0</span>, <span class="st">'no'</span>, <span class="fu">sum</span>(empty_ids)), <span class="st">' empty IDs in cancer summary dataset, which will now be removed'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are 5 empty IDs in cancer summary dataset, which will now be removed"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>dataset_ca <span class="ot">&lt;-</span> dataset_ca[<span class="sc">!</span>empty_ids,]</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># For collections dataset:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of correctly-formatted IDs</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>TCode_regex <span class="ot">&lt;-</span> <span class="st">'T</span><span class="sc">\\</span><span class="st">d{3}[A-Z]</span><span class="sc">\\</span><span class="st">d{3}'</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>cnt_crct_ids <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">grepl</span>(TCode_regex, dataset_collections<span class="sc">$</span>TCode))</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, cnt_crct_ids, <span class="st">' correctly-formatted IDs in risk factor dataset'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are 116664 correctly-formatted IDs in risk factor dataset"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the number of empty IDs</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>empty_ids <span class="ot">&lt;-</span> <span class="fu">is.na</span>(dataset_collections<span class="sc">$</span>TCode)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, <span class="fu">ifelse</span>(<span class="fu">sum</span>(empty_ids) <span class="sc">==</span> <span class="dv">0</span>, <span class="st">'no'</span>, <span class="fu">sum</span>(empty_ids)), <span class="st">' empty IDs in risk factor dataset, which will now be removed'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are no empty IDs in risk factor dataset, which will now be removed"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dataset_collections <span class="ot">&lt;-</span> dataset_collections[<span class="sc">!</span>empty_ids,]</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Counting and removing duplicate IDs</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>dupl_ids <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">duplicated</span>(dataset_collections<span class="sc">$</span>TCode))</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(dupl_ids) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">'There are no duplicate IDs'</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There are '</span>, <span class="fu">length</span>(dupl_ids), <span class="st">' duplicate IDs in risk factor dataset, which will now be removed'</span>))</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  datas</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There are no duplicate IDs"</code></pre>
</div>
</div>
</section>
<section id="pre-processing-risk-factors" class="level2">
<h2 class="anchored" data-anchor-id="pre-processing-risk-factors">Pre-processing: Risk factors</h2>
<section id="configuration" class="level3">
<h3 class="anchored" data-anchor-id="configuration">Configuration</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify missing/unknown labels</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Specify accepted range, lower and upper bounds are inclusive</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Categorical variables</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Categorical (to turn into R factors)</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Continuous -&gt; Categorical: Specify range of values per band.</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The first of the named categories will be set as the reference level.</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Configuration list:</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># The name of each element is the name of the pre-processed variable (ie,. the variable to process)</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 'varname': the name of the post-processed variable.</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 'realname': the real-world name of the variable.</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 'bands': for conversion of a continuous to a categorical variable.</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 'exp_range': the expected range of values for a continuous variable, values outside of this range will be set to NA</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 'unknown': the values the pre-processed variable takes on when there is missing information, these will be set to NA</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 'categories': the labels for the levels for a categorical variable.</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>rf_config <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Age at entry</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">'AgeatEntry'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'ageentrygrp'</span>,</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Age at entry'</span>,</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">bands =</span> <span class="fu">c</span>(<span class="dv">16</span>, <span class="dv">35</span>, <span class="dv">45</span>, <span class="dv">55</span>, <span class="dv">65</span>, <span class="dv">75</span>, <span class="dv">102</span>) <span class="co"># Michael</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>         <span class="co">#  c(-Inf, 35, 50, 60, 79, +Inf) # Louise ('1st grouping'): </span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>         <span class="co">#  c(16, 35, 50, 60, 102) # Louise ('2nd grouping')</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Height</span></span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizeht'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'bodysizeht'</span>,</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Height'</span>,</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>, <span class="dv">989</span>, <span class="dv">888</span>), <span class="co"># Michael</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>                                    <span class="co"># Louise keeps 777/888/999 intact</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">140</span>, <span class="dv">220</span>) <span class="co"># Michael</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># exp_range = c(140, 300) # Louise</span></span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'bodysizeht' = list(</span></span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   varname = 'heightgrp',</span></span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'Height (group)',</span></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   unknown = c(NA, 999, 989, 888),</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   bands = c(140, 160, 165, 170, 175, 220) # Michael</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   #bands = c(140, 165, 300) # Louise</span></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizeht20'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'bodysizeht20'</span>,</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Height at age 20'</span>,</span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>, <span class="dv">989</span>, <span class="dv">888</span>),</span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">140</span>, <span class="dv">220</span>) <span class="co"># Michael</span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'bodysizeht20' = list(</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   varname = 'height20grp',</span></span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'Height at age 20 (group)',</span></span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   unknown = c(NA, 999, 989, 888),</span></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   bands = c(140, 160, 165, 170, 175, 220) # Michael</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-61"><a href="#cb21-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Weight</span></span>
<span id="cb21-62"><a href="#cb21-62" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizewt20'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-63"><a href="#cb21-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'bodysizewt20'</span>,</span>
<span id="cb21-64"><a href="#cb21-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Weight at age 20'</span>,</span>
<span id="cb21-65"><a href="#cb21-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>),</span>
<span id="cb21-66"><a href="#cb21-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">200</span>) <span class="co"># Michael</span></span>
<span id="cb21-67"><a href="#cb21-67" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-68"><a href="#cb21-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-69"><a href="#cb21-69" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizewt20'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-70"><a href="#cb21-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'weight20grp'</span>,</span>
<span id="cb21-71"><a href="#cb21-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Weight at age 20 (group)'</span>,</span>
<span id="cb21-72"><a href="#cb21-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>),</span>
<span id="cb21-73"><a href="#cb21-73" aria-hidden="true" tabindex="-1"></a>    <span class="at">bands =</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">55</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">200</span>) <span class="co"># Michael</span></span>
<span id="cb21-74"><a href="#cb21-74" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-75"><a href="#cb21-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-76"><a href="#cb21-76" aria-hidden="true" tabindex="-1"></a>  <span class="co">#'bodysizewtnow' = list(</span></span>
<span id="cb21-77"><a href="#cb21-77" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  varname = 'bodysizewtnow',</span></span>
<span id="cb21-78"><a href="#cb21-78" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  unknown = c(NA, 999, 989, 888),</span></span>
<span id="cb21-79"><a href="#cb21-79" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  exp_range = c(10, 200)</span></span>
<span id="cb21-80"><a href="#cb21-80" aria-hidden="true" tabindex="-1"></a>  <span class="co">#),</span></span>
<span id="cb21-81"><a href="#cb21-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-82"><a href="#cb21-82" aria-hidden="true" tabindex="-1"></a>  <span class="co"># BMI</span></span>
<span id="cb21-83"><a href="#cb21-83" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizebminow'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-84"><a href="#cb21-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'bminowgrp'</span>,</span>
<span id="cb21-85"><a href="#cb21-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'BMI (group)'</span>,</span>
<span id="cb21-86"><a href="#cb21-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>, <span class="dv">989</span>, <span class="dv">888</span>),</span>
<span id="cb21-87"><a href="#cb21-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>), <span class="co"># Michael</span></span>
<span id="cb21-88"><a href="#cb21-88" aria-hidden="true" tabindex="-1"></a>    <span class="co">#bands = c(-Inf, 10, seq(18.5, 25, 2.5), 50, +Inf), # Michael</span></span>
<span id="cb21-89"><a href="#cb21-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">bands =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">100</span>), <span class="co"># Louise</span></span>
<span id="cb21-90"><a href="#cb21-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'&lt; 20'</span>, <span class="st">'20-24'</span>, <span class="st">'&gt;=25'</span>)</span>
<span id="cb21-91"><a href="#cb21-91" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-92"><a href="#cb21-92" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-93"><a href="#cb21-93" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizebminow'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-94"><a href="#cb21-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'bodysizebminow'</span>,</span>
<span id="cb21-95"><a href="#cb21-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'BMI'</span>,</span>
<span id="cb21-96"><a href="#cb21-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>, <span class="dv">989</span>, <span class="dv">888</span>),</span>
<span id="cb21-97"><a href="#cb21-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>)</span>
<span id="cb21-98"><a href="#cb21-98" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-99"><a href="#cb21-99" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-100"><a href="#cb21-100" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R2bodysizebmi'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-101"><a href="#cb21-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'R2bodysizebmi'</span>,</span>
<span id="cb21-102"><a href="#cb21-102" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'BMI @ R2'</span>,</span>
<span id="cb21-103"><a href="#cb21-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>, <span class="dv">989</span>, <span class="dv">888</span>),</span>
<span id="cb21-104"><a href="#cb21-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>)</span>
<span id="cb21-105"><a href="#cb21-105" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-106"><a href="#cb21-106" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-107"><a href="#cb21-107" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R4bodysizebmi'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-108"><a href="#cb21-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'R4bodysizebmi'</span>,</span>
<span id="cb21-109"><a href="#cb21-109" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'BMI @ R4'</span>,</span>
<span id="cb21-110"><a href="#cb21-110" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>, <span class="dv">989</span>, <span class="dv">888</span>),</span>
<span id="cb21-111"><a href="#cb21-111" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>)</span>
<span id="cb21-112"><a href="#cb21-112" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-113"><a href="#cb21-113" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-114"><a href="#cb21-114" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'bodysizebmi20' = list(</span></span>
<span id="cb21-115"><a href="#cb21-115" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   varname = 'bmi20grp',</span></span>
<span id="cb21-116"><a href="#cb21-116" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'BMI at age 20 (group)',</span></span>
<span id="cb21-117"><a href="#cb21-117" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   unknown = c(NA, 999, 989),</span></span>
<span id="cb21-118"><a href="#cb21-118" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   exp_range = c(10, 50), # Michael</span></span>
<span id="cb21-119"><a href="#cb21-119" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   bands = c(-Inf, 10, seq(18.5, 25, 2.5), 50, +Inf) # Michael</span></span>
<span id="cb21-120"><a href="#cb21-120" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb21-121"><a href="#cb21-121" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-122"><a href="#cb21-122" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizebmi20'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-123"><a href="#cb21-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'bodysizebmi20'</span>,</span>
<span id="cb21-124"><a href="#cb21-124" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'BMI at age 20'</span>,</span>
<span id="cb21-125"><a href="#cb21-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>, <span class="dv">989</span>),</span>
<span id="cb21-126"><a href="#cb21-126" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">50</span>) <span class="co"># Michael</span></span>
<span id="cb21-127"><a href="#cb21-127" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-128"><a href="#cb21-128" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-129"><a href="#cb21-129" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ACORN score</span></span>
<span id="cb21-130"><a href="#cb21-130" aria-hidden="true" tabindex="-1"></a>  <span class="st">'ses'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-131"><a href="#cb21-131" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'ses'</span>,</span>
<span id="cb21-132"><a href="#cb21-132" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'ACORN score'</span>,</span>
<span id="cb21-133"><a href="#cb21-133" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">0</span>, <span class="dv">6</span>),</span>
<span id="cb21-134"><a href="#cb21-134" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'1'</span><span class="ot">=</span><span class="st">'Wealthy achievers'</span>, <span class="st">'2'</span><span class="ot">=</span><span class="st">'Urban prosperity'</span>, <span class="st">'3'</span><span class="ot">=</span><span class="st">'Comfortably off'</span>, <span class="st">'4'</span><span class="ot">=</span><span class="st">'Moderate means'</span>, <span class="st">'5'</span><span class="ot">=</span><span class="st">'Hard-pressed'</span>, <span class="st">'0'</span> <span class="ot">=</span> <span class="st">'Region not covered'</span>, <span class="st">'6'</span><span class="ot">=</span><span class="st">'Unclassified'</span>),</span>
<span id="cb21-135"><a href="#cb21-135" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb21-136"><a href="#cb21-136" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-137"><a href="#cb21-137" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-138"><a href="#cb21-138" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Family history of breast cancer</span></span>
<span id="cb21-139"><a href="#cb21-139" aria-hidden="true" tabindex="-1"></a>  <span class="st">'fambrca'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-140"><a href="#cb21-140" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'fambrca'</span>,</span>
<span id="cb21-141"><a href="#cb21-141" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Family history of breast cancer'</span>,</span>
<span id="cb21-142"><a href="#cb21-142" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'0'</span><span class="ot">=</span><span class="st">'Absent'</span>, <span class="st">'1'</span><span class="ot">=</span><span class="st">'Present'</span>)</span>
<span id="cb21-143"><a href="#cb21-143" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-144"><a href="#cb21-144" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-145"><a href="#cb21-145" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Benign breast disease</span></span>
<span id="cb21-146"><a href="#cb21-146" aria-hidden="true" tabindex="-1"></a>  <span class="st">'brbendis'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-147"><a href="#cb21-147" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'brbendis'</span>,</span>
<span id="cb21-148"><a href="#cb21-148" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Previous benign breast disease'</span>,</span>
<span id="cb21-149"><a href="#cb21-149" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'2'</span><span class="ot">=</span><span class="st">'No'</span>, <span class="st">'1'</span><span class="ot">=</span><span class="st">'Yes'</span>)</span>
<span id="cb21-150"><a href="#cb21-150" aria-hidden="true" tabindex="-1"></a>  ), </span>
<span id="cb21-151"><a href="#cb21-151" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-152"><a href="#cb21-152" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Birthweight</span></span>
<span id="cb21-153"><a href="#cb21-153" aria-hidden="true" tabindex="-1"></a>  <span class="st">'birthweight'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-154"><a href="#cb21-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'birthweight'</span>,</span>
<span id="cb21-155"><a href="#cb21-155" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Birthweight (in grams)'</span>,</span>
<span id="cb21-156"><a href="#cb21-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="dv">8888</span>, <span class="dv">9999</span>) </span>
<span id="cb21-157"><a href="#cb21-157" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-158"><a href="#cb21-158" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-159"><a href="#cb21-159" aria-hidden="true" tabindex="-1"></a>  <span class="co"># HRT</span></span>
<span id="cb21-160"><a href="#cb21-160" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'hrtprep' = list(</span></span>
<span id="cb21-161"><a href="#cb21-161" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   varname = 'hrtprep',</span></span>
<span id="cb21-162"><a href="#cb21-162" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   categories = c('1'='Estrogen', '2'='Estrogen and progesterone', '3'='Other', '9'='Not applicable')</span></span>
<span id="cb21-163"><a href="#cb21-163" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb21-164"><a href="#cb21-164" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-165"><a href="#cb21-165" aria-hidden="true" tabindex="-1"></a>  <span class="st">'hrtstatus'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-166"><a href="#cb21-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'hrtstatus'</span>,</span>
<span id="cb21-167"><a href="#cb21-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'HRT status'</span>,</span>
<span id="cb21-168"><a href="#cb21-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">888</span>, <span class="dv">999</span>, <span class="dv">9999</span>), <span class="co"># Louise keeps 888/999/9999 intact (though only 999 actually appears in the data)</span></span>
<span id="cb21-169"><a href="#cb21-169" aria-hidden="true" tabindex="-1"></a>                                     <span class="co"># More specifically, per Michael, 999 means they are either Current/former, but we don't know which.</span></span>
<span id="cb21-170"><a href="#cb21-170" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'0'</span><span class="ot">=</span><span class="st">'Never'</span>, <span class="st">'1'</span><span class="ot">=</span><span class="st">'Former'</span>, <span class="st">'2'</span><span class="ot">=</span><span class="st">'Current'</span>)</span>
<span id="cb21-171"><a href="#cb21-171" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-172"><a href="#cb21-172" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-173"><a href="#cb21-173" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Menopause and menarche</span></span>
<span id="cb21-174"><a href="#cb21-174" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-175"><a href="#cb21-175" aria-hidden="true" tabindex="-1"></a>  <span class="st">'meno_age'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-176"><a href="#cb21-176" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'meno_age'</span>,</span>
<span id="cb21-177"><a href="#cb21-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Age at menopause'</span>,</span>
<span id="cb21-178"><a href="#cb21-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">777</span>, <span class="dv">999</span>) </span>
<span id="cb21-179"><a href="#cb21-179" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-180"><a href="#cb21-180" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-181"><a href="#cb21-181" aria-hidden="true" tabindex="-1"></a>  <span class="st">'meno_age_est'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-182"><a href="#cb21-182" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'meno_age_est'</span>,</span>
<span id="cb21-183"><a href="#cb21-183" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Age at menopause (estimated)'</span>,</span>
<span id="cb21-184"><a href="#cb21-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>) </span>
<span id="cb21-185"><a href="#cb21-185" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-186"><a href="#cb21-186" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-187"><a href="#cb21-187" aria-hidden="true" tabindex="-1"></a>  <span class="st">'menarcheage'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-188"><a href="#cb21-188" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'menarchegrp'</span>,</span>
<span id="cb21-189"><a href="#cb21-189" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Age at menarche (group)'</span>,</span>
<span id="cb21-190"><a href="#cb21-190" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">777</span>, <span class="dv">888</span>, <span class="dv">999</span>), <span class="co"># Michael</span></span>
<span id="cb21-191"><a href="#cb21-191" aria-hidden="true" tabindex="-1"></a>                                    <span class="co"># Louise keeps 777/888/999 intact</span></span>
<span id="cb21-192"><a href="#cb21-192" aria-hidden="true" tabindex="-1"></a>    <span class="at">bands =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">11</span>, <span class="dv">13</span>, <span class="dv">15</span>, <span class="dv">19</span>) <span class="co"># Michael</span></span>
<span id="cb21-193"><a href="#cb21-193" aria-hidden="true" tabindex="-1"></a>    <span class="co">#bands = c(-Inf, 13, +Inf) # Louise</span></span>
<span id="cb21-194"><a href="#cb21-194" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-195"><a href="#cb21-195" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-196"><a href="#cb21-196" aria-hidden="true" tabindex="-1"></a>  <span class="st">'menarcheage'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-197"><a href="#cb21-197" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'menarcheage'</span>,</span>
<span id="cb21-198"><a href="#cb21-198" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Age at menarche (group)'</span>,</span>
<span id="cb21-199"><a href="#cb21-199" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">777</span>, <span class="dv">888</span>, <span class="dv">999</span>) </span>
<span id="cb21-200"><a href="#cb21-200" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-201"><a href="#cb21-201" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-202"><a href="#cb21-202" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Physical activity: </span></span>
<span id="cb21-203"><a href="#cb21-203" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Michael keeps PhysMetTotal continuous and does a log base 2 (i.e a doubling), centered at log2(median)</span></span>
<span id="cb21-204"><a href="#cb21-204" aria-hidden="true" tabindex="-1"></a>  <span class="st">'PhysMetTotal'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-205"><a href="#cb21-205" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'PhysMetTotalLog2'</span>,</span>
<span id="cb21-206"><a href="#cb21-206" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Total physical activity, log2 (MET hours/week)'</span>,</span>
<span id="cb21-207"><a href="#cb21-207" aria-hidden="true" tabindex="-1"></a>    <span class="co"># unknown = c(NA, 8888, 9999), # Louise keeps these intact</span></span>
<span id="cb21-208"><a href="#cb21-208" aria-hidden="true" tabindex="-1"></a>    <span class="co"># transform = function(x) { log2(x+10^-5) }</span></span>
<span id="cb21-209"><a href="#cb21-209" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">0</span>, <span class="dv">8888</span>, <span class="dv">9999</span>), <span class="co"># Louise keeps these intact</span></span>
<span id="cb21-210"><a href="#cb21-210" aria-hidden="true" tabindex="-1"></a>    <span class="at">transform =</span> <span class="cf">function</span>(x) { <span class="fu">log2</span>(x) } <span class="co"># Michael just puts Met=0 into the missing group</span></span>
<span id="cb21-211"><a href="#cb21-211" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-212"><a href="#cb21-212" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-213"><a href="#cb21-213" aria-hidden="true" tabindex="-1"></a>  <span class="st">'PhysMetTotal'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-214"><a href="#cb21-214" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'PhysMetTotal'</span>,</span>
<span id="cb21-215"><a href="#cb21-215" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Total physical activity, (MET hours/week)'</span>,</span>
<span id="cb21-216"><a href="#cb21-216" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">8888</span>, <span class="dv">9999</span>) <span class="co"># Louise keeps these intact</span></span>
<span id="cb21-217"><a href="#cb21-217" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-218"><a href="#cb21-218" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-219"><a href="#cb21-219" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Smoking:</span></span>
<span id="cb21-220"><a href="#cb21-220" aria-hidden="true" tabindex="-1"></a>  <span class="st">'smokingstartage'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-221"><a href="#cb21-221" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'smokingstartage'</span>,</span>
<span id="cb21-222"><a href="#cb21-222" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Age started smoking'</span>,</span>
<span id="cb21-223"><a href="#cb21-223" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">666</span>, <span class="dv">999</span>)</span>
<span id="cb21-224"><a href="#cb21-224" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-225"><a href="#cb21-225" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-226"><a href="#cb21-226" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'PhysMetTotal' = list(</span></span>
<span id="cb21-227"><a href="#cb21-227" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   varname = 'physmettotalgrp',</span></span>
<span id="cb21-228"><a href="#cb21-228" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'Total physical activity (MET hours/week)',</span></span>
<span id="cb21-229"><a href="#cb21-229" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   unknown = c(NA, 8888, 9999), # Louise keeps these intact</span></span>
<span id="cb21-230"><a href="#cb21-230" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   bands = c(0, 25, 50, 75, 2000), # Louise</span></span>
<span id="cb21-231"><a href="#cb21-231" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   categories = c('&lt; 25', '25-49', '50-74', '&gt; 75')</span></span>
<span id="cb21-232"><a href="#cb21-232" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb21-233"><a href="#cb21-233" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-234"><a href="#cb21-234" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Oral contraceptive status</span></span>
<span id="cb21-235"><a href="#cb21-235" aria-hidden="true" tabindex="-1"></a>  <span class="st">'ocstatus'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-236"><a href="#cb21-236" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'ocstatus'</span>,</span>
<span id="cb21-237"><a href="#cb21-237" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Oral contraceptive status'</span>,</span>
<span id="cb21-238"><a href="#cb21-238" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">888</span>, <span class="dv">999</span>, <span class="dv">9999</span>), <span class="co"># Louise keeps 888/999/9999 intact</span></span>
<span id="cb21-239"><a href="#cb21-239" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'0'</span> <span class="ot">=</span> <span class="st">'Never'</span>, <span class="st">'1'</span> <span class="ot">=</span> <span class="st">'Former'</span>, <span class="st">'2'</span> <span class="ot">=</span> <span class="st">'Current'</span>)</span>
<span id="cb21-240"><a href="#cb21-240" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-241"><a href="#cb21-241" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-242"><a href="#cb21-242" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Parity </span></span>
<span id="cb21-243"><a href="#cb21-243" aria-hidden="true" tabindex="-1"></a>  <span class="st">'pregparitycnt'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-244"><a href="#cb21-244" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'pregparitycnt'</span>,</span>
<span id="cb21-245"><a href="#cb21-245" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Parity count'</span>,</span>
<span id="cb21-246"><a href="#cb21-246" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">99</span>)</span>
<span id="cb21-247"><a href="#cb21-247" aria-hidden="true" tabindex="-1"></a>    <span class="co"># exp_range = c(-Inf, 20),</span></span>
<span id="cb21-248"><a href="#cb21-248" aria-hidden="true" tabindex="-1"></a>    <span class="co"># bands = c(0, 1, 2, 3, +Inf)</span></span>
<span id="cb21-249"><a href="#cb21-249" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb21-250"><a href="#cb21-250" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-251"><a href="#cb21-251" aria-hidden="true" tabindex="-1"></a>  <span class="st">'pregparitycnt'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb21-252"><a href="#cb21-252" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> <span class="st">'pregparous'</span>,</span>
<span id="cb21-253"><a href="#cb21-253" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Parity status'</span>,</span>
<span id="cb21-254"><a href="#cb21-254" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">99</span>),</span>
<span id="cb21-255"><a href="#cb21-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">bands =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="sc">+</span><span class="cn">Inf</span>),</span>
<span id="cb21-256"><a href="#cb21-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'Nulliparous'</span>, <span class="st">'Parous'</span>)</span>
<span id="cb21-257"><a href="#cb21-257" aria-hidden="true" tabindex="-1"></a>    <span class="co"># split = list('Parous' =</span></span>
<span id="cb21-258"><a href="#cb21-258" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                on = 'Parous',</span></span>
<span id="cb21-259"><a href="#cb21-259" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                by = # Cannot complete as do not have breastfeeding information.</span></span>
<span id="cb21-260"><a href="#cb21-260" aria-hidden="true" tabindex="-1"></a>    <span class="co">#                categories = c('Parous (not breastfed)', 'Parous (breastfed)'))</span></span>
<span id="cb21-261"><a href="#cb21-261" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-262"><a href="#cb21-262" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-263"><a href="#cb21-263" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Age at thelarche (Michael's code)</span></span>
<span id="cb21-264"><a href="#cb21-264" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-265"><a href="#cb21-265" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Birthweight (Michael's code)</span></span>
<span id="cb21-266"><a href="#cb21-266" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-267"><a href="#cb21-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-268"><a href="#cb21-268" aria-hidden="true" tabindex="-1"></a><span class="co"># Programmatically adding repeated measures</span></span>
<span id="cb21-269"><a href="#cb21-269" aria-hidden="true" tabindex="-1"></a><span class="co"># Breastfeeding duration</span></span>
<span id="cb21-270"><a href="#cb21-270" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) {</span>
<span id="cb21-271"><a href="#cb21-271" aria-hidden="true" tabindex="-1"></a>  bf_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"bf_"</span>, i)</span>
<span id="cb21-272"><a href="#cb21-272" aria-hidden="true" tabindex="-1"></a>  rf_config[[bf_var]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-273"><a href="#cb21-273" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> bf_var,</span>
<span id="cb21-274"><a href="#cb21-274" aria-hidden="true" tabindex="-1"></a>    <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>),</span>
<span id="cb21-275"><a href="#cb21-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">208</span>) <span class="co"># Arbitrary</span></span>
<span id="cb21-276"><a href="#cb21-276" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-277"><a href="#cb21-277" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-278"><a href="#cb21-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-279"><a href="#cb21-279" aria-hidden="true" tabindex="-1"></a><span class="co"># HRT-related</span></span>
<span id="cb21-280"><a href="#cb21-280" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb21-281"><a href="#cb21-281" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(tp <span class="cf">in</span> <span class="fu">c</span>(<span class="st">'start'</span>, <span class="st">'stop'</span>)) {</span>
<span id="cb21-282"><a href="#cb21-282" aria-hidden="true" tabindex="-1"></a>    h_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'HRT'</span>, tp, <span class="st">'age_'</span>, i)</span>
<span id="cb21-283"><a href="#cb21-283" aria-hidden="true" tabindex="-1"></a>    rf_config[[h_var]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-284"><a href="#cb21-284" aria-hidden="true" tabindex="-1"></a>      <span class="at">varname =</span> h_var,</span>
<span id="cb21-285"><a href="#cb21-285" aria-hidden="true" tabindex="-1"></a>      <span class="at">realname =</span> <span class="fu">paste0</span>(<span class="st">'HRT'</span>, tp, <span class="st">' age '</span>, i),</span>
<span id="cb21-286"><a href="#cb21-286" aria-hidden="true" tabindex="-1"></a>      <span class="at">exp_range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">100</span>) <span class="co"># Arbitrary</span></span>
<span id="cb21-287"><a href="#cb21-287" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-288"><a href="#cb21-288" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-289"><a href="#cb21-289" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-290"><a href="#cb21-290" aria-hidden="true" tabindex="-1"></a>  htype_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"HRTtype1_"</span>, i)</span>
<span id="cb21-291"><a href="#cb21-291" aria-hidden="true" tabindex="-1"></a>  rf_config[[htype_var]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-292"><a href="#cb21-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">varname =</span> htype_var,</span>
<span id="cb21-293"><a href="#cb21-293" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="fu">paste0</span>(<span class="st">'HRT type '</span>, i)</span>
<span id="cb21-294"><a href="#cb21-294" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-295"><a href="#cb21-295" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-296"><a href="#cb21-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-297"><a href="#cb21-297" aria-hidden="true" tabindex="-1"></a><span class="co"># Questionnaire date-associated</span></span>
<span id="cb21-298"><a href="#cb21-298" aria-hidden="true" tabindex="-1"></a>var_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'smokingstatus'</span>, <span class="st">'alcoholstatus'</span>, <span class="st">'alcoholunits'</span>, <span class="st">'menopause'</span>)</span>
<span id="cb21-299"><a href="#cb21-299" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(v <span class="cf">in</span> var_names) {</span>
<span id="cb21-300"><a href="#cb21-300" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb21-301"><a href="#cb21-301" aria-hidden="true" tabindex="-1"></a>    rf_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'R'</span>,i,v)</span>
<span id="cb21-302"><a href="#cb21-302" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Menopausal status</span></span>
<span id="cb21-303"><a href="#cb21-303" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(v <span class="sc">==</span> <span class="st">'menopause'</span>) {</span>
<span id="cb21-304"><a href="#cb21-304" aria-hidden="true" tabindex="-1"></a>      rf_config[[rf_var]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-305"><a href="#cb21-305" aria-hidden="true" tabindex="-1"></a>        <span class="at">varname =</span> rf_var,</span>
<span id="cb21-306"><a href="#cb21-306" aria-hidden="true" tabindex="-1"></a>        <span class="at">realname =</span> <span class="fu">paste0</span>(<span class="st">'Menopausal status at @ R'</span>, i),</span>
<span id="cb21-307"><a href="#cb21-307" aria-hidden="true" tabindex="-1"></a>        <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>), <span class="co"># Louise keeps 8/9/10 intact </span></span>
<span id="cb21-308"><a href="#cb21-308" aria-hidden="true" tabindex="-1"></a>        <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'2'</span> <span class="ot">=</span> <span class="st">'Premenopausal'</span>, <span class="st">'4'</span> <span class="ot">=</span> <span class="st">'Premenopausal'</span>, <span class="st">'3'</span> <span class="ot">=</span> <span class="st">'Postmenopausal'</span>, <span class="st">'1'</span> <span class="ot">=</span> <span class="st">'Postmenopausal'</span>)</span>
<span id="cb21-309"><a href="#cb21-309" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb21-310"><a href="#cb21-310" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-311"><a href="#cb21-311" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-312"><a href="#cb21-312" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(i <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)) {</span>
<span id="cb21-313"><a href="#cb21-313" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Smoking status</span></span>
<span id="cb21-314"><a href="#cb21-314" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(v <span class="sc">==</span> <span class="st">'smokingstatus'</span>) {</span>
<span id="cb21-315"><a href="#cb21-315" aria-hidden="true" tabindex="-1"></a>        rf_config[[rf_var]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-316"><a href="#cb21-316" aria-hidden="true" tabindex="-1"></a>          <span class="at">varname =</span> rf_var,</span>
<span id="cb21-317"><a href="#cb21-317" aria-hidden="true" tabindex="-1"></a>          <span class="at">realname =</span> <span class="fu">paste0</span>(<span class="st">'Smoking status at @ R'</span>, i),</span>
<span id="cb21-318"><a href="#cb21-318" aria-hidden="true" tabindex="-1"></a>          <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">6</span>, <span class="dv">9</span>),</span>
<span id="cb21-319"><a href="#cb21-319" aria-hidden="true" tabindex="-1"></a>          <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'0'</span> <span class="ot">=</span> <span class="st">'Never'</span>, <span class="st">'1'</span> <span class="ot">=</span> <span class="st">'Former'</span>, <span class="st">'2'</span> <span class="ot">=</span> <span class="st">'Current'</span>)</span>
<span id="cb21-320"><a href="#cb21-320" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-321"><a href="#cb21-321" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Alcohol status</span></span>
<span id="cb21-322"><a href="#cb21-322" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span>(v <span class="sc">==</span> <span class="st">'alcoholstatus'</span>) {</span>
<span id="cb21-323"><a href="#cb21-323" aria-hidden="true" tabindex="-1"></a>        rf_config[[rf_var]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-324"><a href="#cb21-324" aria-hidden="true" tabindex="-1"></a>          <span class="at">varname =</span> rf_var,</span>
<span id="cb21-325"><a href="#cb21-325" aria-hidden="true" tabindex="-1"></a>          <span class="at">realname =</span> <span class="fu">paste0</span>(<span class="st">'Alcohol status at @ R'</span>, i),</span>
<span id="cb21-326"><a href="#cb21-326" aria-hidden="true" tabindex="-1"></a>          <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">9</span>),</span>
<span id="cb21-327"><a href="#cb21-327" aria-hidden="true" tabindex="-1"></a>          <span class="at">categories =</span> <span class="fu">c</span>(<span class="st">'0'</span> <span class="ot">=</span> <span class="st">'Never'</span>, <span class="st">'1'</span> <span class="ot">=</span> <span class="st">'Current'</span>, <span class="st">'2'</span> <span class="ot">=</span> <span class="st">'Past'</span>)</span>
<span id="cb21-328"><a href="#cb21-328" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-329"><a href="#cb21-329" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Alcohol units</span></span>
<span id="cb21-330"><a href="#cb21-330" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span>(v <span class="sc">==</span> <span class="st">'alcoholunits'</span>) {</span>
<span id="cb21-331"><a href="#cb21-331" aria-hidden="true" tabindex="-1"></a>        rf_config[[rf_var]] <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb21-332"><a href="#cb21-332" aria-hidden="true" tabindex="-1"></a>          <span class="at">varname =</span> rf_var,</span>
<span id="cb21-333"><a href="#cb21-333" aria-hidden="true" tabindex="-1"></a>          <span class="at">realname =</span> <span class="fu">paste0</span>(<span class="st">'Alcohol units at @ R'</span>, i),</span>
<span id="cb21-334"><a href="#cb21-334" aria-hidden="true" tabindex="-1"></a>          <span class="at">unknown =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb21-335"><a href="#cb21-335" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb21-336"><a href="#cb21-336" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb21-337"><a href="#cb21-337" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-338"><a href="#cb21-338" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb21-339"><a href="#cb21-339" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="pre-processing" class="level3">
<h3 class="anchored" data-anchor-id="pre-processing">Pre-processing</h3>
<section id="i.-pre-autopreprocessing" class="level4">
<h4 class="anchored" data-anchor-id="i.-pre-autopreprocessing">I. (pre-autopreprocessing)</h4>
<p>Derivation of dates, ages, parity count, etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumes dates are in YMD format.</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Columns with date information:</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># RiskFactor dataframe: DOB, EntryDate, datedueQ, fupca_start, fupca_end, pregdate_[1:9], etc.</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Fractional year difference between dates</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co"># date1 = First date, chronologically</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># date2 = Second date, chronologically</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Takes every calendar year to be one unit</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Everything trailing after that is calculated as an additional fraction, according to the number of days in that year (ie., factoring in leap years)</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>year_diff <span class="ot">&lt;-</span> <span class="cf">function</span>(date1, date2) {</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert the dates to Date objects</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  date1 <span class="ot">&lt;-</span> <span class="fu">ymd</span>(date1)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  date2 <span class="ot">&lt;-</span> <span class="fu">ymd</span>(date2)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  years <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(date1) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(date2), </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">time_length</span>(<span class="fu">interval</span>(date1, date2), <span class="st">"year"</span>), </span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>                  <span class="cn">NA</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Demonstrating how lubridate handles leap years</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="co">#test_dob1 &lt;- '2017-01-01'</span></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="co">#test_dob2 &lt;- '2018-01-01'</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="co">#years &lt;- year_diff(test_dob1, test_dob2)</span></span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="co">#print(years)</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Risk factor dataset</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">ADOB_F =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(ADOB_F)), </span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">EntryDate_F =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(EntryDate_F)),</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">datedueQ_F =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(datedueQ_F)),</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">fupca_start_F =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(fupca_start_F)),</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">fupca_end_F =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(fupca_end_F))) <span class="sc">%&gt;%</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'pregdate_'</span>), \(x) <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(x))))</span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Cancer summary dataset</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>dataset_ca <span class="ot">&lt;-</span> dataset_ca <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">diagdate_f =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(diagdate_f)))</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Collections dataset</span></span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>dataset_collections <span class="ot">&lt;-</span> dataset_collections <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">QR1_date_f =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(QR1_date_f)), </span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">QR2_date_f =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(QR2_date_f)),</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">QR3_date_f =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(QR3_date_f)),</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">QR4_date_f =</span> <span class="fu">as.Date</span>(<span class="fu">ymd_hms</span>(QR4_date_f)))</span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging these questionnaire return dates with the risk factor data</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(<span class="at">by=</span><span class="st">"TCode"</span>, dataset_collections <span class="sc">%&gt;%</span> <span class="fu">select</span>(TCode, QR1_date_f, QR2_date_f, QR3_date_f, QR4_date_f))</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Parity variable</span></span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Recoding -1 (never pregnant) to 0 (nulliparous)</span></span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>pregparitycnt[<span class="sc">!</span><span class="fu">is.na</span>(dataset_rf<span class="sc">$</span>pregparitycnt) <span class="sc">&amp;</span> dataset_rf<span class="sc">$</span>pregparitycnt <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a><span class="co"># Menopausal status (pre vs menopausal), latest known from meno_age variable</span></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>latest_menopausal_status <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">ifelse</span>(dataset_rf<span class="sc">$</span>meno_age <span class="sc">%in%</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">999</span>), <span class="cn">NA</span>, <span class="fu">as.numeric</span>(dataset_rf<span class="sc">$</span>meno_age <span class="sc">!=</span> <span class="dv">777</span>)), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'Premenopausal'</span>, <span class="st">'Menopausal'</span>))</span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Age at each delivery</span></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Derived from pregdate_[0:9]</span></span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf <span class="sc">%&gt;%</span></span>
<span id="cb22-56"><a href="#cb22-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">'pregdate_'</span>), </span>
<span id="cb22-57"><a href="#cb22-57" aria-hidden="true" tabindex="-1"></a>                \(x) <span class="fu">year_diff</span>(ADOB_F, x),</span>
<span id="cb22-58"><a href="#cb22-58" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">'age_at_{.col}'</span>))</span>
<span id="cb22-59"><a href="#cb22-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-60"><a href="#cb22-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Age at dates of questionnaire returns</span></span>
<span id="cb22-61"><a href="#cb22-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Derived from QR2_date [0:9]</span></span>
<span id="cb22-62"><a href="#cb22-62" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf <span class="sc">%&gt;%</span></span>
<span id="cb22-63"><a href="#cb22-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">matches</span>(<span class="st">'^QR</span><span class="sc">\\</span><span class="st">d+_date_'</span>), </span>
<span id="cb22-64"><a href="#cb22-64" aria-hidden="true" tabindex="-1"></a>                \(x) <span class="fu">year_diff</span>(ADOB_F, x),</span>
<span id="cb22-65"><a href="#cb22-65" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">'age_at_{.col}'</span>))</span>
<span id="cb22-66"><a href="#cb22-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-67"><a href="#cb22-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Age at dates of recruitment </span></span>
<span id="cb22-68"><a href="#cb22-68" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>fupca_start_age <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(dataset_rf<span class="sc">$</span>ADOB_F, dataset_rf<span class="sc">$</span>fupca_start_F)</span>
<span id="cb22-69"><a href="#cb22-69" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>EntryDate_age <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(dataset_rf<span class="sc">$</span>ADOB_F, dataset_rf<span class="sc">$</span>EntryDate_F)</span>
<span id="cb22-70"><a href="#cb22-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-71"><a href="#cb22-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Body size variables:</span></span>
<span id="cb22-72"><a href="#cb22-72" aria-hidden="true" tabindex="-1"></a>under_20_mask <span class="ot">&lt;-</span> dataset_rf<span class="sc">$</span>EntryDate_age <span class="sc">&lt;</span> <span class="dv">20</span></span>
<span id="cb22-73"><a href="#cb22-73" aria-hidden="true" tabindex="-1"></a>over_20_mask <span class="ot">&lt;-</span> dataset_rf<span class="sc">$</span>EntryDate_age <span class="sc">&gt;=</span> <span class="dv">20</span></span>
<span id="cb22-74"><a href="#cb22-74" aria-hidden="true" tabindex="-1"></a>under_20_mask[<span class="fu">is.na</span>(under_20_mask)] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb22-75"><a href="#cb22-75" aria-hidden="true" tabindex="-1"></a>over_20_mask[<span class="fu">is.na</span>(over_20_mask)] <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb22-76"><a href="#cb22-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-77"><a href="#cb22-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Height at 20</span></span>
<span id="cb22-78"><a href="#cb22-78" aria-hidden="true" tabindex="-1"></a>ht20_missing_mask <span class="ot">&lt;-</span> dataset_rf<span class="sc">$</span>bodysizeht20 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">989</span>, <span class="dv">999</span>)</span>
<span id="cb22-79"><a href="#cb22-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting those with a defined height at 20 despite being less than 20 years old to NA</span></span>
<span id="cb22-80"><a href="#cb22-80" aria-hidden="true" tabindex="-1"></a><span class="co">#dataset_rf[under_20_mask,'bodysizeht20'] &lt;- NA </span></span>
<span id="cb22-81"><a href="#cb22-81" aria-hidden="true" tabindex="-1"></a><span class="co"># In Michael's code, a missing height at 20 is updated to equal adult height, like so (though I am also checking if they were 20 at the time they gave the adult height measurement)</span></span>
<span id="cb22-82"><a href="#cb22-82" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>bodysizeht20[ht20_missing_mask <span class="sc">&amp;</span> over_20_mask] <span class="ot">&lt;-</span> dataset_rf<span class="sc">$</span>bodysizeht[ht20_missing_mask <span class="sc">&amp;</span> over_20_mask]</span>
<span id="cb22-83"><a href="#cb22-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-84"><a href="#cb22-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Weight at 20</span></span>
<span id="cb22-85"><a href="#cb22-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting those with a defined weight at 20 despite being less than 20 years old to NA.</span></span>
<span id="cb22-86"><a href="#cb22-86" aria-hidden="true" tabindex="-1"></a><span class="co">#dataset_rf[under_20_mask,'bodysizewt20'] &lt;- NA </span></span>
<span id="cb22-87"><a href="#cb22-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-88"><a href="#cb22-88" aria-hidden="true" tabindex="-1"></a><span class="co"># BMI at 20</span></span>
<span id="cb22-89"><a href="#cb22-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting those with a defined BMI at 20 despite being less than 20 years old to NA.</span></span>
<span id="cb22-90"><a href="#cb22-90" aria-hidden="true" tabindex="-1"></a><span class="co">#dataset_rf[under_20_mask,'bodysizebmi20'] &lt;- NA </span></span>
<span id="cb22-91"><a href="#cb22-91" aria-hidden="true" tabindex="-1"></a><span class="co"># In Michael's code, an additional 'bmi20_updated' variable is made using adult height, if height at 20 is missing.</span></span>
<span id="cb22-92"><a href="#cb22-92" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>bodysizebmi20[ht20_missing_mask] <span class="ot">&lt;-</span> dataset_rf<span class="sc">$</span>bodysizewt20[ht20_missing_mask] <span class="sc">/</span> (dataset_rf<span class="sc">$</span>bodysizeht20[ht20_missing_mask])<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ii.-autopreprocessing" class="level4">
<h4 class="anchored" data-anchor-id="ii.-autopreprocessing">II. (autopreprocessing)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code for applying the custom configuration file</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(idx <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(rf_config))) {</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">names</span>(rf_config)[[idx]]</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  config <span class="ot">=</span> rf_config[[idx]]</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  varname <span class="ot">=</span> config<span class="sc">$</span>varname</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  dataset_rf[[varname]] <span class="ot">&lt;-</span> dataset_rf[[var]]</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Pre-processing </span><span class="sc">\'</span><span class="st">'</span>, var, <span class="st">'</span><span class="sc">\'</span><span class="st"> =&gt; </span><span class="sc">\'</span><span class="st">'</span>, varname, <span class="st">'</span><span class="sc">\'</span><span class="st">:'</span>))</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(config<span class="sc">$</span>unknown)) {</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    unk_vals <span class="ot">&lt;-</span> config<span class="sc">$</span>unknown</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    unk_mask <span class="ot">&lt;-</span> (dataset_rf[[varname]] <span class="sc">%in%</span> unk_vals)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'  '</span>, <span class="fu">sum</span>(unk_mask, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="st">' ('</span>, <span class="fu">round</span>(<span class="fu">sum</span>(unk_mask, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">/</span> <span class="fu">nrow</span>(dataset_rf), <span class="dv">4</span>)<span class="sc">*</span><span class="dv">100</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'%) have a missing code.'</span>))</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    dataset_rf[unk_mask,varname] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(config<span class="sc">$</span>exp_range)) {</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    accepted_range <span class="ot">&lt;-</span> config<span class="sc">$</span>exp_range</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    outrange_mask <span class="ot">&lt;-</span> <span class="sc">!</span>((dataset_rf[[varname]] <span class="sc">&gt;=</span> accepted_range[<span class="dv">1</span>]) <span class="sc">&amp;</span> (dataset_rf[[varname]] <span class="sc">&lt;=</span> accepted_range[<span class="dv">2</span>]))</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'  '</span>, <span class="fu">sum</span>(outrange_mask, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="st">' of the </span><span class="sc">\'</span><span class="st">'</span>, var, <span class="st">'</span><span class="sc">\'</span><span class="st"> variable are deemed outliers.'</span>))</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>    dataset_rf[<span class="sc">!</span><span class="fu">is.na</span>(outrange_mask) <span class="sc">&amp;</span> outrange_mask, varname] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(config<span class="sc">$</span>bands)) {</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>    bands <span class="ot">&lt;-</span> config<span class="sc">$</span>bands</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>    labels <span class="ot">&lt;-</span> config<span class="sc">$</span>categories</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'  '</span>, <span class="st">"Grouping into: "</span>, <span class="fu">paste</span>(bands, <span class="at">collapse =</span> <span class="st">", "</span>)))</span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(<span class="fu">names</span>(labels))) {</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>      dataset_rf[[varname]] <span class="ot">&lt;-</span> <span class="fu">cut</span>(dataset_rf[[varname]], bands, <span class="at">labels =</span> labels, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">FALSE</span>)</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>      dataset_rf[[varname]] <span class="ot">&lt;-</span> <span class="fu">cut</span>(dataset_rf[[varname]], bands, <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, <span class="at">right =</span> <span class="cn">FALSE</span>)</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(config<span class="sc">$</span>categories)) {</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>    labels <span class="ot">&lt;-</span> config<span class="sc">$</span>categories</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'  '</span>, <span class="st">"Refactoring into: "</span>, <span class="fu">paste</span>(labels, <span class="at">collapse =</span> <span class="st">", "</span>)))</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(<span class="fu">names</span>(labels))) {</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>      dataset_rf[[varname]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(dataset_rf[[varname]], <span class="at">levels =</span> <span class="fu">names</span>(labels), <span class="at">labels =</span> labels, <span class="at">ordered =</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(config<span class="sc">$</span>ordered), <span class="cn">FALSE</span>, config<span class="sc">$</span>ordered))</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>      dataset_rf[[varname]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(dataset_rf[[varname]], <span class="at">labels =</span> labels, <span class="at">ordered =</span> <span class="fu">ifelse</span>(<span class="fu">is.null</span>(config<span class="sc">$</span>ordered), <span class="cn">FALSE</span>, config<span class="sc">$</span>ordered))</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(config<span class="sc">$</span>transform)) {</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a>    dataset_rf[[varname]] <span class="ot">&lt;-</span> config<span class="sc">$</span><span class="fu">transform</span>(dataset_rf[[varname]])</span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Pre-processing 'AgeatEntry' =&gt; 'ageentrygrp':"
[1] "  Grouping into: 16, 35, 45, 55, 65, 75, 102"
[1] "Pre-processing 'bodysizeht' =&gt; 'bodysizeht':"
[1] "  3367 (2.89%) have a missing code."
[1] "  60 of the 'bodysizeht' variable are deemed outliers."
[1] "Pre-processing 'bodysizeht20' =&gt; 'bodysizeht20':"
[1] "  4516 (3.87%) have a missing code."
[1] "  58 of the 'bodysizeht20' variable are deemed outliers."
[1] "Pre-processing 'bodysizewt20' =&gt; 'bodysizewt20':"
[1] "  7584 (6.5%) have a missing code."
[1] "  209 of the 'bodysizewt20' variable are deemed outliers."
[1] "Pre-processing 'bodysizewt20' =&gt; 'weight20grp':"
[1] "  7793 (6.68%) have a missing code."
[1] "  Grouping into: 40, 50, 55, 60, 70, 200"
[1] "Pre-processing 'bodysizebminow' =&gt; 'bminowgrp':"
[1] "  6156 (5.28%) have a missing code."
[1] "  94 of the 'bodysizebminow' variable are deemed outliers."
[1] "  Grouping into: 1, 20, 25, 100"
[1] "  Refactoring into: &lt; 20, 20-24, &gt;=25"
[1] "Pre-processing 'bodysizebminow' =&gt; 'bodysizebminow':"
[1] "  6156 (5.28%) have a missing code."
[1] "  94 of the 'bodysizebminow' variable are deemed outliers."
[1] "Pre-processing 'R2bodysizebmi' =&gt; 'R2bodysizebmi':"
[1] "  15126 (12.97%) have a missing code."
[1] "  100 of the 'R2bodysizebmi' variable are deemed outliers."
[1] "Pre-processing 'R4bodysizebmi' =&gt; 'R4bodysizebmi':"
[1] "  39357 (33.74%) have a missing code."
[1] "  206 of the 'R4bodysizebmi' variable are deemed outliers."
[1] "Pre-processing 'bodysizebmi20' =&gt; 'bodysizebmi20':"
[1] "  6246 (5.35%) have a missing code."
[1] "  18395 of the 'bodysizebmi20' variable are deemed outliers."
[1] "Pre-processing 'ses' =&gt; 'ses':"
[1] "  4336 (3.72%) have a missing code."
[1] "  Refactoring into: Wealthy achievers, Urban prosperity, Comfortably off, Moderate means, Hard-pressed, Region not covered, Unclassified"
[1] "Pre-processing 'fambrca' =&gt; 'fambrca':"
[1] "  Refactoring into: Absent, Present"
[1] "Pre-processing 'brbendis' =&gt; 'brbendis':"
[1] "  Refactoring into: No, Yes"
[1] "Pre-processing 'birthweight' =&gt; 'birthweight':"
[1] "  38182 (32.73%) have a missing code."
[1] "Pre-processing 'hrtstatus' =&gt; 'hrtstatus':"
[1] "  3419 (2.93%) have a missing code."
[1] "  Refactoring into: Never, Former, Current"
[1] "Pre-processing 'meno_age' =&gt; 'meno_age':"
[1] "  58925 (50.51%) have a missing code."
[1] "Pre-processing 'meno_age_est' =&gt; 'meno_age_est':"
[1] "  2933 (2.51%) have a missing code."
[1] "Pre-processing 'menarcheage' =&gt; 'menarchegrp':"
[1] "  14535 (12.46%) have a missing code."
[1] "  Grouping into: 8, 11, 13, 15, 19"
[1] "Pre-processing 'menarcheage' =&gt; 'menarcheage':"
[1] "  14535 (12.46%) have a missing code."
[1] "Pre-processing 'PhysMetTotal' =&gt; 'PhysMetTotalLog2':"
[1] "  6048 (5.18%) have a missing code."
[1] "Pre-processing 'PhysMetTotal' =&gt; 'PhysMetTotal':"
[1] "  3995 (3.42%) have a missing code."
[1] "Pre-processing 'smokingstartage' =&gt; 'smokingstartage':"
[1] "  77135 (66.12%) have a missing code."
[1] "Pre-processing 'ocstatus' =&gt; 'ocstatus':"
[1] "  3014 (2.58%) have a missing code."
[1] "  Refactoring into: Never, Former, Current"
[1] "Pre-processing 'pregparitycnt' =&gt; 'pregparitycnt':"
[1] "  3087 (2.65%) have a missing code."
[1] "Pre-processing 'pregparitycnt' =&gt; 'pregparous':"
[1] "  3087 (2.65%) have a missing code."
[1] "  Grouping into: 0, 1, Inf"
[1] "  Refactoring into: Nulliparous, Parous"
[1] "Pre-processing 'bf_1' =&gt; 'bf_1':"
[1] "  30817 (26.42%) have a missing code."
[1] "  101 of the 'bf_1' variable are deemed outliers."
[1] "Pre-processing 'bf_2' =&gt; 'bf_2':"
[1] "  45232 (38.77%) have a missing code."
[1] "  107 of the 'bf_2' variable are deemed outliers."
[1] "Pre-processing 'bf_3' =&gt; 'bf_3':"
[1] "  93960 (80.54%) have a missing code."
[1] "  43 of the 'bf_3' variable are deemed outliers."
[1] "Pre-processing 'bf_4' =&gt; 'bf_4':"
[1] "  111904 (95.92%) have a missing code."
[1] "  17 of the 'bf_4' variable are deemed outliers."
[1] "Pre-processing 'bf_5' =&gt; 'bf_5':"
[1] "  115837 (99.29%) have a missing code."
[1] "  4 of the 'bf_5' variable are deemed outliers."
[1] "Pre-processing 'bf_6' =&gt; 'bf_6':"
[1] "  116468 (99.83%) have a missing code."
[1] "  0 of the 'bf_6' variable are deemed outliers."
[1] "Pre-processing 'bf_7' =&gt; 'bf_7':"
[1] "  116620 (99.96%) have a missing code."
[1] "  0 of the 'bf_7' variable are deemed outliers."
[1] "Pre-processing 'bf_8' =&gt; 'bf_8':"
[1] "  116655 (99.99%) have a missing code."
[1] "  0 of the 'bf_8' variable are deemed outliers."
[1] "Pre-processing 'bf_9' =&gt; 'bf_9':"
[1] "  116663 (100%) have a missing code."
[1] "  0 of the 'bf_9' variable are deemed outliers."
[1] "Pre-processing 'HRTstartage_1' =&gt; 'HRTstartage_1':"
[1] "  0 of the 'HRTstartage_1' variable are deemed outliers."
[1] "Pre-processing 'HRTstopage_1' =&gt; 'HRTstopage_1':"
[1] "  0 of the 'HRTstopage_1' variable are deemed outliers."
[1] "Pre-processing 'HRTtype1_1' =&gt; 'HRTtype1_1':"
[1] "Pre-processing 'HRTstartage_2' =&gt; 'HRTstartage_2':"
[1] "  1 of the 'HRTstartage_2' variable are deemed outliers."
[1] "Pre-processing 'HRTstopage_2' =&gt; 'HRTstopage_2':"
[1] "  0 of the 'HRTstopage_2' variable are deemed outliers."
[1] "Pre-processing 'HRTtype1_2' =&gt; 'HRTtype1_2':"
[1] "Pre-processing 'HRTstartage_3' =&gt; 'HRTstartage_3':"
[1] "  0 of the 'HRTstartage_3' variable are deemed outliers."
[1] "Pre-processing 'HRTstopage_3' =&gt; 'HRTstopage_3':"
[1] "  0 of the 'HRTstopage_3' variable are deemed outliers."
[1] "Pre-processing 'HRTtype1_3' =&gt; 'HRTtype1_3':"
[1] "Pre-processing 'HRTstartage_4' =&gt; 'HRTstartage_4':"
[1] "  0 of the 'HRTstartage_4' variable are deemed outliers."
[1] "Pre-processing 'HRTstopage_4' =&gt; 'HRTstopage_4':"
[1] "  0 of the 'HRTstopage_4' variable are deemed outliers."
[1] "Pre-processing 'HRTtype1_4' =&gt; 'HRTtype1_4':"
[1] "Pre-processing 'R1smokingstatus' =&gt; 'R1smokingstatus':"
[1] "  3038 (2.6%) have a missing code."
[1] "  Refactoring into: Never, Former, Current"
[1] "Pre-processing 'R2smokingstatus' =&gt; 'R2smokingstatus':"
[1] "  7691 (6.59%) have a missing code."
[1] "  Refactoring into: Never, Former, Current"
[1] "Pre-processing 'R4smokingstatus' =&gt; 'R4smokingstatus':"
[1] "  37262 (31.94%) have a missing code."
[1] "  Refactoring into: Never, Former, Current"
[1] "Pre-processing 'R1alcoholstatus' =&gt; 'R1alcoholstatus':"
[1] "  2907 (2.49%) have a missing code."
[1] "  Refactoring into: Never, Current, Past"
[1] "Pre-processing 'R2alcoholstatus' =&gt; 'R2alcoholstatus':"
[1] "  2907 (2.49%) have a missing code."
[1] "  Refactoring into: Never, Current, Past"
[1] "Pre-processing 'R4alcoholstatus' =&gt; 'R4alcoholstatus':"
[1] "  2907 (2.49%) have a missing code."
[1] "  Refactoring into: Never, Current, Past"
[1] "Pre-processing 'R1alcoholunits' =&gt; 'R1alcoholunits':"
[1] "  4164 (3.57%) have a missing code."
[1] "Pre-processing 'R2alcoholunits' =&gt; 'R2alcoholunits':"
[1] "  35850 (30.73%) have a missing code."
[1] "Pre-processing 'R4alcoholunits' =&gt; 'R4alcoholunits':"
[1] "  55670 (47.72%) have a missing code."
[1] "Pre-processing 'R1menopause' =&gt; 'R1menopause':"
[1] "  2933 (2.51%) have a missing code."
[1] "  Refactoring into: Premenopausal, Premenopausal, Postmenopausal, Postmenopausal"
[1] "Pre-processing 'R2menopause' =&gt; 'R2menopause':"
[1] "  7591 (6.51%) have a missing code."
[1] "  Refactoring into: Premenopausal, Premenopausal, Postmenopausal, Postmenopausal"
[1] "Pre-processing 'R3menopause' =&gt; 'R3menopause':"
[1] "  9788 (8.39%) have a missing code."
[1] "  Refactoring into: Premenopausal, Premenopausal, Postmenopausal, Postmenopausal"
[1] "Pre-processing 'R4menopause' =&gt; 'R4menopause':"
[1] "  35949 (30.81%) have a missing code."
[1] "  Refactoring into: Premenopausal, Premenopausal, Postmenopausal, Postmenopausal"</code></pre>
</div>
</div>
</section>
<section id="iii.-post-autopreprocessing" class="level4">
<h4 class="anchored" data-anchor-id="iii.-post-autopreprocessing">III. (post-autopreprocessing)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a total breastfeeding duration variable (this is cumulative over every breastfeed)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>bf_cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(dataset_rf)[<span class="fu">grepl</span>(<span class="st">'^bf_</span><span class="sc">\\</span><span class="st">d$'</span>, <span class="fu">colnames</span>(dataset_rf))]</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>bf_total <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(dataset_rf[,bf_cols], <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>preg_cols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(dataset_rf)[<span class="fu">grepl</span>(<span class="st">'^age_at_pregdate_</span><span class="sc">\\</span><span class="st">d_f$'</span>, <span class="fu">colnames</span>(dataset_rf))]</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Smoking, refactoring</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>R1smokingstartage <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(dataset_rf<span class="sc">$</span>smokingstartage <span class="sc">&lt;=</span> dataset_rf<span class="sc">$</span>age_at_QR1_date_f, dataset_rf<span class="sc">$</span>smokingstartage, <span class="cn">NA</span>)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>R1smokingcategories <span class="ot">&lt;-</span> <span class="fu">cut</span>(dataset_rf<span class="sc">$</span>R1smokingstartage, <span class="at">breaks=</span><span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">17</span>, <span class="dv">20</span>, <span class="sc">+</span><span class="cn">Inf</span>), <span class="at">right=</span><span class="cn">FALSE</span>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>R1smokingcategory <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="fu">ifelse</span>(dataset_rf<span class="sc">$</span>R1smokingstatus <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'Current'</span>, <span class="st">'Former'</span>), <span class="fu">as.character</span>(R1smokingcategories), <span class="fu">ifelse</span>(dataset_rf<span class="sc">$</span>R1smokingstatus <span class="sc">==</span> <span class="st">'Never'</span>, <span class="st">'Never'</span>, <span class="cn">NA</span>)))</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>R1smokingcategory <span class="ot">&lt;-</span> <span class="fu">relevel</span>(dataset_rf<span class="sc">$</span>R1smokingcategory, <span class="at">ref=</span><span class="st">'Never'</span>)</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a breastfeeding duration at time point t (e.g., fupca_start_age)</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to calculate breastfeeding weeks until recruitment</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>calculate_bf_weeks <span class="ot">&lt;-</span> <span class="cf">function</span>(delivery_date, bf_weeks, recruitment_start) {</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#browser()</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(delivery_date) <span class="sc">||</span> <span class="fu">is.na</span>(bf_weeks)) {</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="fu">is.na</span>(recruitment_start)) {</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    breastfeeding_end_date <span class="ot">&lt;-</span> delivery_date <span class="sc">+</span> (bf_weeks <span class="sc">*</span> <span class="dv">7</span>)</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    weeks_until_recruitment <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">difftime</span>(<span class="fu">min</span>(breastfeeding_end_date, recruitment_start), delivery_date, <span class="at">units =</span> <span class="st">"weeks"</span>))</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If negative (ie., delivery was after recruitment), return 0, otherwise return the calculated weeks</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">max</span>(weeks_until_recruitment, <span class="dv">0</span>))</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>bf_at_recruitment <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>) {</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  delivery_date_col <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"pregdate_"</span>, i, <span class="st">"_f"</span>)</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  bf_duration_col <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"bf_"</span>, i)</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate breastfeeding weeks for each row and add to the total</span></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  dataset_rf<span class="sc">$</span>bf_at_recruitment <span class="ot">&lt;-</span> dataset_rf<span class="sc">$</span>bf_at_recruitment <span class="sc">+</span> <span class="fu">mapply</span>(calculate_bf_weeks, </span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>                                                        dataset_rf[[delivery_date_col]], </span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>                                                        dataset_rf[[bf_duration_col]], </span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>                                                        dataset_rf<span class="sc">$</span>EntryDate_F)</span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a><span class="co"># If missing on all bf_* columns, then set bf_at_recruitment to NA</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>bf_at_recruitment[<span class="fu">rowSums</span>(<span class="sc">!</span><span class="fu">is.na</span>(dataset_rf[,bf_cols]))<span class="sc">==</span><span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a><span class="co"># If nulliparous, then set bf_at_recruitment to 0 (? pregparous is at recruitment, right?)</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>dataset_rf<span class="sc">$</span>bf_at_recruitment[dataset_rf<span class="sc">$</span>pregparous<span class="sc">==</span><span class="st">"Nulliparous"</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="cohort-and-survival-data" class="level2">
<h2 class="anchored" data-anchor-id="cohort-and-survival-data">Cohort and survival data</h2>
<section id="definition-of-subcohort" class="level3">
<h3 class="anchored" data-anchor-id="definition-of-subcohort">Definition of subcohort</h3>
<p>The subcohort for subsequent analysis, selected from the entire cohort, was selected by:</p>
<ol type="1">
<li>Exclusion of those with previous cancer (prior to their follow-up start date).
<ol type="a">
<li>ICD10: Code starting with ‘C’ (‘Malignant neoplasm’), except for C44 (‘Other and unspecified malignant neoplasm of skin’)</li>
<li>ICD9: Code starting with ‘1’ (‘Malignant neoplasm’), except for 173 (‘Other and unspecified malignant neoplasm of skin’)</li>
<li>ICD9: Code starting with ‘20’ (‘Malignant Neoplasm Of Lymphatic And Hematopoietic Tissue’)</li>
<li>ICD10: Code starting with ‘D059’ (‘Carcinoma in situ of breast’)</li>
<li>ICD10: Code starting with ‘D051’ (‘Intraductal carcinoma in situ of breast’)</li>
<li>ICD9: Code starting with ‘2330’ (‘Carcinoma in situ of breast’)</li>
</ol></li>
<li>Exclusion of those who have not returned the initial questionnaire.</li>
<li>Exclusion of those who fell outside the cohort window (fupca_end_reason == 99).</li>
<li>Exclusion of those who left the study on the same day they entered.</li>
<li>Exclusion of those who have a missing follow-up end date.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ? Necessary to implement sanity checking for dates of diagnosis &lt; DOB</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Arguments:</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_df: Risk factor dataframe</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ca_df: Cancer event dataframe</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ca_icdt: String vector for the ICD codes to exclude if prevalent. If 'all', then all prevalent cancer cases will be excluded.</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Returns: An updated risk factor dataframe with the prevalent cases removed</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>exclude_prevalent <span class="ot">&lt;-</span> <span class="cf">function</span>(rf_df, ca_df, ca_icdt, <span class="at">regex =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Support input of either regex or a vector of strings</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>regex) {</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    ca_icdt_regex <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"^("</span>, <span class="fu">paste</span>(ca_icdt, <span class="at">collapse =</span> <span class="st">"|"</span>), <span class="st">")"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    ca_icdt_regex <span class="ot">&lt;-</span> ca_icdt</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  ca_rf_merged <span class="ot">&lt;-</span> ca_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(tcode, diagdate_f, ICDt) <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(rf_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(TCode, ADOB_F, fupca_start_F), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"tcode"</span> <span class="ot">=</span> <span class="st">"TCode"</span>))</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="st">'all'</span> <span class="sc">%in%</span> ca_icdt) {</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    tcodes_to_exclude <span class="ot">&lt;-</span> ca_rf_merged <span class="sc">%&gt;%</span> <span class="fu">filter</span>(diagdate_f <span class="sc">&lt;=</span> fupca_start_F) <span class="sc">%&gt;%</span> </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(tcode) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">pull</span>(tcode) </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    tcodes_to_exclude <span class="ot">&lt;-</span> ca_rf_merged <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">grepl</span>(ca_icdt_regex, ICDt, <span class="at">perl=</span><span class="cn">TRUE</span>) <span class="sc">&amp;</span> diagdate_f <span class="sc">&lt;=</span> fupca_start_F) <span class="sc">%&gt;%</span> <span class="co"># Prevalent = On (to remove diagnoses on the day of recruitment) OR before</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(tcode) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">pull</span>(tcode)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(rf_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>(TCode <span class="sc">%in%</span> tcodes_to_exclude)))</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>obs_number <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dataset_rf)</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop prevalent cases (same pattern matching as for what constitutes a 'censored' timepoint)</span></span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> <span class="fu">exclude_prevalent</span>(dataset_rf, dataset_ca, <span class="st">"^(C(?!44)[0-9]+|1(?!73)[0-9]+|20|D051|D059|2330)"</span>, <span class="at">regex=</span><span class="cn">TRUE</span>)</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(obs_number<span class="sc">-</span><span class="fu">nrow</span>(dataset_rf), <span class="st">' participants were prevalent for cancer and excluded.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "8924 participants were prevalent for cancer and excluded."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>obs_number <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dataset_rf)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop those with unknown follow-up end times (the majority of which are due to unreturned questionnaire)</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf[<span class="sc">!</span><span class="fu">is.na</span>(dataset_rf<span class="sc">$</span>fupca_end_F),]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(obs_number<span class="sc">-</span><span class="fu">nrow</span>(dataset_rf), <span class="st">' participants had unknown follow-up end times and were excluded.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2909 participants had unknown follow-up end times and were excluded."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>obs_number <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dataset_rf)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop those outside of cohort window (fupca_end_reason == 99)</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf[dataset_rf<span class="sc">$</span>fupca_end_reason <span class="sc">!=</span> <span class="dv">99</span>,]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(obs_number<span class="sc">-</span><span class="fu">nrow</span>(dataset_rf), <span class="st">' participants were </span><span class="sc">\'</span><span class="st">outside the cohort window</span><span class="sc">\'</span><span class="st"> (end reason of 99) and were excluded.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "23 participants were 'outside the cohort window' (end reason of 99) and were excluded."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>obs_number <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dataset_rf)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop those with a follow-up end time equal to follow-up start time (? No time spent in study)</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="ot">&lt;-</span> dataset_rf[dataset_rf<span class="sc">$</span>fupca_start_F <span class="sc">!=</span> dataset_rf<span class="sc">$</span>fupca_end_F,]</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(obs_number<span class="sc">-</span><span class="fu">nrow</span>(dataset_rf), <span class="st">' participants left the study on the same day they entered and were excluded.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "114 participants left the study on the same day they entered and were excluded."</code></pre>
</div>
</div>
</section>
<section id="survival-data-preparation" class="level3">
<h3 class="anchored" data-anchor-id="survival-data-preparation">Survival data preparation</h3>
<p>An event is defined as the first occurrence of breast cancer, defined as either invasive or DCIS. a. ICD10 codes: Starting with ‘C50’ (‘Malignant neoplasm of breast’), ‘D051’, or ‘D059’ (‘DCIS’) b. ICD9 codes: Starting with ‘174’ (‘Malignant neoplasm of female breast’) or ‘2330’ (‘DCIS’) Censoring is applied at the first occurrence of any cancer, as defined in the previous section (under subcohort definition).</p>
<p>For every TCode, we find all the corresponding records in the cancer dataset. The same day can have multiple records, in which case if any of the records is an event (ie., invasive breast cancer or DCIS), that person is automatically labelled as an event on that day (in this way, the ‘event’ detection is ‘greedy’). This means that if a person has multiple records on the same day, one of which is an event (while the other is a censor but non-event), then that person will be tagged as an event on that day; in other words, if a person has a diagnosis of breast cancer and ovarian cancer on the same day, they will be tagged as an ‘event’ rather than censored without counting the event. There are seven participants who have the latter scenario, where one of the two records on the same day is labelled as an ‘event’ (due to it matching a breast cancer ICD code), while the other record matches censoring (but is a non-event). In these cases, all of these participants would be labelled as having an event.</p>
<p>The date of censoring is determined as the earliest of: the earliest event date (within the bounds of the follow-up time), the earliest censor date (within the bounds of the follow-up time), and the follow-up end date. The follow-up start dates and dates of censoring are then converted into (leap-year accounting) years from birth (ie., into age at follow-up start and age at censoring).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Censoring criteria is minimum of: Event of interest, censoring event (e.g., any invasive cancer), follow-up time ended.</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Per Michael's definitions:</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define event of interest (e.g., breast cancer c('C50', '174', 'D051', 'D059', '2330'))</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define censoring event (union of event of interest + c('C' [except C44], '1' [except 173], '20', 'D051', 'D059', '2330'))</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Return: Each row in rf will have: tcode, event (0, 1), time contributed (ie., time to event or censored)</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>prepare_survival_data <span class="ot">&lt;-</span> <span class="cf">function</span>(rf_df, ca_df, event_icdt, cens_icdt, <span class="at">regex =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#browser()</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Support input of either regex or a vector of strings</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span>regex) {</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    event_icdt_regex <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"^("</span>, <span class="fu">paste</span>(event_icdt, <span class="at">sep =</span> <span class="st">"|"</span>), <span class="st">")"</span>)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    cens_icdt_regex <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"^("</span>, <span class="fu">paste</span>(cens_icdt, <span class="at">sep =</span> <span class="st">"|"</span>), <span class="st">")"</span>)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    event_icdt_regex <span class="ot">&lt;-</span> event_icdt</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    cens_icdt_regex <span class="ot">&lt;-</span> cens_icdt</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>  ca_rf_merged <span class="ot">&lt;-</span> rf_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(TCode, ADOB_F, fupca_start_F, fupca_end_F) <span class="sc">%&gt;%</span> </span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(ca_df <span class="sc">%&gt;%</span>  <span class="fu">select</span>(tcode, ICDt, diagdate_f, Reginfo_Clusterino, Report_Cluster) <span class="sc">%&gt;%</span> </span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="at">Reginfo_Clusterino =</span> <span class="fu">ifelse</span>(Reginfo_Clusterino <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">999</span>, Reginfo_Clusterino),</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">Report_Cluster     =</span> <span class="fu">ifelse</span>(Report_Cluster <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">999</span>, Report_Cluster)), <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"TCode"</span> <span class="ot">=</span> <span class="st">"tcode"</span>))</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Pre-calculate event and censor indicators (? faster)</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># For every cancer record within the follow-up window (between follow-up start and follow-up end dates), we record whether this record counts as an 'event' (ie., invasive breast cancer or DCIS) and/or whether it counts as a point in time whereafter we would censor the individual (ie., an event or cancers as defined above). </span></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>  ca_rf_merged <span class="ot">&lt;-</span> ca_rf_merged <span class="sc">%&gt;%</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">is_event =</span> <span class="fu">grepl</span>(event_icdt_regex, ICDt, <span class="at">perl =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span> diagdate_f <span class="sc">&gt;=</span> fupca_start_F <span class="sc">&amp;</span> diagdate_f <span class="sc">&lt;=</span> fupca_end_F,</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">is_censor =</span> <span class="fu">grepl</span>(cens_icdt_regex, ICDt, <span class="at">perl =</span> <span class="cn">TRUE</span>) <span class="sc">&amp;</span> diagdate_f <span class="sc">&gt;=</span> fupca_start_F <span class="sc">&amp;</span> diagdate_f <span class="sc">&lt;=</span> fupca_end_F</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create survival data dataframe</span></span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># To visualise cases with multiple records per TCode per day, and where there is a record with an event and another non-event but censor, set this function as a breakpoint and execute the following:</span></span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filtered_records &lt;- ca_rf_merged %&gt;%</span></span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">#    group_by(TCode, diagdate_f) %&gt;%</span></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">#    filter(n() &gt;= 2) %&gt;%  # Keep only groups with 2 or more records</span></span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">#    filter(any(is_event == TRUE) &amp; any(is_event == FALSE &amp; is_censor == TRUE)) %&gt;%  #</span></span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">#    ungroup()  </span></span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>  survival_data <span class="ot">&lt;-</span> ca_rf_merged <span class="sc">%&gt;%</span></span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(diagdate_f) <span class="sc">%&gt;%</span> <span class="co">#, Reginfo_Clusterino, Report_Cluster) %&gt;%  </span></span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(TCode) <span class="sc">%&gt;%</span></span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">earliest_event_date =</span> <span class="fu">first</span>(diagdate_f[is_event]),</span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">earliest_censor_date =</span> <span class="fu">first</span>(diagdate_f[is_censor]),</span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">event =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(earliest_event_date) <span class="sc">&amp;&amp;</span> (<span class="fu">is.na</span>(earliest_censor_date) <span class="sc">||</span> earliest_event_date <span class="sc">&lt;=</span> earliest_censor_date), <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">c_date =</span> <span class="fu">as.Date</span>(<span class="fu">pmin</span>(<span class="fu">ifelse</span>(event <span class="sc">==</span> <span class="dv">1</span>, earliest_event_date, <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(earliest_censor_date), earliest_censor_date, fupca_end_F)))),</span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">ADOB_F =</span> <span class="fu">first</span>(ADOB_F),</span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">fupca_start_F =</span> <span class="fu">first</span>(fupca_start_F),</span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">fupca_end_F =</span> <span class="fu">first</span>(fupca_end_F)</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>      <span class="co">#c_age = year_diff(first(DOB), c_date),</span></span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a>      <span class="co">#fup_years = year_diff(first(fupca_start), c_age)</span></span>
<span id="cb34-52"><a href="#cb34-52" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb34-53"><a href="#cb34-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb34-54"><a href="#cb34-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-55"><a href="#cb34-55" aria-hidden="true" tabindex="-1"></a>  survival_data<span class="sc">$</span>fupca_start_age <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(survival_data<span class="sc">$</span>ADOB_F, survival_data<span class="sc">$</span>fupca_start_F)</span>
<span id="cb34-56"><a href="#cb34-56" aria-hidden="true" tabindex="-1"></a>  survival_data<span class="sc">$</span>c_age <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(survival_data<span class="sc">$</span>ADOB_F, survival_data<span class="sc">$</span>c_date)</span>
<span id="cb34-57"><a href="#cb34-57" aria-hidden="true" tabindex="-1"></a>  survival_data<span class="sc">$</span>fup_years <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(survival_data<span class="sc">$</span>fupca_start_F, survival_data<span class="sc">$</span>c_date)</span>
<span id="cb34-58"><a href="#cb34-58" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-59"><a href="#cb34-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(survival_data)</span>
<span id="cb34-60"><a href="#cb34-60" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-61"><a href="#cb34-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-62"><a href="#cb34-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Define patterns to match to label events and censoring events appropriately</span></span>
<span id="cb34-63"><a href="#cb34-63" aria-hidden="true" tabindex="-1"></a>event_regex <span class="ot">&lt;-</span> <span class="st">"^(C50|174|D051|D059|2330)"</span> <span class="co"># identify invasive or DCIS-breast cancer</span></span>
<span id="cb34-64"><a href="#cb34-64" aria-hidden="true" tabindex="-1"></a>cens_regex <span class="ot">&lt;-</span> <span class="st">"^(C(?!44)[0-9]+|1(?!73)[0-9]+|20|D051|D059|2330|C50|174)"</span> <span class="co"># any invasive cancer (including breast cancer) and DCIS-breast cancer (exclude NMSC)</span></span>
<span id="cb34-65"><a href="#cb34-65" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: ? Include some pre-sets (e.g., for ovarian ca, or just invasive breast ca, etc.)</span></span>
<span id="cb34-66"><a href="#cb34-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-67"><a href="#cb34-67" aria-hidden="true" tabindex="-1"></a>survival_data <span class="ot">&lt;-</span> <span class="fu">prepare_survival_data</span>(dataset_rf, dataset_ca, event_regex, cens_regex, <span class="at">regex =</span> <span class="cn">TRUE</span>) <span class="do">## complete</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="visualisation-survival-data" class="level2">
<h2 class="anchored" data-anchor-id="visualisation-survival-data">Visualisation: Survival data</h2>
<p>Helper function for plotting:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>plot_distribution_with_missing_ggplot <span class="ot">&lt;-</span> <span class="cf">function</span>(dataset, variable_name, <span class="at">binwidth =</span> <span class="cn">NULL</span>, <span class="at">title =</span> <span class="cn">NULL</span>, <span class="at">x_label =</span> <span class="cn">NULL</span>, <span class="at">force_categorical=</span><span class="cn">FALSE</span>) {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dataset with dropped NA values for the specified variable</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  clean_dataset <span class="ot">&lt;-</span> dataset <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>(<span class="sc">!!</span><span class="fu">sym</span>(variable_name))</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Total observations</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  total_observations <span class="ot">&lt;-</span> <span class="fu">nrow</span>(dataset)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate non-missing and missing counts</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  non_missing_count <span class="ot">&lt;-</span> <span class="fu">nrow</span>(clean_dataset)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  missing_count <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(dataset[[variable_name]]))</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate percentages</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  percentage_non_missing <span class="ot">&lt;-</span> (non_missing_count <span class="sc">/</span> total_observations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  percentage_missing <span class="ot">&lt;-</span> (missing_count <span class="sc">/</span> total_observations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subtitle text</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>  subtitle_text <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Non-missing: "</span>, non_missing_count, <span class="fu">sprintf</span>(<span class="st">" (%.2f%%)"</span>, percentage_non_missing),</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>                         <span class="st">", Missing: "</span>, missing_count, <span class="fu">sprintf</span>(<span class="st">" (%.2f%%)"</span>, percentage_missing))</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Determine if the variable is categorical or continuous</span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(force_categorical <span class="sc">||</span> <span class="fu">is.factor</span>(dataset[[variable_name]]) <span class="sc">||</span> <span class="fu">is.character</span>(dataset[[variable_name]])) {</span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Categorical variable</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a summary data frame</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>    clean_dataset[[variable_name]] <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(clean_dataset[[variable_name]])</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>    summary_df <span class="ot">&lt;-</span> clean_dataset <span class="sc">%&gt;%</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(<span class="sc">!!</span><span class="fu">sym</span>(variable_name)) <span class="sc">%&gt;%</span></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">Count =</span> <span class="fu">n</span>(), <span class="at">Percentage =</span> (Count <span class="sc">/</span> non_missing_count) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>    plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(summary_df, <span class="fu">aes_string</span>(<span class="at">x =</span> variable_name, <span class="at">y =</span> <span class="st">'Count'</span>, <span class="at">fill =</span> variable_name)) <span class="sc">+</span></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">'identity'</span>, <span class="at">color=</span><span class="st">'black'</span>) <span class="sc">+</span></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">sprintf</span>(<span class="st">"%.1f%%"</span>, Percentage)), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>) </span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>    stats_text <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Min: "</span>, <span class="fu">round</span>(<span class="fu">min</span>(clean_dataset[[variable_name]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>),<span class="dv">2</span>),</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"</span><span class="sc">\n</span><span class="st">1st Qu: "</span>, <span class="fu">round</span>(<span class="fu">quantile</span>(clean_dataset[[variable_name]], <span class="at">probs=</span><span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"</span><span class="sc">\n</span><span class="st">Median: "</span>, <span class="fu">round</span>(<span class="fu">median</span>(clean_dataset[[variable_name]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"</span><span class="sc">\n</span><span class="st">2nd Qu: "</span>, <span class="fu">round</span>(<span class="fu">quantile</span>(clean_dataset[[variable_name]], <span class="at">probs=</span><span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>),</span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"</span><span class="sc">\n</span><span class="st">Max: "</span>, <span class="fu">round</span>(<span class="fu">max</span>(clean_dataset[[variable_name]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">2</span>))</span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Continuous variable</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>    plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(clean_dataset, <span class="fu">aes_string</span>(<span class="at">x =</span> variable_name)) <span class="sc">+</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">color=</span><span class="st">'darkred'</span>, <span class="at">fill=</span><span class="st">'tomato'</span>, <span class="at">binwidth =</span> binwidth) <span class="sc">+</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"label"</span>, <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> <span class="cn">Inf</span>, <span class="at">label =</span> stats_text, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>,</span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">fill =</span> <span class="st">"white"</span>)</span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add labels, subtitle, and annotations</span></span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a>  plot <span class="sc">+</span> </span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">'Distribution of'</span>, <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.null</span>(title), title, variable_name)), <span class="at">subtitle =</span> subtitle_text, <span class="at">x =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.null</span>(x_label), x_label, variable_name), <span class="at">y =</span> <span class="st">'Count'</span>) <span class="sc">+</span></span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>) </span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a>   <span class="co"># geom_textbox(width = unit(0.4, "npc"), x = Inf, y = Inf, hjust = 1, vjust = 1, label = stats_text) #</span></span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(survival_data, <span class="st">"fupca_start_age"</span>, <span class="at">binwidth=</span><span class="dv">1</span>, <span class="at">title=</span><span class="st">"ages at follow-up start"</span>, <span class="at">x_label=</span><span class="st">"Years"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `aes_string()` was deprecated in ggplot2 3.0.0.
ℹ Please use tidy evaluation idioms with `aes()`.
ℹ See also `vignette("ggplot2-in-packages")` for more information.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(survival_data, <span class="st">"c_age"</span>, <span class="at">binwidth=</span><span class="dv">1</span>, <span class="at">title=</span><span class="st">"ages at censoring"</span>, <span class="at">x_label=</span><span class="st">"Years"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(survival_data, <span class="st">"fup_years"</span>, <span class="at">binwidth=</span><span class="dv">1</span>, <span class="at">title=</span><span class="st">"years of follow-up time"</span>, <span class="at">x_label=</span><span class="st">"Years"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Total incidence rate</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(survival_data<span class="sc">$</span>event, <span class="at">useNA=</span><span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     0      1   &lt;NA&gt; 
101061   3633      0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>survival_data<span class="sc">$</span>time_in_study <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(survival_data<span class="sc">$</span>fupca_start_F, survival_data<span class="sc">$</span>fupca_end_F)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>cumulative_pyrs_in_study <span class="ot">&lt;-</span> <span class="fu">sum</span>(survival_data<span class="sc">$</span>time_in_study)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>incidence_rate_100k_pyrs <span class="ot">&lt;-</span> (<span class="fu">sum</span>(survival_data<span class="sc">$</span>event)<span class="sc">/</span>cumulative_pyrs_in_study)<span class="sc">*</span><span class="dv">100000</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'There is a total of '</span>, <span class="fu">round</span>(cumulative_pyrs_in_study, <span class="dv">2</span>), <span class="st">' person-years in this subcohort.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There is a total of 1259718.11 person-years in this subcohort."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'The overall incidence rate is '</span>, <span class="fu">round</span>(incidence_rate_100k_pyrs, <span class="dv">2</span>), <span class="st">' / 100k person-years.'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The overall incidence rate is 288.4 / 100k person-years."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Incidence rate per age bracket</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="dv">35</span>, <span class="dv">40</span>, <span class="dv">45</span>, <span class="dv">50</span>, <span class="dv">55</span>, <span class="dv">60</span>, <span class="dv">65</span>, <span class="dv">70</span>, <span class="dv">75</span>, <span class="dv">80</span>, <span class="dv">85</span>, <span class="dv">90</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Under 1"</span>, <span class="st">"1-4"</span>, <span class="st">"5-9"</span>, <span class="st">"10-14"</span>, <span class="st">"15-19"</span>, <span class="st">"20-24"</span>, <span class="st">"25-29"</span>, <span class="st">"30-34"</span>, <span class="st">"35-39"</span>, <span class="st">"40-44"</span>, </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"45-49"</span>, <span class="st">"50-54"</span>, <span class="st">"55-59"</span>, <span class="st">"60-64"</span>, <span class="st">"65-69"</span>, <span class="st">"70-74"</span>, <span class="st">"75-79"</span>, <span class="st">"80-84"</span>, <span class="st">"85-89"</span>, <span class="st">"90 and over"</span>)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Using survSplit to split by age bracket</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>survival_data<span class="sc">$</span>fupca_end_age <span class="ot">&lt;-</span> survival_data<span class="sc">$</span>fupca_start_age <span class="sc">+</span> survival_data<span class="sc">$</span>time_in_study</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> <span class="fu">survSplit</span>(<span class="fu">Surv</span>(<span class="at">time =</span> fupca_start_age, <span class="at">time2 =</span> fupca_end_age, <span class="at">event =</span> event) <span class="sc">~</span> .,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data =</span> survival_data,</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cut =</span> breaks,</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">start =</span> <span class="st">"age_start"</span>,</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">end =</span> <span class="st">"age_stop"</span>,</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">event =</span> <span class="st">"event"</span>,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>                        <span class="at">episode =</span> <span class="st">"age_bracket"</span>)</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Correcting the time of event (matching to the appropriate age bracket)</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>event_age <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(split_data<span class="sc">$</span>ADOB_F, split_data<span class="sc">$</span>earliest_event_date)</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>event <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(split_data<span class="sc">$</span>event_age) <span class="sc">&amp;</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>                                split_data<span class="sc">$</span>event_age <span class="sc">&gt;=</span> split_data<span class="sc">$</span>age_start <span class="sc">&amp;</span> split_data<span class="sc">$</span>event_age <span class="sc">&lt;=</span> split_data<span class="sc">$</span>age_stop, <span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>present_labels <span class="ot">&lt;-</span> labels[<span class="fu">unique</span>(split_data<span class="sc">$</span>age_bracket)[<span class="fu">order</span>(<span class="fu">unique</span>(split_data<span class="sc">$</span>age_bracket))]]</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>age_bracket <span class="ot">&lt;-</span> <span class="fu">factor</span>(split_data<span class="sc">$</span>age_bracket, <span class="at">labels =</span> present_labels)</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>summary_data <span class="ot">&lt;-</span> split_data <span class="sc">%&gt;%</span> </span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(age_bracket) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(age_bracket) <span class="sc">%&gt;%</span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">events =</span> <span class="fu">sum</span>(event),</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>            <span class="at">person_years =</span> <span class="fu">sum</span>(age_stop <span class="sc">-</span> age_start)) <span class="sc">%&gt;%</span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">incidence_rate_per_100k =</span> (events <span class="sc">/</span> person_years) <span class="sc">*</span> <span class="dv">100000</span>)</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(summary_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16 × 4
   age_bracket events person_years incidence_rate_per_100k
   &lt;fct&gt;        &lt;dbl&gt;        &lt;dbl&gt;                   &lt;dbl&gt;
 1 15-19            0        1504.                    0   
 2 20-24            1       16018.                    6.24
 3 25-29            9       44164.                   20.4 
 4 30-34           41       80354.                   51.0 
 5 35-39          119      112140.                  106.  
 6 40-44          236      132892.                  178.  
 7 45-49          419      143792.                  291.  
 8 50-54          527      149022.                  354.  
 9 55-59          512      154264.                  332.  
10 60-64          640      156243.                  410.  
11 65-69          606      131386.                  461.  
12 70-74          362       81448.                  444.  
13 75-79          159       37295.                  426.  
14 80-84           56       14077.                  398.  
15 85-89           25        4182.                  598.  
16 90 and over      6         937.                  640.  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print(table(split_data$event, split_data$age_bracket))</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Incidence rate</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> age_bracket, <span class="at">y =</span> incidence_rate_per_100k)) <span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"royalblue"</span>) <span class="sc">+</span>  </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Incidence Rate by Age Group"</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age Group"</span>,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Incidence Rate per 100,000"</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Person-years</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> age_bracket, <span class="at">y =</span> person_years)) <span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"darkgreen"</span>, <span class="at">color=</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Person-years Contributed by Age Group"</span>,</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age Group"</span>,</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Person-years"</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-5.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Incidence rate per time since study start (calendar time)</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>first_fupca_start <span class="ot">&lt;-</span> <span class="fu">min</span>(survival_data<span class="sc">$</span>fupca_start_F)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>survival_data<span class="sc">$</span>fupca_start_since_study_start <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(first_fupca_start, survival_data<span class="sc">$</span>fupca_start_F)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>survival_data<span class="sc">$</span>fupca_end_since_study_start <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(first_fupca_start, survival_data<span class="sc">$</span>fupca_end_F)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>study_duration <span class="ot">&lt;-</span> <span class="fu">max</span>(survival_data<span class="sc">$</span>fupca_end_since_study_start) <span class="sc">-</span> <span class="fu">min</span>(survival_data<span class="sc">$</span>fupca_start_since_study_start)</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">ceiling</span>(study_duration))</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">paste</span>(breaks[<span class="sc">-</span><span class="fu">length</span>(breaks)], breaks[<span class="sc">-</span><span class="dv">1</span>], <span class="at">sep =</span> <span class="st">"-"</span>)</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Using survSplit again to split by time since study start (first person's entry)</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> <span class="fu">survSplit</span>(<span class="fu">Surv</span>(<span class="at">time =</span> fupca_start_since_study_start, <span class="at">time2 =</span> fupca_end_since_study_start, <span class="at">event =</span> event) <span class="sc">~</span> .,</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data =</span> survival_data,</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cut =</span> breaks,</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>                        <span class="at">start =</span> <span class="st">"years_since_start_start"</span>,</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>                        <span class="at">end =</span> <span class="st">"years_since_start_end"</span>,</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>                        <span class="at">event =</span> <span class="st">"event"</span>,</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>                        <span class="at">episode =</span> <span class="st">"study_duration_bracket"</span>) </span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Correcting the time of event (matching to the appropriate age bracket)</span></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>event_time_since_study_start <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(first_fupca_start, split_data<span class="sc">$</span>earliest_event_date)</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>event <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(split_data<span class="sc">$</span>event_time_since_study_start) <span class="sc">&amp;</span></span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>                                split_data<span class="sc">$</span>event_time_since_study_start <span class="sc">&gt;=</span> split_data<span class="sc">$</span>years_since_start_start <span class="sc">&amp;</span> split_data<span class="sc">$</span>event_time_since_study_start <span class="sc">&lt;=</span> split_data<span class="sc">$</span>years_since_start_end, <span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>study_duration_bracket <span class="ot">&lt;-</span> <span class="fu">factor</span>(split_data<span class="sc">$</span>study_duration_bracket, <span class="at">labels=</span>labels)</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a><span class="co"># For calculating average age in each bracket</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>age_at_bracket_start <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(first_fupca_start, split_data<span class="sc">$</span>fupca_start_F) <span class="sc">+</span> split_data<span class="sc">$</span>years_since_start_start <span class="sc">+</span> split_data<span class="sc">$</span>fupca_start_age</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>age_at_bracket_end <span class="ot">&lt;-</span> <span class="fu">year_diff</span>(first_fupca_start, split_data<span class="sc">$</span>fupca_start_F) <span class="sc">+</span> split_data<span class="sc">$</span>years_since_start_end <span class="sc">+</span> split_data<span class="sc">$</span>fupca_start_age</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>split_data<span class="sc">$</span>midpoint_age <span class="ot">&lt;-</span> (split_data<span class="sc">$</span>age_at_bracket_start <span class="sc">+</span> split_data<span class="sc">$</span>age_at_bracket_end) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>summary_data <span class="ot">&lt;-</span> split_data <span class="sc">%&gt;%</span> </span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(study_duration_bracket) <span class="sc">%&gt;%</span> </span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(study_duration_bracket) <span class="sc">%&gt;%</span></span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">events =</span> <span class="fu">sum</span>(event),</span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">person_years =</span> <span class="fu">sum</span>(years_since_start_end <span class="sc">-</span> years_since_start_start),</span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_age =</span> (<span class="fu">sum</span>(midpoint_age <span class="sc">*</span> (years_since_start_end <span class="sc">-</span> years_since_start_start))) <span class="sc">/</span> person_years,</span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">'drop'</span></span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">incidence_rate_per_100k =</span> (events <span class="sc">/</span> person_years) <span class="sc">*</span> <span class="dv">100000</span>)</span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate cumulative person-years</span></span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a>summary_data <span class="ot">&lt;-</span> summary_data <span class="sc">%&gt;%</span></span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cumulative_person_years =</span> <span class="fu">cumsum</span>(person_years))</span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(summary_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 6
   study_duration_bracket events person_years avg_age incidence_rate_per_100k
   &lt;fct&gt;                   &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;                   &lt;dbl&gt;
 1 0-1                         0         29.2    51.7                      0 
 2 1-2                         1        646.     50.1                    155.
 3 2-3                        14       5503.     49.9                    254.
 4 3-4                        53      16415.     52.0                    323.
 5 4-5                        83      31807.     54.1                    261.
 6 5-6                       128      50069.     55.9                    256.
 7 6-7                       158      69420.     57.6                    228.
 8 7-8                       201      84995.     59.3                    236.
 9 8-9                       269      94654.     60.7                    284.
10 9-10                      278      99711.     61.9                    279.
# ℹ 14 more rows
# ℹ 1 more variable: cumulative_person_years &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incidence rate</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> study_duration_bracket, <span class="at">y =</span> incidence_rate_per_100k)) <span class="sc">+</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"royalblue"</span>) <span class="sc">+</span>  </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Incidence Rate Over Time Since Study Start"</span>,</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Years since study start (subcohort)"</span>,</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Incidence Rate per 100,000"</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-6.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Average age</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> study_duration_bracket, <span class="at">y =</span> avg_age)) <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"tomato"</span>) <span class="sc">+</span>  <span class="co"># Ensure points are connected by a line</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkred"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># Rotate x-axis labels</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Average Age Over Time Since Study Start"</span>,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Years since study start (subcohort)"</span>,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Age"</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-7.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cumulative person-years</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> study_duration_bracket, <span class="at">y =</span> cumulative_person_years)) <span class="sc">+</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"forestgreen"</span>) <span class="sc">+</span>  <span class="co"># Ensure points are connected by a line</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"darkgreen"</span>, <span class="at">color=</span><span class="st">"black"</span>,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">aes</span>(<span class="at">x =</span> study_duration_bracket, <span class="at">y =</span> person_years)) <span class="sc">+</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># Rotate x-axis labels</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Cumulative Person-Years Over Time Since Study Start"</span>,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Years since study start (subcohort)"</span>,</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative Person-Years"</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-13-8.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: ? </span><span class="al">TODO</span><span class="co">: Implement reason for censoring/end of follow-up </span><span class="al">TODO</span><span class="co">: Implement breast cancer morphology labeling (ductal, mucinous, etc.)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualisation-risk-factors" class="level2">
<h2 class="anchored" data-anchor-id="visualisation-risk-factors">Visualisation: Risk factors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">5</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of age at entry</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'AgeatEntry'</span>, <span class="at">title=</span><span class="st">"Age at Entry"</span>, <span class="at">x_label =</span> <span class="st">"Age"</span>,<span class="at">binwidth=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of Ethnicity ('ethnew5')</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># table_data &lt;- table(dataset_rf$ethnew5)</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># bp &lt;- barplot(table_data, main="Distribution of Ethnicity ('ethnew5')", xlab='Ethnicity', ylab='Frequency', col='tomato', ylim=c(0, max(table_data)*1.2))</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># text(x=bp, y=table_data, labels=paste0(round(table_data/sum(table_data)*100,2), '%'), pos=3, col='black')</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of FHx of Breast ca</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'fambrca'</span>, <span class="at">title=</span><span class="st">"FHx of Breast Cancer"</span>, <span class="at">x_label =</span> <span class="st">"Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of hx of benign breast disease ('brbendis')</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'brbendis'</span>, <span class="at">title=</span><span class="st">"PMHx of Benign Breast Disease"</span>, <span class="at">x_label =</span> <span class="st">"Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of SES ('ses')</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'ses'</span>, <span class="at">title=</span><span class="st">"Socioeconomic status"</span>, <span class="at">x_label =</span> <span class="st">"SES"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of Height at 20 ('bodysizeht20')</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'bodysizeht20'</span>, <span class="at">binwidth=</span><span class="dv">2</span>, <span class="at">title=</span><span class="st">"Height at 20 yrs"</span>, <span class="at">x_label =</span> <span class="st">"Height"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-5.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of BMI at 20 ('bodysizebmi20')</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'bodysizebmi20'</span>, <span class="at">binwidth=</span><span class="dv">2</span>, <span class="at">title=</span><span class="st">"BMI at 20 yrs"</span>, <span class="at">x_label =</span> <span class="st">"BMI"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-6.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of BMI at recruitment ('bodysizebminow')</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'bodysizebminow'</span>, <span class="at">binwidth=</span><span class="dv">2</span>, <span class="at">title=</span><span class="st">"BMI at Recruitment"</span>, <span class="at">x_label =</span> <span class="st">"BMI"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-7.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Age at menarche ('menarcheage')</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'menarcheage'</span>, <span class="at">binwidth=</span><span class="dv">2</span>, <span class="at">title=</span><span class="st">"Age at Menarche"</span>, <span class="at">x_label =</span> <span class="st">"Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-8.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Age at 1st pregnancy ('age_at_pregdate_1_f')</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'age_at_pregdate_1_f'</span>, <span class="at">binwidth=</span><span class="dv">2</span>, <span class="at">title=</span><span class="st">"Age at First Pregnancy"</span>, <span class="at">x_label =</span> <span class="st">"Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-9.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Breastfeeding duration (at recruitment) ('bf_at_recruitment')</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'bf_at_recruitment'</span>, <span class="at">binwidth=</span><span class="dv">4</span>, <span class="at">title=</span><span class="st">"Breastfeeding Duration at Recruitment"</span>, <span class="at">x_label =</span> <span class="st">"Weeks"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-10.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Breastfeeding duration (total) ('bf_*')</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bf_cols &lt;- colnames(dataset_rf)[grepl('^bf_\\d', colnames(dataset_rf))]</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co"># bf_dataset &lt;- dataset_rf[bf_cols]</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># individuals_missing &lt;- sum(apply(bf_dataset, 1, function(x) all(is.na(x))))</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="co"># percentage_missing &lt;- (individuals_missing / nrow(bf_dataset)) * 100</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="co"># subtitle_text &lt;- paste0("Any non-missing: ", nrow(bf_dataset)-individuals_missing, sprintf(" (%.2f%%)", (100 - percentage_missing)), ", All missing: ", individuals_missing, sprintf(" (%.2f%%)", percentage_missing))</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co"># bf_dataset %&gt;%</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   pivot_longer(cols = everything(), values_to = "Duration") %&gt;%</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   drop_na(Duration) %&gt;%</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(x = Duration)) +</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_histogram(binwidth = 4, color='darkred', fill='tomato') +</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = 'Distribution of Breastfeeding Duration (across all)', </span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="co">#        subtitle = subtitle_text,</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="co">#        x = 'Duration (in weeks)', </span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a><span class="co">#        y = 'Count')</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of parity status ('pregparous')</span></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'pregparous'</span>, <span class="at">title=</span><span class="st">"Parity Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-11.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of parity count ('pregparitycnt')</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'pregparitycnt'</span>, <span class="at">force_categorical=</span><span class="cn">TRUE</span>, <span class="at">title=</span><span class="st">"Parity Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-12.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Age at menopause (reported; 'meno_age')</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'meno_age'</span>, <span class="at">binwidth=</span><span class="dv">2</span>, <span class="at">title=</span><span class="st">"Age at Menopause (reported)"</span>, <span class="at">x_label =</span> <span class="st">"Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-13.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Age at menopause (estimated; 'meno_age_est')</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'meno_age_est'</span>, <span class="at">binwidth=</span><span class="dv">2</span>, <span class="at">title=</span><span class="st">"Age at Menopause (estimated)"</span>, <span class="at">x_label =</span> <span class="st">"Age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-14.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Menopausal status at R1, R2, R3, and R4</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>meno_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'R1menopause'</span>, <span class="st">'R2menopause'</span>, <span class="st">'R3menopause'</span>, <span class="st">'R4menopause'</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>dataset_rf <span class="sc">%&gt;%</span> <span class="fu">select</span>(meno_cols) <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"R"</span>, <span class="at">values_to =</span> <span class="st">"MenopauseStatus"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> R, <span class="at">fill =</span> MenopauseStatus)) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Menopausal Status by Questionnaire Round"</span>, <span class="at">x =</span> <span class="st">"Round"</span>, <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using an external vector in selections was deprecated in tidyselect 1.1.0.
ℹ Please use `all_of()` or `any_of()` instead.
  # Was:
  data %&gt;% select(meno_cols)

  # Now:
  data %&gt;% select(all_of(meno_cols))

See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-15.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of HRT status ('hrtstatus')</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'hrtstatus'</span>, <span class="at">title=</span><span class="st">"HRT Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-16.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of oral contraceptive status ('ocstatus')</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'ocstatus'</span>, <span class="at">title=</span><span class="st">"Oral Contraceptive Status"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-17.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Physical activity ('PhysMetTotal')</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'PhysMetTotal'</span>, <span class="at">binwidth=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-18.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of Smoking status @ recrutiment ('R1smokingstatus')</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'R1smokingstatus'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-19.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of Alcohol status ('R1alcoholstatus')</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'R1alcoholstatus'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-20.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Distribution of Alcohol units ('R1alcoholunits')</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_distribution_with_missing_ggplot</span>(dataset_rf, <span class="st">'R1alcoholunits'</span>, <span class="at">binwidth=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-14-21.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="analysis" class="level1">
<h1>Analysis</h1>
<section id="setup-1" class="level2">
<h2 class="anchored" data-anchor-id="setup-1">Setup</h2>
<p>To work with a cleaner dataframe, we’ll first merge the risk factor and survival data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only selecting risk factor variables needed for analysis (not necessary, but just for reducing clutter later on)</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>dataset_rf_subset <span class="ot">&lt;-</span> dataset_rf[, <span class="fu">c</span>(<span class="st">'TCode'</span>,</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1alcoholstatus'</span>,</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1alcoholunits'</span>,</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R2alcoholstatus'</span>,</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R2alcoholunits'</span>,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R4alcoholstatus'</span>,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R4alcoholunits'</span>,</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1smokingstatus'</span>,</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R2smokingstatus'</span>,</span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R4smokingstatus'</span>,</span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">'brbendis'</span>,</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bminowgrp'</span>,</span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizebminow'</span>,</span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizebmi20'</span>,</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizeht20'</span>,</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">'fambrca'</span>,</span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">'hrtstatus'</span>,</span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTtype1_1'</span>,</span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTtype1_2'</span>,</span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTtype1_3'</span>,</span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTtype1_4'</span>,</span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTstartage_1'</span>,</span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTstartage_2'</span>,</span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTstartage_3'</span>,</span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTstartage_4'</span>,</span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTendage_1'</span>,</span>
<span id="cb78-28"><a href="#cb78-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTendage_2'</span>,</span>
<span id="cb78-29"><a href="#cb78-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTendage_3'</span>,</span>
<span id="cb78-30"><a href="#cb78-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">'HRTendage_4'</span>,</span>
<span id="cb78-31"><a href="#cb78-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">'menarchegrp'</span>,</span>
<span id="cb78-32"><a href="#cb78-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">'menarcheage'</span>,</span>
<span id="cb78-33"><a href="#cb78-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">'ocstatus'</span>,</span>
<span id="cb78-34"><a href="#cb78-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">'PhysMetTotalLog2'</span>,</span>
<span id="cb78-35"><a href="#cb78-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1smokingstatus'</span>,</span>
<span id="cb78-36"><a href="#cb78-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1smokingcategory'</span>,</span>
<span id="cb78-37"><a href="#cb78-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">'pregparous'</span>,</span>
<span id="cb78-38"><a href="#cb78-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">'pregparitycnt'</span>,</span>
<span id="cb78-39"><a href="#cb78-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bf_total'</span>,</span>
<span id="cb78-40"><a href="#cb78-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bf_at_recruitment'</span>,</span>
<span id="cb78-41"><a href="#cb78-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">'age_at_pregdate_1_f'</span>,</span>
<span id="cb78-42"><a href="#cb78-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1menopause'</span>,</span>
<span id="cb78-43"><a href="#cb78-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">'meno_age_est'</span>,</span>
<span id="cb78-44"><a href="#cb78-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">'ses'</span>,</span>
<span id="cb78-45"><a href="#cb78-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">'age_at_QR2_date_f'</span>,</span>
<span id="cb78-46"><a href="#cb78-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">'age_at_QR4_date_f'</span>,</span>
<span id="cb78-47"><a href="#cb78-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R2bodysizebmi'</span>,</span>
<span id="cb78-48"><a href="#cb78-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R4bodysizebmi'</span>,</span>
<span id="cb78-49"><a href="#cb78-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">'birthweight'</span></span>
<span id="cb78-50"><a href="#cb78-50" aria-hidden="true" tabindex="-1"></a>)]</span>
<span id="cb78-51"><a href="#cb78-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-52"><a href="#cb78-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging this to survival data</span></span>
<span id="cb78-53"><a href="#cb78-53" aria-hidden="true" tabindex="-1"></a>dataset_surv_rf <span class="ot">&lt;-</span> survival_data[,<span class="fu">c</span>(<span class="st">'TCode'</span>, <span class="st">'event'</span>, <span class="st">'fupca_start_age'</span>, <span class="st">'c_age'</span>)] <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(dataset_rf_subset, <span class="at">by =</span> <span class="st">'TCode'</span>)</span>
<span id="cb78-54"><a href="#cb78-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-55"><a href="#cb78-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the single person with a censored date == follow-up start date:</span></span>
<span id="cb78-56"><a href="#cb78-56" aria-hidden="true" tabindex="-1"></a>dataset_surv_rf <span class="ot">&lt;-</span> dataset_surv_rf[dataset_surv_rf<span class="sc">$</span>fupca_start_age<span class="sc">!=</span>dataset_surv_rf<span class="sc">$</span>c_age,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Missingness (show missingness, optionally perform a complete-case analysis)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fraction missing per column</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">colSums</span>(<span class="fu">is.na</span>(dataset_surv_rf))<span class="sc">/</span><span class="fu">nrow</span>(dataset_surv_rf),<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              TCode               event     fupca_start_age               c_age 
             0.0000              0.0000              0.0000              0.0000 
    R1alcoholstatus      R1alcoholunits     R2alcoholstatus      R2alcoholunits 
             0.0000              0.0119              0.0354              0.2821 
    R4alcoholstatus      R4alcoholunits     R1smokingstatus     R2smokingstatus 
             0.2795              0.4532              0.0011              0.0363 
    R4smokingstatus            brbendis           bminowgrp      bodysizebminow 
             0.2911              0.0000              0.0298              0.0298 
      bodysizebmi20        bodysizeht20             fambrca           hrtstatus 
             0.1915              0.0153              0.0000              0.0044 
         HRTtype1_1          HRTtype1_2          HRTtype1_3          HRTtype1_4 
             0.6751              0.9678              0.9972              0.9998 
      HRTstartage_1       HRTstartage_2       HRTstartage_3       HRTstartage_4 
             0.6860              0.9678              0.9972              0.9998 
        HRTendage_1         HRTendage_2         HRTendage_3         HRTendage_4 
             0.6784              0.9680              0.9972              0.9998 
        menarchegrp         menarcheage            ocstatus    PhysMetTotalLog2 
             0.1033              0.1030              0.0009              0.0257 
  R1smokingstatus.1   R1smokingcategory          pregparous       pregparitycnt 
             0.0011              0.0195              0.0015              0.0015 
           bf_total   bf_at_recruitment age_at_pregdate_1_f         R1menopause 
             0.0000              0.0532              0.1780              0.0002 
       meno_age_est                 ses   age_at_QR2_date_f   age_at_QR4_date_f 
             0.0002              0.0119              0.0354              0.2788 
      R2bodysizebmi       R4bodysizebmi         birthweight 
             0.1037              0.3112              0.3252 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Complete case analysis</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="co"># cplt_case_mask &lt;- complete.cases(dataset_surv_rf)</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print(paste0((round(sum(!cplt_case_mask)/nrow(dataset_surv_rf), 4))*100, '% of the individuals have at least 1 missing value, and they have all been removed.'))</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dataset_surv_rf &lt;- dataset_surv_rf[complete.cases(dataset_surv_rf),]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualisation-cumulative-incidence" class="level2">
<h2 class="anchored" data-anchor-id="visualisation-cumulative-incidence">Visualisation: Cumulative incidence</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Family history</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit2</span>(<span class="fu">Surv</span>(fupca_start_age, c_age, event) <span class="sc">~</span> fambrca, <span class="at">data =</span> dataset_surv_rf) <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvfit</span>(<span class="at">type =</span> <span class="st">"risk"</span>) <span class="sc">+</span> <span class="fu">add_risktable</span>() <span class="sc">+</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative incidence"</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">add_confidence_interval</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Family history of breast cancer"</span>) <span class="sc">+</span> </span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'royalblue'</span>, <span class="st">'tomato'</span>)) <span class="sc">+</span> </span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'royalblue'</span>, <span class="st">'tomato'</span>)) <span class="sc">+</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">90</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">90</span>, <span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1178 rows containing missing values (`geom_step()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Benign breast disease</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit2</span>(<span class="fu">Surv</span>(fupca_start_age, c_age, event) <span class="sc">~</span> brbendis, <span class="at">data =</span> dataset_surv_rf) <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvfit</span>(<span class="at">type =</span> <span class="st">"risk"</span>) <span class="sc">+</span> <span class="fu">add_risktable</span>() <span class="sc">+</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative incidence"</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">add_confidence_interval</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Benign breast disease"</span>) <span class="sc">+</span> </span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'royalblue'</span>, <span class="st">'tomato'</span>)) <span class="sc">+</span> </span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'royalblue'</span>, <span class="st">'tomato'</span>)) <span class="sc">+</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">90</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">90</span>, <span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1167 rows containing missing values (`geom_step()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ACORN score</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit2</span>(<span class="fu">Surv</span>(fupca_start_age, c_age, event) <span class="sc">~</span> ses, <span class="at">data =</span> dataset_surv_rf) <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvfit</span>(<span class="at">type =</span> <span class="st">"risk"</span>) <span class="sc">+</span> <span class="fu">add_risktable</span>() <span class="sc">+</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative incidence"</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">add_confidence_interval</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"ACORN score"</span>)<span class="sc">+</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">90</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">90</span>, <span class="dv">5</span>))  <span class="sc">+</span> </span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))<span class="co">#+ </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1094 rows containing missing values (`geom_step()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_color_manual(values = c('tomato', 'royalblue')) + </span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_manual(values = c('tomato', 'royalblue'))</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co"># BMI</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit2</span>(<span class="fu">Surv</span>(fupca_start_age, c_age, event) <span class="sc">~</span> bminowgrp, <span class="at">data =</span> dataset_surv_rf) <span class="sc">%&gt;%</span> </span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvfit</span>(<span class="at">type =</span> <span class="st">"risk"</span>) <span class="sc">+</span> <span class="fu">add_risktable</span>() <span class="sc">+</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative incidence"</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">add_confidence_interval</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Body mass index"</span>) <span class="sc">+</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">90</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">90</span>, <span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1169 rows containing missing values (`geom_step()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-17-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parity</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit2</span>(<span class="fu">Surv</span>(fupca_start_age, c_age, event) <span class="sc">~</span> pregparous, <span class="at">data =</span> dataset_surv_rf) <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvfit</span>(<span class="at">type =</span> <span class="st">"risk"</span>) <span class="sc">+</span> <span class="fu">add_risktable</span>() <span class="sc">+</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative incidence"</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">add_confidence_interval</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Parity"</span>) <span class="sc">+</span> </span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'tomato'</span>, <span class="st">'royalblue'</span>)) <span class="sc">+</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">'tomato'</span>, <span class="st">'royalblue'</span>)) <span class="sc">+</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">90</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">90</span>, <span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1158 rows containing missing values (`geom_step()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-17-5.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># # Physical activity</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co"># survfit2(Surv(fupca_start_age, c_age, event) ~ physmettotalgrp, data = dataset_surv_rf) %&gt;% </span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggsurvfit(type = "risk") + add_risktable() +</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     x = "Age",</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="co">#     y = "Cumulative incidence"</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   ) + add_confidence_interval() + ggtitle("Physical activity (METs)") +</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(limits = c(30, 90), breaks = seq(30, 90, 5))</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Alcohol status</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit2</span>(<span class="fu">Surv</span>(fupca_start_age, c_age, event) <span class="sc">~</span> R1alcoholstatus, <span class="at">data =</span> dataset_surv_rf) <span class="sc">%&gt;%</span> </span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvfit</span>(<span class="at">type =</span> <span class="st">"risk"</span>) <span class="sc">+</span> <span class="fu">add_risktable</span>() <span class="sc">+</span></span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative incidence"</span></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">add_confidence_interval</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Alcohol status"</span>) <span class="sc">+</span></span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">90</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">90</span>, <span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1237 rows containing missing values (`geom_step()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-17-6.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Smoking status</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">survfit2</span>(<span class="fu">Surv</span>(fupca_start_age, c_age, event) <span class="sc">~</span> R1smokingstatus, <span class="at">data =</span> dataset_surv_rf) <span class="sc">%&gt;%</span> </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvfit</span>(<span class="at">type =</span> <span class="st">"risk"</span>) <span class="sc">+</span> <span class="fu">add_risktable</span>() <span class="sc">+</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative incidence"</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">add_confidence_interval</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Smoking status"</span>) <span class="sc">+</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">90</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">30</span>, <span class="dv">90</span>, <span class="dv">5</span>)) <span class="sc">+</span> </span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1191 rows containing missing values (`geom_step()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="generations_files/figure-html/unnamed-chunk-17-7.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Configuration</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Configuration for setting up the analysis</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Name of the element: Variable to analyse ("base variable")</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 'realname': Real-world identifier for variable</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 'missing_group': Values to place into missing category</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 'trends': Continuous/ordinal variables to model an interaction with</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co"># # 'on': The interacting variable</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="co"># # 'per': Scaling of the interacting variable (e.g., per 10 units of alcohol)</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="co"># # 'reference_level': Where to set the 'intercept'</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="co"># # 'by_missing_group': Values of the interacting variable to consider missing</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: I need to change this code so that 'trends' allows interactions with not only continuous/ordinal, but also unordered categorical variables - the plan is to change the wording of 'trends' to 'interactions', and allow two types (either continuous/ordinal and unordered categorical). This will be necessary to fully replicate Michael's results re: HRT (as the categorical HRT use is only considered in menopausal women (ie., an interaction with an indicator variable))</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">: Allow for multivariable analysis (ie., controlling for all other variables)</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>analysis_config <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Family history</span></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">'fambrca'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Family history of breast cancer'</span>,</span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>),</span>
<span id="cb96-21"><a href="#cb96-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-22"><a href="#cb96-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Family history of breast cancer'</span> <span class="ot">=</span></span>
<span id="cb96-23"><a href="#cb96-23" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-24"><a href="#cb96-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">"nominal"</span>,</span>
<span id="cb96-25"><a href="#cb96-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'fambrca'</span>,</span>
<span id="cb96-26"><a href="#cb96-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="st">"Absent"</span>,</span>
<span id="cb96-27"><a href="#cb96-27" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-28"><a href="#cb96-28" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-29"><a href="#cb96-29" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb96-30"><a href="#cb96-30" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-31"><a href="#cb96-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-32"><a href="#cb96-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-33"><a href="#cb96-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # Family history</span></span>
<span id="cb96-34"><a href="#cb96-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'fambrca' = list(</span></span>
<span id="cb96-35"><a href="#cb96-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'Family history of breast cancer',</span></span>
<span id="cb96-36"><a href="#cb96-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   missing_group = c(NA)</span></span>
<span id="cb96-37"><a href="#cb96-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb96-38"><a href="#cb96-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-39"><a href="#cb96-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-40"><a href="#cb96-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # Benign breast disease</span></span>
<span id="cb96-41"><a href="#cb96-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'brbendis' = list(</span></span>
<span id="cb96-42"><a href="#cb96-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'History of benign breast disease',</span></span>
<span id="cb96-43"><a href="#cb96-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   missing_group = c(NA)</span></span>
<span id="cb96-44"><a href="#cb96-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb96-45"><a href="#cb96-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-46"><a href="#cb96-46" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-47"><a href="#cb96-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Benign breast disease</span></span>
<span id="cb96-48"><a href="#cb96-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">'brbendis'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-49"><a href="#cb96-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'History of benign breast disease'</span>,</span>
<span id="cb96-50"><a href="#cb96-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>),</span>
<span id="cb96-51"><a href="#cb96-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-52"><a href="#cb96-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'History of benign breast disease'</span> <span class="ot">=</span></span>
<span id="cb96-53"><a href="#cb96-53" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-54"><a href="#cb96-54" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">"nominal"</span>,</span>
<span id="cb96-55"><a href="#cb96-55" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'brbendis'</span>,</span>
<span id="cb96-56"><a href="#cb96-56" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="st">"No"</span>,</span>
<span id="cb96-57"><a href="#cb96-57" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-58"><a href="#cb96-58" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-59"><a href="#cb96-59" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb96-60"><a href="#cb96-60" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-61"><a href="#cb96-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-62"><a href="#cb96-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-63"><a href="#cb96-63" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-64"><a href="#cb96-64" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ACORN score</span></span>
<span id="cb96-65"><a href="#cb96-65" aria-hidden="true" tabindex="-1"></a>  <span class="st">'ses'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-66"><a href="#cb96-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'ACORN score'</span>,</span>
<span id="cb96-67"><a href="#cb96-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-68"><a href="#cb96-68" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'ACORN score'</span> <span class="ot">=</span></span>
<span id="cb96-69"><a href="#cb96-69" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-70"><a href="#cb96-70" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-71"><a href="#cb96-71" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'ses'</span>,</span>
<span id="cb96-72"><a href="#cb96-72" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">1</span>,</span>
<span id="cb96-73"><a href="#cb96-73" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="st">'Wealthy achievers'</span>,</span>
<span id="cb96-74"><a href="#cb96-74" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="st">'Region not covered'</span>, <span class="st">'Unclassified'</span>, <span class="cn">NA</span>)</span>
<span id="cb96-75"><a href="#cb96-75" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-76"><a href="#cb96-76" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb96-77"><a href="#cb96-77" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-78"><a href="#cb96-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-79"><a href="#cb96-79" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-80"><a href="#cb96-80" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-81"><a href="#cb96-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Birthweight</span></span>
<span id="cb96-82"><a href="#cb96-82" aria-hidden="true" tabindex="-1"></a>  <span class="st">'birthweight'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-83"><a href="#cb96-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Birthweight'</span>,</span>
<span id="cb96-84"><a href="#cb96-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-85"><a href="#cb96-85" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Birthweight'</span> <span class="ot">=</span></span>
<span id="cb96-86"><a href="#cb96-86" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-87"><a href="#cb96-87" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-88"><a href="#cb96-88" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'birthweight'</span>,</span>
<span id="cb96-89"><a href="#cb96-89" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">1000</span>,</span>
<span id="cb96-90"><a href="#cb96-90" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">3500</span>,</span>
<span id="cb96-91"><a href="#cb96-91" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-92"><a href="#cb96-92" aria-hidden="true" tabindex="-1"></a>             ))</span>
<span id="cb96-93"><a href="#cb96-93" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-94"><a href="#cb96-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-95"><a href="#cb96-95" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-96"><a href="#cb96-96" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Height at 20</span></span>
<span id="cb96-97"><a href="#cb96-97" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizeht20'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-98"><a href="#cb96-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Height at age 20'</span>,</span>
<span id="cb96-99"><a href="#cb96-99" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-100"><a href="#cb96-100" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Trend by cm height increase'</span> <span class="ot">=</span></span>
<span id="cb96-101"><a href="#cb96-101" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-102"><a href="#cb96-102" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-103"><a href="#cb96-103" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'bodysizeht20'</span>,</span>
<span id="cb96-104"><a href="#cb96-104" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">10</span>,</span>
<span id="cb96-105"><a href="#cb96-105" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">165</span>,</span>
<span id="cb96-106"><a href="#cb96-106" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-107"><a href="#cb96-107" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-108"><a href="#cb96-108" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb96-109"><a href="#cb96-109" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-110"><a href="#cb96-110" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-111"><a href="#cb96-111" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-112"><a href="#cb96-112" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Age at menarche</span></span>
<span id="cb96-113"><a href="#cb96-113" aria-hidden="true" tabindex="-1"></a>  <span class="st">'menarcheage'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-114"><a href="#cb96-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Age at menarche'</span>,</span>
<span id="cb96-115"><a href="#cb96-115" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-116"><a href="#cb96-116" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Trend by age (per year)'</span> <span class="ot">=</span></span>
<span id="cb96-117"><a href="#cb96-117" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-118"><a href="#cb96-118" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-119"><a href="#cb96-119" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'menarcheage'</span>,</span>
<span id="cb96-120"><a href="#cb96-120" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">1</span>,</span>
<span id="cb96-121"><a href="#cb96-121" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">13</span>,</span>
<span id="cb96-122"><a href="#cb96-122" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-123"><a href="#cb96-123" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-124"><a href="#cb96-124" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb96-125"><a href="#cb96-125" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-126"><a href="#cb96-126" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-127"><a href="#cb96-127" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-128"><a href="#cb96-128" aria-hidden="true" tabindex="-1"></a>  <span class="co"># BMI at 20</span></span>
<span id="cb96-129"><a href="#cb96-129" aria-hidden="true" tabindex="-1"></a>  <span class="st">'bodysizebmi20'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-130"><a href="#cb96-130" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'BMI at age 20'</span>,</span>
<span id="cb96-131"><a href="#cb96-131" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-132"><a href="#cb96-132" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Trend by unit BMI increase'</span> <span class="ot">=</span></span>
<span id="cb96-133"><a href="#cb96-133" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-134"><a href="#cb96-134" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-135"><a href="#cb96-135" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'bodysizebmi20'</span>,</span>
<span id="cb96-136"><a href="#cb96-136" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">1</span>,</span>
<span id="cb96-137"><a href="#cb96-137" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">10</span>,</span>
<span id="cb96-138"><a href="#cb96-138" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-139"><a href="#cb96-139" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-140"><a href="#cb96-140" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb96-141"><a href="#cb96-141" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-142"><a href="#cb96-142" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-143"><a href="#cb96-143" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-144"><a href="#cb96-144" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # BMI</span></span>
<span id="cb96-145"><a href="#cb96-145" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'bodysizebminow' = list(</span></span>
<span id="cb96-146"><a href="#cb96-146" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'BMI',</span></span>
<span id="cb96-147"><a href="#cb96-147" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   interactions =</span></span>
<span id="cb96-148"><a href="#cb96-148" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     list('Trend by unit BMI increase' =</span></span>
<span id="cb96-149"><a href="#cb96-149" aria-hidden="true" tabindex="-1"></a>  <span class="co">#            list(</span></span>
<span id="cb96-150"><a href="#cb96-150" aria-hidden="true" tabindex="-1"></a>  <span class="co">#              type = 'trend',</span></span>
<span id="cb96-151"><a href="#cb96-151" aria-hidden="true" tabindex="-1"></a>  <span class="co">#              on = 'bodysizebminow',</span></span>
<span id="cb96-152"><a href="#cb96-152" aria-hidden="true" tabindex="-1"></a>  <span class="co">#              per = 1,</span></span>
<span id="cb96-153"><a href="#cb96-153" aria-hidden="true" tabindex="-1"></a>  <span class="co">#              reference_level = 10</span></span>
<span id="cb96-154"><a href="#cb96-154" aria-hidden="true" tabindex="-1"></a>  <span class="co">#              #by_missing_group = c(NA)</span></span>
<span id="cb96-155"><a href="#cb96-155" aria-hidden="true" tabindex="-1"></a>  <span class="co">#            )</span></span>
<span id="cb96-156"><a href="#cb96-156" aria-hidden="true" tabindex="-1"></a>  <span class="co">#          )</span></span>
<span id="cb96-157"><a href="#cb96-157" aria-hidden="true" tabindex="-1"></a>  <span class="co"># )#,</span></span>
<span id="cb96-158"><a href="#cb96-158" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-159"><a href="#cb96-159" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-160"><a href="#cb96-160" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Parity (with age at 1st pregnancy, and number of births)</span></span>
<span id="cb96-161"><a href="#cb96-161" aria-hidden="true" tabindex="-1"></a>  <span class="st">'pregparous'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-162"><a href="#cb96-162" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Pregnancies'</span>,</span>
<span id="cb96-163"><a href="#cb96-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>),</span>
<span id="cb96-164"><a href="#cb96-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">include_self =</span> <span class="cn">TRUE</span>,</span>
<span id="cb96-165"><a href="#cb96-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">reference_level =</span> <span class="st">"Parous"</span>,</span>
<span id="cb96-166"><a href="#cb96-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-167"><a href="#cb96-167" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Number of births'</span> <span class="ot">=</span></span>
<span id="cb96-168"><a href="#cb96-168" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-169"><a href="#cb96-169" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-170"><a href="#cb96-170" aria-hidden="true" tabindex="-1"></a>               <span class="at">within =</span> <span class="fu">c</span>(<span class="st">'Parous'</span>),</span>
<span id="cb96-171"><a href="#cb96-171" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'pregparitycnt'</span>,</span>
<span id="cb96-172"><a href="#cb96-172" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">1</span>,</span>
<span id="cb96-173"><a href="#cb96-173" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">2</span>,</span>
<span id="cb96-174"><a href="#cb96-174" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">0</span>)</span>
<span id="cb96-175"><a href="#cb96-175" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb96-176"><a href="#cb96-176" aria-hidden="true" tabindex="-1"></a>           <span class="st">'Age at 1st pregnancy'</span> <span class="ot">=</span></span>
<span id="cb96-177"><a href="#cb96-177" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-178"><a href="#cb96-178" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-179"><a href="#cb96-179" aria-hidden="true" tabindex="-1"></a>               <span class="at">within =</span> <span class="fu">c</span>(<span class="st">'Parous'</span>),</span>
<span id="cb96-180"><a href="#cb96-180" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'age_at_pregdate_1_f'</span>,</span>
<span id="cb96-181"><a href="#cb96-181" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">1</span>,</span>
<span id="cb96-182"><a href="#cb96-182" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">25</span>,</span>
<span id="cb96-183"><a href="#cb96-183" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-184"><a href="#cb96-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-185"><a href="#cb96-185" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb96-186"><a href="#cb96-186" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Duration of breastfeeding'</span> <span class="ot">=</span></span>
<span id="cb96-187"><a href="#cb96-187" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-188"><a href="#cb96-188" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-189"><a href="#cb96-189" aria-hidden="true" tabindex="-1"></a>               <span class="at">within =</span> <span class="fu">c</span>(<span class="st">'Parous'</span>),</span>
<span id="cb96-190"><a href="#cb96-190" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'bf_at_recruitment'</span>,</span>
<span id="cb96-191"><a href="#cb96-191" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">1</span>,</span>
<span id="cb96-192"><a href="#cb96-192" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">0</span>,</span>
<span id="cb96-193"><a href="#cb96-193" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-194"><a href="#cb96-194" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-195"><a href="#cb96-195" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb96-196"><a href="#cb96-196" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-197"><a href="#cb96-197" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-198"><a href="#cb96-198" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # #</span></span>
<span id="cb96-199"><a href="#cb96-199" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # # Parity (with total duration of breastfeeding)</span></span>
<span id="cb96-200"><a href="#cb96-200" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # 'pregparous' = list(</span></span>
<span id="cb96-201"><a href="#cb96-201" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #   realname = 'Breastfeeding Duration',</span></span>
<span id="cb96-202"><a href="#cb96-202" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #   missing_group = c(NA),</span></span>
<span id="cb96-203"><a href="#cb96-203" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #   include_self = TRUE,</span></span>
<span id="cb96-204"><a href="#cb96-204" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #   interactions =</span></span>
<span id="cb96-205"><a href="#cb96-205" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #     list('Duration of breastfeeding' =</span></span>
<span id="cb96-206"><a href="#cb96-206" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #            list(</span></span>
<span id="cb96-207"><a href="#cb96-207" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #              type = 'trend',</span></span>
<span id="cb96-208"><a href="#cb96-208" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #              within = c('Parous'),</span></span>
<span id="cb96-209"><a href="#cb96-209" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #              on = 'bf_total',</span></span>
<span id="cb96-210"><a href="#cb96-210" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #              per = 1,</span></span>
<span id="cb96-211"><a href="#cb96-211" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #              reference_level = 0,</span></span>
<span id="cb96-212"><a href="#cb96-212" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #              by_missing_group = c(NA)</span></span>
<span id="cb96-213"><a href="#cb96-213" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #            )</span></span>
<span id="cb96-214"><a href="#cb96-214" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #     )</span></span>
<span id="cb96-215"><a href="#cb96-215" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # ),</span></span>
<span id="cb96-216"><a href="#cb96-216" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-217"><a href="#cb96-217" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # #</span></span>
<span id="cb96-218"><a href="#cb96-218" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # Physical activity</span></span>
<span id="cb96-219"><a href="#cb96-219" aria-hidden="true" tabindex="-1"></a>  <span class="st">'PhysMetTotalLog2'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-220"><a href="#cb96-220" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Total physical activity (log2)'</span>,</span>
<span id="cb96-221"><a href="#cb96-221" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>),</span>
<span id="cb96-222"><a href="#cb96-222" aria-hidden="true" tabindex="-1"></a>    <span class="co">#reference_level = 50</span></span>
<span id="cb96-223"><a href="#cb96-223" aria-hidden="true" tabindex="-1"></a>    <span class="at">reference_level =</span> <span class="cf">function</span>(x) { <span class="fu">median</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>) }</span>
<span id="cb96-224"><a href="#cb96-224" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-225"><a href="#cb96-225" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-226"><a href="#cb96-226" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-227"><a href="#cb96-227" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Alcohol</span></span>
<span id="cb96-228"><a href="#cb96-228" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1alcoholstatus'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-229"><a href="#cb96-229" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Alcohol'</span>,</span>
<span id="cb96-230"><a href="#cb96-230" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>),</span>
<span id="cb96-231"><a href="#cb96-231" aria-hidden="true" tabindex="-1"></a>    <span class="at">include_self =</span> <span class="cn">TRUE</span>,</span>
<span id="cb96-232"><a href="#cb96-232" aria-hidden="true" tabindex="-1"></a>    <span class="at">reference_level =</span> <span class="st">'Never'</span>,</span>
<span id="cb96-233"><a href="#cb96-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-234"><a href="#cb96-234" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Alcohol consumption (per 10 units)'</span> <span class="ot">=</span></span>
<span id="cb96-235"><a href="#cb96-235" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-236"><a href="#cb96-236" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-237"><a href="#cb96-237" aria-hidden="true" tabindex="-1"></a>               <span class="at">within =</span> <span class="fu">c</span>(<span class="st">'Current'</span>, <span class="st">'Past'</span>),</span>
<span id="cb96-238"><a href="#cb96-238" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'R1alcoholunits'</span>,</span>
<span id="cb96-239"><a href="#cb96-239" aria-hidden="true" tabindex="-1"></a>               <span class="at">per =</span> <span class="dv">10</span>,</span>
<span id="cb96-240"><a href="#cb96-240" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="dv">10</span>,</span>
<span id="cb96-241"><a href="#cb96-241" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">0</span>)</span>
<span id="cb96-242"><a href="#cb96-242" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-243"><a href="#cb96-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-244"><a href="#cb96-244" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb96-245"><a href="#cb96-245" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb96-246"><a href="#cb96-246" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-247"><a href="#cb96-247" aria-hidden="true" tabindex="-1"></a>  <span class="co"># #</span></span>
<span id="cb96-248"><a href="#cb96-248" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # Smoking</span></span>
<span id="cb96-249"><a href="#cb96-249" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 'R1smokingstatus' = list(</span></span>
<span id="cb96-250"><a href="#cb96-250" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   realname = 'Smoking',</span></span>
<span id="cb96-251"><a href="#cb96-251" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   missing_group = c(NA)</span></span>
<span id="cb96-252"><a href="#cb96-252" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ),</span></span>
<span id="cb96-253"><a href="#cb96-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-254"><a href="#cb96-254" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb96-255"><a href="#cb96-255" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Smoking</span></span>
<span id="cb96-256"><a href="#cb96-256" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1smokingcategory'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-257"><a href="#cb96-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Smoking'</span>,</span>
<span id="cb96-258"><a href="#cb96-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>),</span>
<span id="cb96-259"><a href="#cb96-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-260"><a href="#cb96-260" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'Smoking'</span> <span class="ot">=</span></span>
<span id="cb96-261"><a href="#cb96-261" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-262"><a href="#cb96-262" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'nominal'</span>,</span>
<span id="cb96-263"><a href="#cb96-263" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'R1smokingcategory'</span>,</span>
<span id="cb96-264"><a href="#cb96-264" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="st">'Never'</span>,</span>
<span id="cb96-265"><a href="#cb96-265" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-266"><a href="#cb96-266" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb96-267"><a href="#cb96-267" aria-hidden="true" tabindex="-1"></a>  )),</span>
<span id="cb96-268"><a href="#cb96-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-269"><a href="#cb96-269" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Menopause</span></span>
<span id="cb96-270"><a href="#cb96-270" aria-hidden="true" tabindex="-1"></a>  <span class="st">'R1menopause'</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb96-271"><a href="#cb96-271" aria-hidden="true" tabindex="-1"></a>    <span class="at">realname =</span> <span class="st">'Menopause status'</span>,</span>
<span id="cb96-272"><a href="#cb96-272" aria-hidden="true" tabindex="-1"></a>    <span class="co">#missing_group = c(NA),</span></span>
<span id="cb96-273"><a href="#cb96-273" aria-hidden="true" tabindex="-1"></a>    <span class="at">combine_missing =</span> <span class="cn">FALSE</span>,</span>
<span id="cb96-274"><a href="#cb96-274" aria-hidden="true" tabindex="-1"></a>    <span class="at">include_self =</span> <span class="cn">TRUE</span>,</span>
<span id="cb96-275"><a href="#cb96-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">reference_level =</span> <span class="st">'Postmenopausal'</span>,</span>
<span id="cb96-276"><a href="#cb96-276" aria-hidden="true" tabindex="-1"></a>    <span class="at">interactions =</span></span>
<span id="cb96-277"><a href="#cb96-277" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="st">'OC status'</span> <span class="ot">=</span></span>
<span id="cb96-278"><a href="#cb96-278" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-279"><a href="#cb96-279" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'nominal'</span>,</span>
<span id="cb96-280"><a href="#cb96-280" aria-hidden="true" tabindex="-1"></a>               <span class="at">within =</span> <span class="fu">c</span>(<span class="st">'Premenopausal'</span>),</span>
<span id="cb96-281"><a href="#cb96-281" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'ocstatus'</span>,</span>
<span id="cb96-282"><a href="#cb96-282" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="st">'Never'</span>, <span class="co"># Cannot set reference level if within != parent reference_level</span></span>
<span id="cb96-283"><a href="#cb96-283" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-284"><a href="#cb96-284" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb96-285"><a href="#cb96-285" aria-hidden="true" tabindex="-1"></a>           <span class="st">'HRT status'</span> <span class="ot">=</span></span>
<span id="cb96-286"><a href="#cb96-286" aria-hidden="true" tabindex="-1"></a>             <span class="fu">list</span>(</span>
<span id="cb96-287"><a href="#cb96-287" aria-hidden="true" tabindex="-1"></a>               <span class="at">type =</span> <span class="st">'nominal'</span>,</span>
<span id="cb96-288"><a href="#cb96-288" aria-hidden="true" tabindex="-1"></a>               <span class="at">within =</span> <span class="st">'Postmenopausal'</span>,</span>
<span id="cb96-289"><a href="#cb96-289" aria-hidden="true" tabindex="-1"></a>               <span class="at">on =</span> <span class="st">'hrtstatus'</span>,</span>
<span id="cb96-290"><a href="#cb96-290" aria-hidden="true" tabindex="-1"></a>               <span class="at">reference_level =</span> <span class="st">'Never'</span>,</span>
<span id="cb96-291"><a href="#cb96-291" aria-hidden="true" tabindex="-1"></a>               <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-292"><a href="#cb96-292" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb96-293"><a href="#cb96-293" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Age at menopause'</span> <span class="ot">=</span></span>
<span id="cb96-294"><a href="#cb96-294" aria-hidden="true" tabindex="-1"></a>              <span class="fu">list</span>(</span>
<span id="cb96-295"><a href="#cb96-295" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-296"><a href="#cb96-296" aria-hidden="true" tabindex="-1"></a>                <span class="at">within =</span> <span class="st">'Postmenopausal'</span>,</span>
<span id="cb96-297"><a href="#cb96-297" aria-hidden="true" tabindex="-1"></a>                <span class="at">on =</span> <span class="st">'meno_age_est'</span>,</span>
<span id="cb96-298"><a href="#cb96-298" aria-hidden="true" tabindex="-1"></a>                <span class="at">reference_level =</span> <span class="dv">50</span>,</span>
<span id="cb96-299"><a href="#cb96-299" aria-hidden="true" tabindex="-1"></a>                <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-300"><a href="#cb96-300" aria-hidden="true" tabindex="-1"></a>              ),</span>
<span id="cb96-301"><a href="#cb96-301" aria-hidden="true" tabindex="-1"></a>             <span class="st">'BMI'</span> <span class="ot">=</span></span>
<span id="cb96-302"><a href="#cb96-302" aria-hidden="true" tabindex="-1"></a>               <span class="fu">list</span>(</span>
<span id="cb96-303"><a href="#cb96-303" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb96-304"><a href="#cb96-304" aria-hidden="true" tabindex="-1"></a>                 <span class="at">within =</span> <span class="fu">c</span>(<span class="st">'Postmenopausal'</span>),</span>
<span id="cb96-305"><a href="#cb96-305" aria-hidden="true" tabindex="-1"></a>                 <span class="at">on =</span> <span class="st">'bodysizebminow'</span>,</span>
<span id="cb96-306"><a href="#cb96-306" aria-hidden="true" tabindex="-1"></a>                 <span class="at">reference_level =</span> <span class="dv">25</span>,</span>
<span id="cb96-307"><a href="#cb96-307" aria-hidden="true" tabindex="-1"></a>                 <span class="at">per =</span> <span class="dv">1</span>,</span>
<span id="cb96-308"><a href="#cb96-308" aria-hidden="true" tabindex="-1"></a>                 <span class="at">by_missing_group =</span> <span class="fu">c</span>(<span class="cn">NA</span>)</span>
<span id="cb96-309"><a href="#cb96-309" aria-hidden="true" tabindex="-1"></a>               )</span>
<span id="cb96-310"><a href="#cb96-310" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb96-311"><a href="#cb96-311" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-312"><a href="#cb96-312" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-313"><a href="#cb96-313" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-314"><a href="#cb96-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-315"><a href="#cb96-315" aria-hidden="true" tabindex="-1"></a><span class="co"># For testing</span></span>
<span id="cb96-316"><a href="#cb96-316" aria-hidden="true" tabindex="-1"></a>dataset_surv_rf<span class="sc">$</span>R1menopause <span class="ot">&lt;-</span> <span class="fu">relevel</span>(dataset_surv_rf<span class="sc">$</span>R1menopause, <span class="at">ref=</span><span class="st">"Postmenopausal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Timesplitting (WIP; not yet implemented)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Currently working on this, have successfully implemented timesplitting on delivery dates (and increments 'parity'), follow-up questionnaire dates for smoking/alcohol/bmi, and HRT start/stop dates. Next is menopausal age.</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: HRT course dates have many ambiguities, thus how to manage these will need to be discussed.</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>split_individual <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">data=</span>df, <span class="at">dates=</span>age_cols, <span class="at">applic_var=</span><span class="cn">NULL</span>, <span class="at">newvar=</span><span class="cn">NULL</span>, <span class="at">type =</span> <span class="cn">NULL</span>, <span class="at">tcode=</span><span class="cn">NULL</span>) {</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#browser()</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>  ages <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(<span class="fu">unlist</span>(data[<span class="dv">1</span>, dates]))</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>  split_df <span class="ot">&lt;-</span> data</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Delivery splits</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">'pregnancy'</span>) {</span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>    ages <span class="ot">&lt;-</span> ages[(ages <span class="sc">&gt;</span> <span class="fu">min</span>(data<span class="sc">$</span>fupca_start_age) <span class="sc">&amp;</span> ages <span class="sc">&lt;</span> <span class="fu">max</span>(data<span class="sc">$</span>c_age))]</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(ages) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>      split_df<span class="sc">$</span>parity <span class="ot">&lt;-</span> split_df<span class="sc">$</span>pregparitycnt</span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(split_df)</span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>    split_df <span class="ot">&lt;-</span> <span class="fu">survSplit</span>(split_df, <span class="at">cut =</span> ages, <span class="at">end =</span> <span class="st">"c_age"</span>, <span class="at">event =</span> <span class="st">"event"</span>, <span class="at">start =</span> <span class="st">"fupca_start_age"</span>,<span class="at">episode=</span><span class="st">"parity"</span>)</span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a>    split_df<span class="sc">$</span>parity <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(split_df<span class="sc">$</span>pregparitycnt), <span class="fu">na.omit</span>(split_df<span class="sc">$</span>parity<span class="dv">-1</span>) <span class="sc">+</span> split_df<span class="sc">$</span>pregparitycnt, <span class="cn">NA</span>) <span class="co"># How was pregparitycnt derived? Doesn't line up with dates per Reuben.</span></span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">'menopause'</span>) {</span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(ages) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a>      split_df<span class="sc">$</span>menopause_status <span class="ot">&lt;-</span> <span class="cn">NA</span> <span class="co">#split_df$latest_menopausal_status</span></span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(split_df)</span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a>    meno_age <span class="ot">&lt;-</span> ages[<span class="dv">1</span>]</span>
<span id="cb97-27"><a href="#cb97-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-28"><a href="#cb97-28" aria-hidden="true" tabindex="-1"></a>    split_df <span class="ot">&lt;-</span> <span class="fu">survSplit</span>(split_df, <span class="at">cut =</span> meno_age, <span class="at">end =</span> <span class="st">"c_age"</span>, <span class="at">event =</span> <span class="st">"event"</span>, <span class="at">start =</span> <span class="st">"fupca_start_age"</span>)</span>
<span id="cb97-29"><a href="#cb97-29" aria-hidden="true" tabindex="-1"></a>    precedent_rows <span class="ot">&lt;-</span> split_df<span class="sc">$</span>c_age <span class="sc">&lt;=</span> meno_age</span>
<span id="cb97-30"><a href="#cb97-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-31"><a href="#cb97-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">length</span>(precedent_rows) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb97-32"><a href="#cb97-32" aria-hidden="true" tabindex="-1"></a>      split_df<span class="sc">$</span>menopause_status[precedent_rows] <span class="ot">&lt;-</span> <span class="st">'Premenopausal'</span></span>
<span id="cb97-33"><a href="#cb97-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb97-34"><a href="#cb97-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-35"><a href="#cb97-35" aria-hidden="true" tabindex="-1"></a>    subsequent_rows <span class="ot">&lt;-</span> split_df<span class="sc">$</span>fupca_start_age <span class="sc">&gt;=</span> meno_age</span>
<span id="cb97-36"><a href="#cb97-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-37"><a href="#cb97-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">length</span>(subsequent_rows) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb97-38"><a href="#cb97-38" aria-hidden="true" tabindex="-1"></a>      split_df<span class="sc">$</span>menopause_status[subsequent_rows] <span class="ot">&lt;-</span> <span class="st">'Menopausal'</span></span>
<span id="cb97-39"><a href="#cb97-39" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb97-40"><a href="#cb97-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-41"><a href="#cb97-41" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">'recr_ages'</span>) { <span class="co"># Recruitment splits</span></span>
<span id="cb97-42"><a href="#cb97-42" aria-hidden="true" tabindex="-1"></a>      ages <span class="ot">&lt;-</span> ages[(ages <span class="sc">&gt;</span> <span class="fu">min</span>(data<span class="sc">$</span>fupca_start_age) <span class="sc">&amp;</span> ages <span class="sc">&lt;</span> <span class="fu">max</span>(data<span class="sc">$</span>c_age))]</span>
<span id="cb97-43"><a href="#cb97-43" aria-hidden="true" tabindex="-1"></a>      split_df <span class="ot">&lt;-</span> <span class="fu">survSplit</span>(split_df, <span class="at">cut =</span> ages, <span class="at">end =</span> <span class="st">"c_age"</span>, <span class="at">event =</span> <span class="st">"event"</span>, <span class="at">start =</span> <span class="st">"fupca_start_age"</span>)</span>
<span id="cb97-44"><a href="#cb97-44" aria-hidden="true" tabindex="-1"></a>      split_age <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data[<span class="dv">1</span>, dates])</span>
<span id="cb97-45"><a href="#cb97-45" aria-hidden="true" tabindex="-1"></a>      subsequent_record <span class="ot">&lt;-</span> split_df[split_df<span class="sc">$</span>fupca_start_age <span class="sc">&gt;=</span> split_age,]</span>
<span id="cb97-46"><a href="#cb97-46" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(newvar <span class="cf">in</span> <span class="fu">names</span>(applic_var)) {</span>
<span id="cb97-47"><a href="#cb97-47" aria-hidden="true" tabindex="-1"></a>        prior_var <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(subsequent_record[<span class="dv">1</span>, applic_var[[newvar]][<span class="dv">1</span>]])</span>
<span id="cb97-48"><a href="#cb97-48" aria-hidden="true" tabindex="-1"></a>        subsequent_var <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data[<span class="dv">1</span>, applic_var[[newvar]][<span class="dv">2</span>]])</span>
<span id="cb97-49"><a href="#cb97-49" aria-hidden="true" tabindex="-1"></a>        split_df[[newvar]] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(split_df<span class="sc">$</span>fupca_start_age <span class="sc">&gt;=</span> split_age <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(subsequent_var), subsequent_var, prior_var) <span class="co"># Setting to prev value if new is NA, otherwise next</span></span>
<span id="cb97-50"><a href="#cb97-50" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb97-51"><a href="#cb97-51" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (type <span class="sc">==</span> <span class="st">'hrt_ages_start'</span>) {</span>
<span id="cb97-52"><a href="#cb97-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-53"><a href="#cb97-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.na</span>(split_df[[dates[<span class="dv">1</span>]]][<span class="dv">1</span>])) { <span class="co"># Handling missing first start age but present end age (? check for second/third course affected)</span></span>
<span id="cb97-54"><a href="#cb97-54" aria-hidden="true" tabindex="-1"></a>      split_df[[dates[<span class="dv">1</span>]]] <span class="ot">=</span> (<span class="fu">min</span>(split_df<span class="sc">$</span>fupca_start_age) <span class="sc">+</span> split_df[[dates[<span class="dv">2</span>]]][<span class="dv">1</span>])<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb97-55"><a href="#cb97-55" aria-hidden="true" tabindex="-1"></a>      ages <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(<span class="fu">unlist</span>(split_df[<span class="dv">1</span>, dates]))</span>
<span id="cb97-56"><a href="#cb97-56" aria-hidden="true" tabindex="-1"></a>    } </span>
<span id="cb97-57"><a href="#cb97-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb97-58"><a href="#cb97-58" aria-hidden="true" tabindex="-1"></a>    split_df <span class="ot">&lt;-</span> <span class="fu">survSplit</span>(split_df, <span class="at">cut =</span> ages, <span class="at">end =</span> <span class="st">"c_age"</span>, <span class="at">event =</span> <span class="st">"event"</span>, <span class="at">start =</span> <span class="st">"fupca_start_age"</span>)</span>
<span id="cb97-59"><a href="#cb97-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-60"><a href="#cb97-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">#browser()</span></span>
<span id="cb97-61"><a href="#cb97-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">#print(min(split_df$fupca_start_age))</span></span>
<span id="cb97-62"><a href="#cb97-62" aria-hidden="true" tabindex="-1"></a>    split_df<span class="sc">$</span>hrt <span class="ot">&lt;-</span> split_df<span class="sc">$</span>hrtstatus</span>
<span id="cb97-63"><a href="#cb97-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-64"><a href="#cb97-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(idx <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">2</span>)) {</span>
<span id="cb97-65"><a href="#cb97-65" aria-hidden="true" tabindex="-1"></a>      start_age <span class="ot">&lt;-</span> split_df[[dates[idx]]][<span class="dv">1</span>]</span>
<span id="cb97-66"><a href="#cb97-66" aria-hidden="true" tabindex="-1"></a>      stop_age <span class="ot">&lt;-</span> split_df[[dates[idx<span class="sc">+</span><span class="dv">1</span>]]][<span class="dv">1</span>]</span>
<span id="cb97-67"><a href="#cb97-67" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb97-68"><a href="#cb97-68" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">is.na</span>(stop_age) <span class="sc">&amp;</span> <span class="fu">is.na</span>(start_age)) <span class="co"># Blank course</span></span>
<span id="cb97-69"><a href="#cb97-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">next</span></span>
<span id="cb97-70"><a href="#cb97-70" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb97-71"><a href="#cb97-71" aria-hidden="true" tabindex="-1"></a>      <span class="co">#if(!is.na(stop_age) &amp; stop_age &lt; min(split_df$fupca_start_age))</span></span>
<span id="cb97-72"><a href="#cb97-72" aria-hidden="true" tabindex="-1"></a>          <span class="co">#  next</span></span>
<span id="cb97-73"><a href="#cb97-73" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb97-74"><a href="#cb97-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">is.na</span>(stop_age) <span class="sc">&amp;</span> start_age <span class="sc">&lt;</span> <span class="fu">min</span>(split_df<span class="sc">$</span>fupca_start_age)) </span>
<span id="cb97-75"><a href="#cb97-75" aria-hidden="true" tabindex="-1"></a>          <span class="co">#stop_age &lt;- +Inf # To override hrtstatus, if hrtage &lt; startage</span></span>
<span id="cb97-76"><a href="#cb97-76" aria-hidden="true" tabindex="-1"></a>            <span class="cf">next</span> <span class="co"># To use hrtstatus, if hrtage &lt; startage</span></span>
<span id="cb97-77"><a href="#cb97-77" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb97-78"><a href="#cb97-78" aria-hidden="true" tabindex="-1"></a>      <span class="co"># all remaining na(stopages) have hrtstart=nexthrtstart, we'll remove these</span></span>
<span id="cb97-79"><a href="#cb97-79" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">is.na</span>(stop_age))</span>
<span id="cb97-80"><a href="#cb97-80" aria-hidden="true" tabindex="-1"></a>        <span class="cf">next</span></span>
<span id="cb97-81"><a href="#cb97-81" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb97-82"><a href="#cb97-82" aria-hidden="true" tabindex="-1"></a>      interdate_rows <span class="ot">&lt;-</span> split_df<span class="sc">$</span>fupca_start_age <span class="sc">&gt;=</span> start_age <span class="sc">&amp;</span> split_df<span class="sc">$</span>c_age <span class="sc">&lt;=</span> stop_age</span>
<span id="cb97-83"><a href="#cb97-83" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">length</span>(interdate_rows) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb97-84"><a href="#cb97-84" aria-hidden="true" tabindex="-1"></a>        split_df<span class="sc">$</span>hrt[interdate_rows] <span class="ot">&lt;-</span> <span class="st">'Current'</span></span>
<span id="cb97-85"><a href="#cb97-85" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb97-86"><a href="#cb97-86" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb97-87"><a href="#cb97-87" aria-hidden="true" tabindex="-1"></a>      subsequent_rows <span class="ot">&lt;-</span> split_df<span class="sc">$</span>fupca_start_age <span class="sc">&gt;=</span> stop_age</span>
<span id="cb97-88"><a href="#cb97-88" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">length</span>(subsequent_rows) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb97-89"><a href="#cb97-89" aria-hidden="true" tabindex="-1"></a>        split_df<span class="sc">$</span>hrt[subsequent_rows] <span class="ot">&lt;-</span> <span class="st">'Former'</span></span>
<span id="cb97-90"><a href="#cb97-90" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb97-91"><a href="#cb97-91" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb97-92"><a href="#cb97-92" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb97-93"><a href="#cb97-93" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb97-94"><a href="#cb97-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(split_df)</span>
<span id="cb97-95"><a href="#cb97-95" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb97-96"><a href="#cb97-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-97"><a href="#cb97-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-98"><a href="#cb97-98" aria-hidden="true" tabindex="-1"></a><span class="co"># Delivery age splits</span></span>
<span id="cb97-99"><a href="#cb97-99" aria-hidden="true" tabindex="-1"></a>pregdatecols <span class="ot">&lt;-</span> <span class="fu">colnames</span>(dataset_rf)[<span class="fu">grepl</span>(<span class="st">'^age_at_pregdate_</span><span class="sc">\\</span><span class="st">d'</span>, <span class="fu">colnames</span>(dataset_rf), <span class="at">perl =</span> <span class="cn">TRUE</span>)]</span>
<span id="cb97-100"><a href="#cb97-100" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> base<span class="sc">::</span><span class="fu">merge</span>(dataset_surv_rf, dataset_rf <span class="sc">%&gt;%</span> <span class="fu">select</span>(TCode, pregdatecols[<span class="sc">-</span><span class="dv">1</span>]), <span class="at">by =</span> <span class="st">"TCode"</span>) <span class="co"># -1 because first is already in it</span></span>
<span id="cb97-101"><a href="#cb97-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-102"><a href="#cb97-102" aria-hidden="true" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span> </span>
<span id="cb97-103"><a href="#cb97-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TCode) <span class="sc">%&gt;%</span> </span>
<span id="cb97-104"><a href="#cb97-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_modify</span>(<span class="sc">~</span><span class="fu">split_individual</span>(.x, <span class="at">dates=</span>pregdatecols, <span class="at">type=</span><span class="st">'pregnancy'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb97-105"><a href="#cb97-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb97-106"><a href="#cb97-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-107"><a href="#cb97-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Recruitment age splits</span></span>
<span id="cb97-108"><a href="#cb97-108" aria-hidden="true" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> split_data <span class="sc">%&gt;%</span> </span>
<span id="cb97-109"><a href="#cb97-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TCode) <span class="sc">%&gt;%</span> </span>
<span id="cb97-110"><a href="#cb97-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_modify</span>(<span class="sc">~</span><span class="fu">split_individual</span>(.x, <span class="at">dates=</span><span class="st">'age_at_QR2_date_f'</span>, <span class="at">applic_var=</span><span class="fu">list</span>(</span>
<span id="cb97-111"><a href="#cb97-111" aria-hidden="true" tabindex="-1"></a>    <span class="st">'bmi'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'bodysizebminow'</span>, <span class="st">'R2bodysizebmi'</span>),</span>
<span id="cb97-112"><a href="#cb97-112" aria-hidden="true" tabindex="-1"></a>    <span class="st">'alcohol_status'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'R1alcoholstatus'</span>, <span class="st">'R2alcoholstatus'</span>),</span>
<span id="cb97-113"><a href="#cb97-113" aria-hidden="true" tabindex="-1"></a>    <span class="st">'alcohol_units'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'R1alcoholunits'</span>, <span class="st">'R2alcoholunits'</span>),</span>
<span id="cb97-114"><a href="#cb97-114" aria-hidden="true" tabindex="-1"></a>    <span class="st">'smoking_status'</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">'R1smokingstatus'</span>, <span class="st">'R2smokingstatus'</span>)), <span class="at">type=</span><span class="st">'recr_ages'</span>)) <span class="sc">%&gt;%</span> <span class="co"># Always updating to what the next split says - even if 'illogical' (ie., from current drinker to never drinker)</span></span>
<span id="cb97-115"><a href="#cb97-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb97-116"><a href="#cb97-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-117"><a href="#cb97-117" aria-hidden="true" tabindex="-1"></a><span class="co"># HRT age splits</span></span>
<span id="cb97-118"><a href="#cb97-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-119"><a href="#cb97-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetching just people on HRT (for testing)</span></span>
<span id="cb97-120"><a href="#cb97-120" aria-hidden="true" tabindex="-1"></a><span class="co"># merged_data &lt;- merged_data %&gt;% filter(!is.na(HRTstartage_1))</span></span>
<span id="cb97-121"><a href="#cb97-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-122"><a href="#cb97-122" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-123"><a href="#cb97-123" aria-hidden="true" tabindex="-1"></a><span class="do">## ISSUE 1: Start date before fup_start but "Never" HRT status (currently will overwrite their HRT status, or if end date is missing then it will trust their HRT status [then, issue becomes missing end date as discussed below])</span></span>
<span id="cb97-124"><a href="#cb97-124" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-125"><a href="#cb97-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-126"><a href="#cb97-126" aria-hidden="true" tabindex="-1"></a><span class="co"># never_but_started_before &lt;- dataset_surv_rf[!is.na(dataset_surv_rf$hrtstatus) &amp; dataset_surv_rf$hrtstatus == 'Never' &amp; !is.na(dataset_surv_rf$HRTstartage_1) &amp; dataset_surv_rf$HRTstartage_1 &lt; dataset_surv_rf$fupca_start_age,]</span></span>
<span id="cb97-127"><a href="#cb97-127" aria-hidden="true" tabindex="-1"></a><span class="co"># never_but_started_before_hrt &lt;- never_but_started_before %&gt;%</span></span>
<span id="cb97-128"><a href="#cb97-128" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(TCode) %&gt;%</span></span>
<span id="cb97-129"><a href="#cb97-129" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_modify(~split_individual(.x, dates=c('HRTstartage_1', 'HRTendage_1',</span></span>
<span id="cb97-130"><a href="#cb97-130" aria-hidden="true" tabindex="-1"></a><span class="co">#                                              'HRTstartage_2', 'HRTendage_2',</span></span>
<span id="cb97-131"><a href="#cb97-131" aria-hidden="true" tabindex="-1"></a><span class="co">#                                              'HRTstartage_3', 'HRTendage_3',</span></span>
<span id="cb97-132"><a href="#cb97-132" aria-hidden="true" tabindex="-1"></a><span class="co">#                                              'HRTstartage_4', 'HRTendage_4'), type='hrt_ages_start')) %&gt;%</span></span>
<span id="cb97-133"><a href="#cb97-133" aria-hidden="true" tabindex="-1"></a><span class="co">#   ungroup()</span></span>
<span id="cb97-134"><a href="#cb97-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-135"><a href="#cb97-135" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-136"><a href="#cb97-136" aria-hidden="true" tabindex="-1"></a><span class="do">## ISSUE 2: Missing start with non-missing end (not sure how to handle this)</span></span>
<span id="cb97-137"><a href="#cb97-137" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-138"><a href="#cb97-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-139"><a href="#cb97-139" aria-hidden="true" tabindex="-1"></a><span class="co"># interested_rows &lt;- dataset_surv_rf[is.na(dataset_surv_rf$HRTstartage_1) &amp; !is.na(dataset_surv_rf$HRTendage_1),]</span></span>
<span id="cb97-140"><a href="#cb97-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-141"><a href="#cb97-141" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-142"><a href="#cb97-142" aria-hidden="true" tabindex="-1"></a><span class="do">## ISSUE 3: Missing end with non-missing start (not sure how to handle this)</span></span>
<span id="cb97-143"><a href="#cb97-143" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-144"><a href="#cb97-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-145"><a href="#cb97-145" aria-hidden="true" tabindex="-1"></a>interested_rows <span class="ot">&lt;-</span> dataset_surv_rf[<span class="fu">is.na</span>(dataset_surv_rf<span class="sc">$</span>HRTendage_1) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(dataset_surv_rf<span class="sc">$</span>HRTstartage_1), ]</span>
<span id="cb97-146"><a href="#cb97-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-147"><a href="#cb97-147" aria-hidden="true" tabindex="-1"></a><span class="co"># For all four courses:</span></span>
<span id="cb97-148"><a href="#cb97-148" aria-hidden="true" tabindex="-1"></a><span class="co"># View(dataset_surv_rf[(is.na(dataset_surv_rf$HRTendage_1) &amp; !is.na(dataset_surv_rf$HRTstartage_1)) | (is.na(dataset_surv_rf$HRTendage_2) &amp; !is.na(dataset_surv_rf$HRTstartage_2)) | (is.na(dataset_surv_rf$HRTendage_3) &amp; !is.na(dataset_surv_rf$HRTstartage_3)) | (is.na(dataset_surv_rf$HRTendage_4) &amp; !is.na(dataset_surv_rf$HRTstartage_4)) &amp; !is.na(dataset_surv_rf$HRTtype1_1) &amp; !is.na(dataset_surv_rf$HRTtype1_2), c('TCode', 'fupca_start_age', 'c_age', 'hrtstatus', 'HRTstartage_1', 'HRTendage_1', 'HRTtype1_1', 'HRTstartage_2', 'HRTendage_2', 'HRTtype1_2', 'HRTstartage_3', 'HRTendage_3', 'HRTtype1_3', 'HRTstartage_4', 'HRTendage_4', 'HRTtype1_4')])</span></span>
<span id="cb97-149"><a href="#cb97-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-150"><a href="#cb97-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Especially when types differ, see:</span></span>
<span id="cb97-151"><a href="#cb97-151" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; View(dataset_surv_rf[is.na(dataset_surv_rf$HRTendage_1) &amp; !is.na(dataset_surv_rf$HRTstartage_1) &amp; !is.na(dataset_surv_rf$HRTtype1_1) &amp; !is.na(dataset_surv_rf$HRTtype1_2) &amp; dataset_surv_rf$HRTtype1_1 != dataset_surv_rf$HRTtype1_2, c('TCode', 'fupca_start_age', 'c_age', 'hrtstatus', 'HRTstartage_1', 'HRTendage_1', 'HRTtype1_1', 'HRTstartage_2', 'HRTendage_2', 'HRTtype1_2')])</span></span>
<span id="cb97-152"><a href="#cb97-152" aria-hidden="true" tabindex="-1"></a><span class="co"># &gt; View(dataset_surv_rf[is.na(dataset_surv_rf$HRTendage_1) &amp; !is.na(dataset_surv_rf$HRTstartage_1) &amp; !is.na(dataset_surv_rf$HRTtype1_1) &amp; !is.na(dataset_surv_rf$HRTtype1_2) &amp; dataset_surv_rf$HRTtype1_1 != dataset_surv_rf$HRTtype1_2 &amp; dataset_surv_rf$HRTstartage_1 &gt;= dataset_surv_rf$fupca_start_age, c('TCode', 'fupca_start_age', 'c_age', 'hrtstatus', 'HRTstartage_1', 'HRTendage_1', 'HRTtype1_1', 'HRTstartage_2', 'HRTendage_2', 'HRTtype1_2')])</span></span>
<span id="cb97-153"><a href="#cb97-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-154"><a href="#cb97-154" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-155"><a href="#cb97-155" aria-hidden="true" tabindex="-1"></a><span class="do">## ISSUE 4: Conflicting HRT end ages (my current algo will set the entire period to Former user)</span></span>
<span id="cb97-156"><a href="#cb97-156" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb97-157"><a href="#cb97-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-158"><a href="#cb97-158" aria-hidden="true" tabindex="-1"></a><span class="co"># interested_rows &lt;- dataset_surv_rf[!is.na(dataset_surv_rf$HRTendage_2) &amp; is.na(dataset_surv_rf$HRTstartage_2), ]</span></span>
<span id="cb97-159"><a href="#cb97-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-160"><a href="#cb97-160" aria-hidden="true" tabindex="-1"></a>interested_rows <span class="ot">&lt;-</span> interested_rows <span class="sc">%&gt;%</span></span>
<span id="cb97-161"><a href="#cb97-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TCode) <span class="sc">%&gt;%</span></span>
<span id="cb97-162"><a href="#cb97-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_modify</span>(<span class="sc">~</span><span class="fu">split_individual</span>(.x, <span class="at">dates=</span><span class="fu">c</span>(<span class="st">'HRTstartage_1'</span>, <span class="st">'HRTendage_1'</span>,</span>
<span id="cb97-163"><a href="#cb97-163" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'HRTstartage_2'</span>, <span class="st">'HRTendage_2'</span>,</span>
<span id="cb97-164"><a href="#cb97-164" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'HRTstartage_3'</span>, <span class="st">'HRTendage_3'</span>,</span>
<span id="cb97-165"><a href="#cb97-165" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'HRTstartage_4'</span>, <span class="st">'HRTendage_4'</span>), <span class="at">type=</span><span class="st">'hrt_ages_start'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb97-166"><a href="#cb97-166" aria-hidden="true" tabindex="-1"></a> <span class="fu">ungroup</span>()</span>
<span id="cb97-167"><a href="#cb97-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-168"><a href="#cb97-168" aria-hidden="true" tabindex="-1"></a><span class="co"># For viewing datasets for debugging:</span></span>
<span id="cb97-169"><a href="#cb97-169" aria-hidden="true" tabindex="-1"></a><span class="co"># View(m_start_nm_end_proc[, c('TCode', 'fupca_start_age', 'c_age', 'hrtstatus', 'hrt', 'HRTstartage_1', 'HRTendage_1', 'HRTstartage_2', 'HRTendage_2', 'HRTstartage_3', 'HRTendage_3', 'HRTstartage_4', 'HRTendage_4')])</span></span>
<span id="cb97-170"><a href="#cb97-170" aria-hidden="true" tabindex="-1"></a><span class="co"># # It will recode hrt to be Current</span></span>
<span id="cb97-171"><a href="#cb97-171" aria-hidden="true" tabindex="-1"></a><span class="co"># View(m_start_nm_end[, c('TCode', 'fupca_start_age', 'c_age', 'hrtstatus', 'HRTstartage_1', 'HRTendage_1', 'HRTstartage_2', 'HRTendage_2', 'HRTstartage_3', 'HRTendage_3', 'HRTstartage_4', 'HRTendage_4')])</span></span>
<span id="cb97-172"><a href="#cb97-172" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb97-173"><a href="#cb97-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-174"><a href="#cb97-174" aria-hidden="true" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> split_data <span class="sc">%&gt;%</span> </span>
<span id="cb97-175"><a href="#cb97-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TCode) <span class="sc">%&gt;%</span> </span>
<span id="cb97-176"><a href="#cb97-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_modify</span>(<span class="sc">~</span><span class="fu">split_individual</span>(.x, <span class="at">dates=</span><span class="fu">c</span>(<span class="st">'HRTstartage_1'</span>, <span class="st">'HRTendage_1'</span>, </span>
<span id="cb97-177"><a href="#cb97-177" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'HRTstartage_2'</span>, <span class="st">'HRTendage_2'</span>,</span>
<span id="cb97-178"><a href="#cb97-178" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'HRTstartage_3'</span>, <span class="st">'HRTendage_3'</span>,</span>
<span id="cb97-179"><a href="#cb97-179" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'HRTstartage_4'</span>, <span class="st">'HRTendage_4'</span>), <span class="at">type=</span><span class="st">'hrt_ages_start'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb97-180"><a href="#cb97-180" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb97-181"><a href="#cb97-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-182"><a href="#cb97-182" aria-hidden="true" tabindex="-1"></a><span class="co"># Next is to split on menopausal age (with meno_age_est)</span></span>
<span id="cb97-183"><a href="#cb97-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-184"><a href="#cb97-184" aria-hidden="true" tabindex="-1"></a><span class="co"># test_data &lt;- merged_data[1:100,]</span></span>
<span id="cb97-185"><a href="#cb97-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-186"><a href="#cb97-186" aria-hidden="true" tabindex="-1"></a>split_data <span class="ot">&lt;-</span> split_data <span class="sc">%&gt;%</span> </span>
<span id="cb97-187"><a href="#cb97-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TCode) <span class="sc">%&gt;%</span> </span>
<span id="cb97-188"><a href="#cb97-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_modify</span>(<span class="sc">~</span><span class="fu">split_individual</span>(.x, <span class="at">dates=</span><span class="st">'meno_age_est'</span>, <span class="at">type=</span><span class="st">'menopause'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb97-189"><a href="#cb97-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="univariate-analysis" class="level2">
<h2 class="anchored" data-anchor-id="univariate-analysis">Univariate analysis</h2>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This code is currently using non-timesplit data.</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fastDummies)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Thank you for using fastDummies!</code></pre>
<pre><code>To acknowledge our work, please cite the package:</code></pre>
<pre><code>Kaplan, J. &amp; Schlegel, B. (2023). fastDummies: Fast Creation of Dummy (Binary) Columns and Rows from Categorical Variables. Version 1.7.1. URL: https://github.com/jacobkap/fastDummies, https://jacobkap.github.io/fastDummies/.</code></pre>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co">#analysis_results &lt;- list()</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>uni_results_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Variable = character(),</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Term =</span> <span class="fu">character</span>(),</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Group_Name =</span> <span class="fu">character</span>(),</span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">HR =</span> <span class="fu">numeric</span>(),</span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">lowerCI =</span> <span class="fu">numeric</span>(),</span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">upperCI =</span> <span class="fu">numeric</span>(),</span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">pValue =</span> <span class="fu">numeric</span>(),</span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Baseline_group = character(),</span></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">Reference_Group =</span> <span class="fu">I</span>(<span class="fu">list</span>()),</span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a>univariate_model_terms <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a>combined_analysis_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="at">ncol =</span> <span class="dv">0</span>, <span class="at">nrow =</span> <span class="fu">nrow</span>(dataset_surv_rf)))</span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(idx <span class="cf">in</span> <span class="fu">seq_along</span>(analysis_config)) {</span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#browser()</span></span>
<span id="cb102-26"><a href="#cb102-26" aria-hidden="true" tabindex="-1"></a>  rf <span class="ot">&lt;-</span> <span class="fu">names</span>(analysis_config)[idx]</span>
<span id="cb102-27"><a href="#cb102-27" aria-hidden="true" tabindex="-1"></a>  rfac <span class="ot">&lt;-</span> analysis_config[[idx]]</span>
<span id="cb102-28"><a href="#cb102-28" aria-hidden="true" tabindex="-1"></a>  temp_rf <span class="ot">&lt;-</span> dataset_surv_rf[,<span class="fu">c</span>(rf, <span class="st">'fupca_start_age'</span>, <span class="st">'c_age'</span>, <span class="st">'event'</span>)]</span>
<span id="cb102-29"><a href="#cb102-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-30"><a href="#cb102-30" aria-hidden="true" tabindex="-1"></a>  <span class="co">#cat("\n##### ", rfac$realname, " \n")</span></span>
<span id="cb102-31"><a href="#cb102-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-32"><a href="#cb102-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># # Sanity checking whether a trend has been configured for a continuous variable</span></span>
<span id="cb102-33"><a href="#cb102-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># </span></span>
<span id="cb102-34"><a href="#cb102-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.factor</span>(temp_rf[[rf]])) {</span>
<span id="cb102-35"><a href="#cb102-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">any</span>(<span class="fu">unlist</span>(<span class="fu">lapply</span>(rfac<span class="sc">$</span>interactions, <span class="cf">function</span>(y) { <span class="cf">if</span>(y<span class="sc">$</span>type <span class="sc">==</span> <span class="st">'trend'</span> <span class="sc">&amp;</span> y<span class="sc">$</span>on <span class="sc">==</span> rf) { <span class="fu">return</span>(<span class="cn">TRUE</span>) } })))) {</span>
<span id="cb102-36"><a href="#cb102-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Log for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: this is a continuous variable and you did not configure a trend for itself, thus it will be auto-configured.'</span>))</span>
<span id="cb102-37"><a href="#cb102-37" aria-hidden="true" tabindex="-1"></a>      rfac<span class="sc">$</span>interactions[<span class="fu">paste0</span>(rfac<span class="sc">$</span>realname, <span class="st">' Trend'</span>)] <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">'Trend'</span> <span class="ot">=</span></span>
<span id="cb102-38"><a href="#cb102-38" aria-hidden="true" tabindex="-1"></a>           <span class="fu">list</span>(</span>
<span id="cb102-39"><a href="#cb102-39" aria-hidden="true" tabindex="-1"></a>             <span class="at">type =</span> <span class="st">'trend'</span>,</span>
<span id="cb102-40"><a href="#cb102-40" aria-hidden="true" tabindex="-1"></a>             <span class="at">on =</span> rf,</span>
<span id="cb102-41"><a href="#cb102-41" aria-hidden="true" tabindex="-1"></a>             <span class="at">reference_level =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>reference_level), rfac<span class="sc">$</span>reference_level, <span class="cn">NULL</span>),</span>
<span id="cb102-42"><a href="#cb102-42" aria-hidden="true" tabindex="-1"></a>             <span class="at">by_missing_group =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>missing_group), rfac<span class="sc">$</span>missing_group, <span class="cn">NULL</span>)</span>
<span id="cb102-43"><a href="#cb102-43" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb102-44"><a href="#cb102-44" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb102-45"><a href="#cb102-45" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-46"><a href="#cb102-46" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb102-47"><a href="#cb102-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-48"><a href="#cb102-48" aria-hidden="true" tabindex="-1"></a>  <span class="do">##</span></span>
<span id="cb102-49"><a href="#cb102-49" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Sanity checking the missing_group variable</span></span>
<span id="cb102-50"><a href="#cb102-50" aria-hidden="true" tabindex="-1"></a>  <span class="do">##</span></span>
<span id="cb102-51"><a href="#cb102-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-52"><a href="#cb102-52" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>missing_group)) {</span>
<span id="cb102-53"><a href="#cb102-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">is.factor</span>(temp_rf[[rf]])) { </span>
<span id="cb102-54"><a href="#cb102-54" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Add a new level for missing groups in the factor variable</span></span>
<span id="cb102-55"><a href="#cb102-55" aria-hidden="true" tabindex="-1"></a>      <span class="co">#new_level &lt;- "Missing"</span></span>
<span id="cb102-56"><a href="#cb102-56" aria-hidden="true" tabindex="-1"></a>      <span class="co">#levels(temp_rf[[rf]]) &lt;- c(levels(temp_rf[[rf]]), new_level)</span></span>
<span id="cb102-57"><a href="#cb102-57" aria-hidden="true" tabindex="-1"></a>      <span class="co">#temp_rf[[rf]][temp_rf[[rf]] %in% rfac$missing_group] &lt;- new_level</span></span>
<span id="cb102-58"><a href="#cb102-58" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb102-59"><a href="#cb102-59" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">is.null</span>(rfac<span class="sc">$</span>interactions)) {</span>
<span id="cb102-60"><a href="#cb102-60" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Error for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: this is a continuous variable and you have specified a missing category, but you have not configured a trend'</span>))</span>
<span id="cb102-61"><a href="#cb102-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">next</span></span>
<span id="cb102-62"><a href="#cb102-62" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-63"><a href="#cb102-63" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-64"><a href="#cb102-64" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="fu">is.null</span>(rfac<span class="sc">$</span>interactions)) {</span>
<span id="cb102-65"><a href="#cb102-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Warning for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: you have not specified a missing group; complete case analysis will be performed.'</span>))</span>
<span id="cb102-66"><a href="#cb102-66" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>interactions) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">any</span>(<span class="fu">sapply</span>(rfac<span class="sc">$</span>interactions, <span class="cf">function</span>(x) x<span class="sc">$</span>on<span class="sc">==</span>rf <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.null</span>(x<span class="sc">$</span>by_missing_group)))) {</span>
<span id="cb102-67"><a href="#cb102-67" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Warning for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: you have not specified a missing group (within a trend variable); complete case analysis will be performed.'</span>))</span>
<span id="cb102-68"><a href="#cb102-68" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb102-69"><a href="#cb102-69" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-70"><a href="#cb102-70" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dummy encoding the parent variable</span></span>
<span id="cb102-71"><a href="#cb102-71" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is.factor</span>(temp_rf[[rf]])) {</span>
<span id="cb102-72"><a href="#cb102-72" aria-hidden="true" tabindex="-1"></a>    rf_masks <span class="ot">&lt;-</span> <span class="fu">dummy_cols</span>(<span class="fu">data.frame</span>(<span class="st">'rf'</span><span class="ot">=</span>temp_rf[[rf]]), <span class="at">select_columns =</span> <span class="st">'rf'</span>, <span class="at">remove_selected_columns =</span> <span class="cn">TRUE</span>,<span class="at">remove_first_dummy=</span><span class="cn">FALSE</span>,<span class="at">ignore_na=</span><span class="cn">TRUE</span>, <span class="at">omit_colname_prefix=</span><span class="cn">FALSE</span>)</span>
<span id="cb102-73"><a href="#cb102-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">colnames</span>(rf_masks) <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">".*_([^_]*)$"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>, <span class="fu">colnames</span>(rf_masks))</span>
<span id="cb102-74"><a href="#cb102-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>missing_group)) {</span>
<span id="cb102-75"><a href="#cb102-75" aria-hidden="true" tabindex="-1"></a>      rf_masks <span class="ot">&lt;-</span> <span class="fu">lapply</span>(rf_masks, <span class="cf">function</span>(x) <span class="fu">replace</span>(x, <span class="fu">is.na</span>(x) <span class="sc">|</span> x <span class="sc">%in%</span> rfac<span class="sc">$</span>missing_group, <span class="dv">0</span>))</span>
<span id="cb102-76"><a href="#cb102-76" aria-hidden="true" tabindex="-1"></a>      rf_masks[[<span class="fu">paste0</span>(rf, <span class="st">"_Missing"</span>)]] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(temp_rf[[rf]] <span class="sc">%in%</span> rfac<span class="sc">$</span>missing_group)</span>
<span id="cb102-77"><a href="#cb102-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-78"><a href="#cb102-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-79"><a href="#cb102-79" aria-hidden="true" tabindex="-1"></a>    temp_rf <span class="ot">&lt;-</span> <span class="fu">cbind</span>(temp_rf, rf_masks)</span>
<span id="cb102-80"><a href="#cb102-80" aria-hidden="true" tabindex="-1"></a>  }  </span>
<span id="cb102-81"><a href="#cb102-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-82"><a href="#cb102-82" aria-hidden="true" tabindex="-1"></a>  <span class="do">##</span></span>
<span id="cb102-83"><a href="#cb102-83" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Loop for fitting an interaction</span></span>
<span id="cb102-84"><a href="#cb102-84" aria-hidden="true" tabindex="-1"></a>  <span class="do">##</span></span>
<span id="cb102-85"><a href="#cb102-85" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-86"><a href="#cb102-86" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>interactions)) { </span>
<span id="cb102-87"><a href="#cb102-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-88"><a href="#cb102-88" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set baseline formula</span></span>
<span id="cb102-89"><a href="#cb102-89" aria-hidden="true" tabindex="-1"></a>    formula <span class="ot">&lt;-</span> <span class="st">""</span></span>
<span id="cb102-90"><a href="#cb102-90" aria-hidden="true" tabindex="-1"></a>    autotrend <span class="ot">=</span> <span class="cn">FALSE</span> <span class="co"># To check if any trend is on the parent risk factor itself.</span></span>
<span id="cb102-91"><a href="#cb102-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-92"><a href="#cb102-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(interaction <span class="cf">in</span> <span class="fu">names</span>(rfac<span class="sc">$</span>interactions)) {</span>
<span id="cb102-93"><a href="#cb102-93" aria-hidden="true" tabindex="-1"></a>      interaction_config <span class="ot">&lt;-</span> rfac<span class="sc">$</span>interactions[[interaction]]</span>
<span id="cb102-94"><a href="#cb102-94" aria-hidden="true" tabindex="-1"></a>      type <span class="ot">&lt;-</span> interaction_config<span class="sc">$</span>type</span>
<span id="cb102-95"><a href="#cb102-95" aria-hidden="true" tabindex="-1"></a>      within <span class="ot">&lt;-</span> interaction_config<span class="sc">$</span>within</span>
<span id="cb102-96"><a href="#cb102-96" aria-hidden="true" tabindex="-1"></a>      on <span class="ot">&lt;-</span> interaction_config<span class="sc">$</span>on</span>
<span id="cb102-97"><a href="#cb102-97" aria-hidden="true" tabindex="-1"></a>      per <span class="ot">&lt;-</span> interaction_config<span class="sc">$</span>per</span>
<span id="cb102-98"><a href="#cb102-98" aria-hidden="true" tabindex="-1"></a>      reference_level <span class="ot">&lt;-</span> interaction_config<span class="sc">$</span>reference_level</span>
<span id="cb102-99"><a href="#cb102-99" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(reference_level) <span class="sc">&amp;</span> <span class="fu">class</span>(reference_level) <span class="sc">==</span> <span class="st">"function"</span>) {</span>
<span id="cb102-100"><a href="#cb102-100" aria-hidden="true" tabindex="-1"></a>        reference_level <span class="ot">=</span> <span class="fu">reference_level</span>(temp_rf[[on]])</span>
<span id="cb102-101"><a href="#cb102-101" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-102"><a href="#cb102-102" aria-hidden="true" tabindex="-1"></a>      by_missing_group <span class="ot">&lt;-</span> interaction_config<span class="sc">$</span>by_missing_group</span>
<span id="cb102-103"><a href="#cb102-103" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-104"><a href="#cb102-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-105"><a href="#cb102-105" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-106"><a href="#cb102-106" aria-hidden="true" tabindex="-1"></a>      <span class="do">##</span></span>
<span id="cb102-107"><a href="#cb102-107" aria-hidden="true" tabindex="-1"></a>      <span class="do">## Setting the mask on the risk factor dictating the observations to attend to for determining the trend.</span></span>
<span id="cb102-108"><a href="#cb102-108" aria-hidden="true" tabindex="-1"></a>      <span class="do">##</span></span>
<span id="cb102-109"><a href="#cb102-109" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-110"><a href="#cb102-110" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(within) <span class="sc">&amp;&amp;</span> <span class="sc">!</span>(rf <span class="sc">%in%</span> within)) {</span>
<span id="cb102-111"><a href="#cb102-111" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.factor</span>(temp_rf[[rf]])) {</span>
<span id="cb102-112"><a href="#cb102-112" aria-hidden="true" tabindex="-1"></a>          <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Error for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: you specified a level to perform a trend within, but risk factor is a continuous variable.'</span>))</span>
<span id="cb102-113"><a href="#cb102-113" aria-hidden="true" tabindex="-1"></a>          <span class="cf">next</span></span>
<span id="cb102-114"><a href="#cb102-114" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-115"><a href="#cb102-115" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-116"><a href="#cb102-116" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">all</span>(<span class="fu">paste0</span>(within, <span class="at">collapse=</span><span class="st">''</span>) <span class="sc">%in%</span> <span class="fu">colnames</span>(temp_rf))) { <span class="co"># If masks not present in temp_rf, e.g., due to 'combined mask' (e.g., in two different levels)</span></span>
<span id="cb102-117"><a href="#cb102-117" aria-hidden="true" tabindex="-1"></a>          within_cols <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(rf_masks[<span class="fu">names</span>(rf_masks) <span class="sc">%in%</span> within])</span>
<span id="cb102-118"><a href="#cb102-118" aria-hidden="true" tabindex="-1"></a>          temp_rf[[<span class="fu">paste</span>(within, <span class="at">collapse=</span><span class="st">''</span>)]] <span class="ot">&lt;-</span> <span class="fu">apply</span>(within_cols, <span class="dv">1</span>, <span class="cf">function</span>(x) <span class="fu">as.integer</span>(<span class="fu">any</span>(x <span class="sc">==</span> <span class="dv">1</span>)))</span>
<span id="cb102-119"><a href="#cb102-119" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-120"><a href="#cb102-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-121"><a href="#cb102-121" aria-hidden="true" tabindex="-1"></a>        <span class="co">#temp_rf[[paste0(paste(within, collapse=''), "Mask")]] &lt;- as.numeric(temp_rf[[rf]] %in% within)</span></span>
<span id="cb102-122"><a href="#cb102-122" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">is.null</span>(rfac<span class="sc">$</span>missing_group)) {</span>
<span id="cb102-123"><a href="#cb102-123" aria-hidden="true" tabindex="-1"></a>          temp_rf[[<span class="fu">paste</span>(within, <span class="at">collapse=</span><span class="st">''</span>)]] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(temp_rf[[rf]]) <span class="sc">|</span> (temp_rf[[rf]] <span class="sc">%in%</span> rfac<span class="sc">$</span>missing_group), <span class="cn">NA</span>, temp_rf[[<span class="fu">paste</span>(within, <span class="at">collapse=</span><span class="st">''</span>)]])</span>
<span id="cb102-124"><a href="#cb102-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-125"><a href="#cb102-125" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb102-126"><a href="#cb102-126" aria-hidden="true" tabindex="-1"></a>          <span class="co">#           </span></span>
<span id="cb102-127"><a href="#cb102-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-128"><a href="#cb102-128" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-129"><a href="#cb102-129" aria-hidden="true" tabindex="-1"></a>      } <span class="co">#else { # Might need to implement here too</span></span>
<span id="cb102-130"><a href="#cb102-130" aria-hidden="true" tabindex="-1"></a>        <span class="co">#within &lt;- rf</span></span>
<span id="cb102-131"><a href="#cb102-131" aria-hidden="true" tabindex="-1"></a>        <span class="co">#temp_rf[[paste(within, collapse='')]] &lt;- 1</span></span>
<span id="cb102-132"><a href="#cb102-132" aria-hidden="true" tabindex="-1"></a>      <span class="co">#}</span></span>
<span id="cb102-133"><a href="#cb102-133" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-134"><a href="#cb102-134" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Fetching the variable to perform the interaction with ('on') and sanity checking</span></span>
<span id="cb102-135"><a href="#cb102-135" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-136"><a href="#cb102-136" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">is.null</span>(on)) {</span>
<span id="cb102-137"><a href="#cb102-137" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Error for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: you have specified an interaction, but not specified the name of the interacting variable.'</span>))</span>
<span id="cb102-138"><a href="#cb102-138" aria-hidden="true" tabindex="-1"></a>        <span class="cf">next</span></span>
<span id="cb102-139"><a href="#cb102-139" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-140"><a href="#cb102-140" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-141"><a href="#cb102-141" aria-hidden="true" tabindex="-1"></a>      autotrend <span class="ot">&lt;-</span> (on <span class="sc">==</span> rf)</span>
<span id="cb102-142"><a href="#cb102-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-143"><a href="#cb102-143" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-144"><a href="#cb102-144" aria-hidden="true" tabindex="-1"></a>      <span class="co"># For more intuitive coefficient naming later on</span></span>
<span id="cb102-145"><a href="#cb102-145" aria-hidden="true" tabindex="-1"></a>      orig_on <span class="ot">&lt;-</span> on</span>
<span id="cb102-146"><a href="#cb102-146" aria-hidden="true" tabindex="-1"></a>      on <span class="ot">&lt;-</span> interaction </span>
<span id="cb102-147"><a href="#cb102-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-148"><a href="#cb102-148" aria-hidden="true" tabindex="-1"></a>      temp_rf <span class="ot">&lt;-</span> <span class="fu">cbind</span>(temp_rf, dataset_surv_rf[,<span class="fu">c</span>(orig_on)])</span>
<span id="cb102-149"><a href="#cb102-149" aria-hidden="true" tabindex="-1"></a>      <span class="fu">colnames</span>(temp_rf)[<span class="fu">length</span>(<span class="fu">names</span>(temp_rf))] <span class="ot">&lt;-</span> interaction</span>
<span id="cb102-150"><a href="#cb102-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-151"><a href="#cb102-151" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Sanity checking the input</span></span>
<span id="cb102-152"><a href="#cb102-152" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-153"><a href="#cb102-153" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">'trend'</span>) {</span>
<span id="cb102-154"><a href="#cb102-154" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.ordered</span>(temp_rf[[on]]) <span class="sc">&amp;</span> <span class="fu">is.factor</span>(temp_rf[[on]])) { </span>
<span id="cb102-155"><a href="#cb102-155" aria-hidden="true" tabindex="-1"></a>          <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Error for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: you have specified a trend on a categorical variable, but this variable is unordered.'</span>))</span>
<span id="cb102-156"><a href="#cb102-156" aria-hidden="true" tabindex="-1"></a>          <span class="cf">next</span></span>
<span id="cb102-157"><a href="#cb102-157" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-158"><a href="#cb102-158" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-159"><a href="#cb102-159" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-160"><a href="#cb102-160" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Sanity checking the input</span></span>
<span id="cb102-161"><a href="#cb102-161" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-162"><a href="#cb102-162" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(per) <span class="sc">&amp;&amp;</span> <span class="fu">is.ordered</span>(temp_rf[[on]]) <span class="sc">&amp;&amp;</span> per <span class="sc">!=</span> <span class="dv">1</span>) {</span>
<span id="cb102-163"><a href="#cb102-163" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Error for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: you have specified a </span><span class="sc">\'</span><span class="st">per</span><span class="sc">\'</span><span class="st"> != 1 on an ordered factor, which is not yet implemented.'</span>))</span>
<span id="cb102-164"><a href="#cb102-164" aria-hidden="true" tabindex="-1"></a>        <span class="cf">next</span></span>
<span id="cb102-165"><a href="#cb102-165" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-166"><a href="#cb102-166" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-167"><a href="#cb102-167" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Set the 'on' variable to a particular value for those where rf != within, so as not to drop people unnecessarily.</span></span>
<span id="cb102-168"><a href="#cb102-168" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>autotrend) {</span>
<span id="cb102-169"><a href="#cb102-169" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">is.factor</span>(temp_rf[[on]])) {</span>
<span id="cb102-170"><a href="#cb102-170" aria-hidden="true" tabindex="-1"></a>          temp_rf[[on]][<span class="sc">!</span>(temp_rf[[rf]] <span class="sc">%in%</span> within)] <span class="ot">&lt;-</span> <span class="fu">levels</span>(temp_rf[[on]])[<span class="dv">1</span>]</span>
<span id="cb102-171"><a href="#cb102-171" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb102-172"><a href="#cb102-172" aria-hidden="true" tabindex="-1"></a>          temp_rf[[on]][<span class="sc">!</span>(temp_rf[[rf]] <span class="sc">%in%</span> within)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb102-173"><a href="#cb102-173" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-174"><a href="#cb102-174" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-175"><a href="#cb102-175" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-176"><a href="#cb102-176" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Sanity checking the by_missing_group variable, ie., the values of the trend variable which should be considered 'missing'</span></span>
<span id="cb102-177"><a href="#cb102-177" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Add missing group on interacting variable, if specified </span></span>
<span id="cb102-178"><a href="#cb102-178" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(by_missing_group)) {</span>
<span id="cb102-179"><a href="#cb102-179" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Missing group is the group for missing values where rf == within</span></span>
<span id="cb102-180"><a href="#cb102-180" aria-hidden="true" tabindex="-1"></a>        <span class="co">#if(!autotrend) {</span></span>
<span id="cb102-181"><a href="#cb102-181" aria-hidden="true" tabindex="-1"></a>          temp_rf[[<span class="fu">paste0</span>(on, <span class="st">"_Missing"</span>)]] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>((temp_rf[[on]] <span class="sc">%in%</span> by_missing_group) <span class="sc">&amp;</span> </span>
<span id="cb102-182"><a href="#cb102-182" aria-hidden="true" tabindex="-1"></a>                                                            (autotrend <span class="sc">|</span> (temp_rf[[rf]] <span class="sc">%in%</span> within)))</span>
<span id="cb102-183"><a href="#cb102-183" aria-hidden="true" tabindex="-1"></a>        <span class="co">#} else {</span></span>
<span id="cb102-184"><a href="#cb102-184" aria-hidden="true" tabindex="-1"></a>        <span class="co">#  temp_rf$Missing &lt;- as.numeric((temp_rf[[on]] %in% by_missing_group) &amp; </span></span>
<span id="cb102-185"><a href="#cb102-185" aria-hidden="true" tabindex="-1"></a>        <span class="co">#                                                    (autotrend | (temp_rf[[rf]] %in% within)))</span></span>
<span id="cb102-186"><a href="#cb102-186" aria-hidden="true" tabindex="-1"></a>        <span class="co">#}</span></span>
<span id="cb102-187"><a href="#cb102-187" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add a mask for "relevant rows", ie., ones where missingness is relevant (ie., rf has to also be == 'within')</span></span>
<span id="cb102-188"><a href="#cb102-188" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-189"><a href="#cb102-189" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">is.factor</span>(temp_rf[[on]])) {</span>
<span id="cb102-190"><a href="#cb102-190" aria-hidden="true" tabindex="-1"></a>          <span class="co">#if(!autotrend) {</span></span>
<span id="cb102-191"><a href="#cb102-191" aria-hidden="true" tabindex="-1"></a>            temp_rf[[on]][temp_rf[[<span class="fu">paste0</span>(on, <span class="st">"_Missing"</span>)]] <span class="sc">==</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="fu">levels</span>(temp_rf[[on]])[<span class="dv">1</span>]</span>
<span id="cb102-192"><a href="#cb102-192" aria-hidden="true" tabindex="-1"></a>          <span class="co">#} else {</span></span>
<span id="cb102-193"><a href="#cb102-193" aria-hidden="true" tabindex="-1"></a>          <span class="co">#  temp_rf[[on]][temp_rf$Missing == 1] &lt;- levels(temp_rf[[on]])[1]</span></span>
<span id="cb102-194"><a href="#cb102-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-195"><a href="#cb102-195" aria-hidden="true" tabindex="-1"></a>          <span class="co">#}</span></span>
<span id="cb102-196"><a href="#cb102-196" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-197"><a href="#cb102-197" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">is.null</span>(rfac<span class="sc">$</span>combine_missing) <span class="sc">||</span> <span class="sc">!</span>rfac<span class="sc">$</span>combine_missing) {</span>
<span id="cb102-198"><a href="#cb102-198" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span>(<span class="sc">!</span>autotrend) {</span>
<span id="cb102-199"><a href="#cb102-199" aria-hidden="true" tabindex="-1"></a>            formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + `"</span>, <span class="fu">paste0</span>(<span class="fu">paste</span>(within, <span class="at">collapse=</span><span class="st">''</span>), <span class="st">"`:`"</span>, on, <span class="st">"_Missing`"</span>))</span>
<span id="cb102-200"><a href="#cb102-200" aria-hidden="true" tabindex="-1"></a>          } <span class="cf">else</span> {</span>
<span id="cb102-201"><a href="#cb102-201" aria-hidden="true" tabindex="-1"></a>            formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + `"</span>, on, <span class="st">"_Missing`"</span>)</span>
<span id="cb102-202"><a href="#cb102-202" aria-hidden="true" tabindex="-1"></a>            <span class="co">#formula &lt;- paste0(formula, " + Missing")</span></span>
<span id="cb102-203"><a href="#cb102-203" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb102-204"><a href="#cb102-204" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-205"><a href="#cb102-205" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb102-206"><a href="#cb102-206" aria-hidden="true" tabindex="-1"></a>        <span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">'Warning for variable </span><span class="sc">\'</span><span class="st">'</span>, rf, <span class="st">'</span><span class="sc">\'</span><span class="st">: you have specified an interaction, but did not specify what constitute missing values for that interacting variable; complete case analysis will be performed.'</span>))</span>
<span id="cb102-207"><a href="#cb102-207" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-208"><a href="#cb102-208" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb102-209"><a href="#cb102-209" aria-hidden="true" tabindex="-1"></a>      <span class="co"># If trend, convert ordinal to numeric and divide by 'per', and set intercept (via 'reference_level')</span></span>
<span id="cb102-210"><a href="#cb102-210" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">'trend'</span>) {</span>
<span id="cb102-211"><a href="#cb102-211" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Set reference level according to numeric value, and convert categories to numeric</span></span>
<span id="cb102-212"><a href="#cb102-212" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">is.ordered</span>(temp_rf[[on]])) { </span>
<span id="cb102-213"><a href="#cb102-213" aria-hidden="true" tabindex="-1"></a>          reference_level <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">levels</span>(temp_rf[[on]]) <span class="sc">==</span> reference_level)</span>
<span id="cb102-214"><a href="#cb102-214" aria-hidden="true" tabindex="-1"></a>          temp_rf[[on]] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(temp_rf[[on]]))</span>
<span id="cb102-215"><a href="#cb102-215" aria-hidden="true" tabindex="-1"></a>        } </span>
<span id="cb102-216"><a href="#cb102-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-217"><a href="#cb102-217" aria-hidden="true" tabindex="-1"></a>        temp_rf[[on]] <span class="ot">&lt;-</span> temp_rf[[on]] <span class="sc">-</span> reference_level</span>
<span id="cb102-218"><a href="#cb102-218" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-219"><a href="#cb102-219" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(by_missing_group)) {</span>
<span id="cb102-220"><a href="#cb102-220" aria-hidden="true" tabindex="-1"></a>          <span class="co">#if(!autotrend) {</span></span>
<span id="cb102-221"><a href="#cb102-221" aria-hidden="true" tabindex="-1"></a>            temp_rf[[on]][temp_rf[[<span class="fu">paste0</span>(on, <span class="st">"_Missing"</span>)]] <span class="sc">==</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb102-222"><a href="#cb102-222" aria-hidden="true" tabindex="-1"></a>          <span class="co">#} else {</span></span>
<span id="cb102-223"><a href="#cb102-223" aria-hidden="true" tabindex="-1"></a>          <span class="co">#  temp_rf[[on]][temp_rf$Missing == 1] &lt;- 0</span></span>
<span id="cb102-224"><a href="#cb102-224" aria-hidden="true" tabindex="-1"></a>          <span class="co">#}</span></span>
<span id="cb102-225"><a href="#cb102-225" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-226"><a href="#cb102-226" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-227"><a href="#cb102-227" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Divide continuous variable by 'per'</span></span>
<span id="cb102-228"><a href="#cb102-228" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.ordered</span>(temp_rf[[on]]) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.null</span>(per)) { </span>
<span id="cb102-229"><a href="#cb102-229" aria-hidden="true" tabindex="-1"></a>          temp_rf[[on]] <span class="ot">&lt;-</span> temp_rf[[on]]<span class="sc">/</span>per</span>
<span id="cb102-230"><a href="#cb102-230" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-231"><a href="#cb102-231" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-232"><a href="#cb102-232" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span>autotrend) {</span>
<span id="cb102-233"><a href="#cb102-233" aria-hidden="true" tabindex="-1"></a>          formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + `"</span>, <span class="fu">paste</span>(within, <span class="at">collapse=</span><span class="st">''</span>), <span class="st">"`:`"</span>, on, <span class="st">"`"</span>)</span>
<span id="cb102-234"><a href="#cb102-234" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb102-235"><a href="#cb102-235" aria-hidden="true" tabindex="-1"></a>          formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + `"</span>, on, <span class="st">"`"</span>)</span>
<span id="cb102-236"><a href="#cb102-236" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-237"><a href="#cb102-237" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-238"><a href="#cb102-238" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> <span class="cf">if</span>(type <span class="sc">==</span> <span class="st">'nominal'</span>) {</span>
<span id="cb102-239"><a href="#cb102-239" aria-hidden="true" tabindex="-1"></a>        <span class="co">#temp_rf[[on]] &lt;- relevel(temp_rf[[on]], ref = reference_level)</span></span>
<span id="cb102-240"><a href="#cb102-240" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create dummy variables</span></span>
<span id="cb102-241"><a href="#cb102-241" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span>autotrend) {</span>
<span id="cb102-242"><a href="#cb102-242" aria-hidden="true" tabindex="-1"></a>          temp_rf <span class="ot">&lt;-</span> <span class="fu">dummy_cols</span>(temp_rf, <span class="at">select_columns =</span> on, <span class="at">remove_selected_columns =</span> <span class="cn">TRUE</span>,<span class="at">ignore_na=</span><span class="cn">TRUE</span>,<span class="at">omit_colname_prefix=</span>autotrend)</span>
<span id="cb102-243"><a href="#cb102-243" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-244"><a href="#cb102-244" aria-hidden="true" tabindex="-1"></a>        <span class="do">## Only if reference level makes sense (ie., 'within' == 'rf') (after discussion with Montse, it makes sense)</span></span>
<span id="cb102-245"><a href="#cb102-245" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(reference_level)) { <span class="co"># &amp;&amp; within == reference_level) {</span></span>
<span id="cb102-246"><a href="#cb102-246" aria-hidden="true" tabindex="-1"></a>          temp_rf[[<span class="fu">paste0</span>(on, <span class="st">"_"</span>, reference_level)]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb102-247"><a href="#cb102-247" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-248"><a href="#cb102-248" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(by_missing_group)) {</span>
<span id="cb102-249"><a href="#cb102-249" aria-hidden="true" tabindex="-1"></a>          missing_group_cols <span class="ot">&lt;-</span> <span class="fu">paste0</span>(on, <span class="st">"_"</span>, by_missing_group)</span>
<span id="cb102-250"><a href="#cb102-250" aria-hidden="true" tabindex="-1"></a>          temp_rf[[missing_group_cols]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb102-251"><a href="#cb102-251" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-252"><a href="#cb102-252" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-253"><a href="#cb102-253" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span>autotrend) {</span>
<span id="cb102-254"><a href="#cb102-254" aria-hidden="true" tabindex="-1"></a>          formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + "</span>, <span class="fu">paste0</span>(<span class="st">"`"</span>, <span class="fu">paste</span>(within, <span class="at">collapse=</span><span class="st">''</span>), <span class="st">"`:`"</span>, <span class="fu">names</span>(temp_rf)[<span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">"^"</span>, on, <span class="st">"_"</span>), <span class="fu">names</span>(temp_rf)) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"_Missing$"</span>, <span class="fu">names</span>(temp_rf))], <span class="st">"`"</span>, <span class="at">collapse =</span> <span class="st">" + "</span>))</span>
<span id="cb102-255"><a href="#cb102-255" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="cb102-256"><a href="#cb102-256" aria-hidden="true" tabindex="-1"></a>          formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + "</span>, <span class="fu">paste0</span>(<span class="st">"`"</span>, </span>
<span id="cb102-257"><a href="#cb102-257" aria-hidden="true" tabindex="-1"></a>       <span class="fu">names</span>(temp_rf)[<span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="fu">levels</span>(temp_rf[[rf]])[<span class="sc">!</span><span class="fu">levels</span>(temp_rf[[rf]]) <span class="sc">%in%</span> reference_level], </span>
<span id="cb102-258"><a href="#cb102-258" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">collapse=</span><span class="st">"|"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb102-259"><a href="#cb102-259" aria-hidden="true" tabindex="-1"></a>                          stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">["</span>, <span class="st">"</span><span class="sc">\\\\</span><span class="st">["</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb102-260"><a href="#cb102-260" aria-hidden="true" tabindex="-1"></a>                          stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">"</span><span class="sc">\\\\</span><span class="st">]"</span>), </span>
<span id="cb102-261"><a href="#cb102-261" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">names</span>(temp_rf)) <span class="sc">&amp;</span> </span>
<span id="cb102-262"><a href="#cb102-262" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"^Missing$"</span>, <span class="fu">names</span>(temp_rf))], </span>
<span id="cb102-263"><a href="#cb102-263" aria-hidden="true" tabindex="-1"></a>       <span class="st">"`"</span>, </span>
<span id="cb102-264"><a href="#cb102-264" aria-hidden="true" tabindex="-1"></a>       <span class="at">collapse =</span> <span class="st">" + "</span>))</span>
<span id="cb102-265"><a href="#cb102-265" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-266"><a href="#cb102-266" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-267"><a href="#cb102-267" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-268"><a href="#cb102-268" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-269"><a href="#cb102-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-270"><a href="#cb102-270" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>autotrend) { <span class="co"># &amp; (!is.null(rfac$include_self) &amp;&amp; rfac$include_self)) { </span></span>
<span id="cb102-271"><a href="#cb102-271" aria-hidden="true" tabindex="-1"></a>      <span class="co"># if(!is.null(rfac$realname)) {</span></span>
<span id="cb102-272"><a href="#cb102-272" aria-hidden="true" tabindex="-1"></a>      <span class="co">#   colnames(temp_rf)[1] &lt;- rfac$realname</span></span>
<span id="cb102-273"><a href="#cb102-273" aria-hidden="true" tabindex="-1"></a>      <span class="co">#   rf &lt;- rfac$realname</span></span>
<span id="cb102-274"><a href="#cb102-274" aria-hidden="true" tabindex="-1"></a>      <span class="co"># }</span></span>
<span id="cb102-275"><a href="#cb102-275" aria-hidden="true" tabindex="-1"></a>      <span class="co"># paste(within, collapse=''), "Mask`:`"</span></span>
<span id="cb102-276"><a href="#cb102-276" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Create dummy variables if categorical</span></span>
<span id="cb102-277"><a href="#cb102-277" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="fu">is.factor</span>(temp_rf[[rf]])) {</span>
<span id="cb102-278"><a href="#cb102-278" aria-hidden="true" tabindex="-1"></a>        <span class="co">#if(!is.null(rfac$missing_group)) {</span></span>
<span id="cb102-279"><a href="#cb102-279" aria-hidden="true" tabindex="-1"></a>          <span class="co"># temp_rf[[paste0(rf, "_Missing")]] &lt;- as.numeric(temp_rf[[rf]] %in% rfac$missing_group)</span></span>
<span id="cb102-280"><a href="#cb102-280" aria-hidden="true" tabindex="-1"></a>          <span class="co"># if(is.null(rfac$combine_missing) || !rfac$combine_missing) {</span></span>
<span id="cb102-281"><a href="#cb102-281" aria-hidden="true" tabindex="-1"></a>          <span class="co">#   formula &lt;- paste0(formula, " + `", paste0(rf, "_Missing"), "`")</span></span>
<span id="cb102-282"><a href="#cb102-282" aria-hidden="true" tabindex="-1"></a>          <span class="co"># }</span></span>
<span id="cb102-283"><a href="#cb102-283" aria-hidden="true" tabindex="-1"></a>        <span class="co">#}</span></span>
<span id="cb102-284"><a href="#cb102-284" aria-hidden="true" tabindex="-1"></a>        <span class="co">#temp_rf &lt;- dummy_cols(temp_rf, select_columns = rf, remove_selected_columns = TRUE,remove_first_dummy=FALSE,ignore_na=TRUE)</span></span>
<span id="cb102-285"><a href="#cb102-285" aria-hidden="true" tabindex="-1"></a>        <span class="co">#temp_rf &lt;- cbind(temp_rf, rf_masks)</span></span>
<span id="cb102-286"><a href="#cb102-286" aria-hidden="true" tabindex="-1"></a>        <span class="co">#if(!is.null(rfac$reference_level)) {</span></span>
<span id="cb102-287"><a href="#cb102-287" aria-hidden="true" tabindex="-1"></a>          <span class="do">#####temp_rf[[paste0(rf, "_", rfac$reference_level)]] &lt;- NULL</span></span>
<span id="cb102-288"><a href="#cb102-288" aria-hidden="true" tabindex="-1"></a>        <span class="co">#  temp_rf[[rfac$reference_level]] &lt;- NULL</span></span>
<span id="cb102-289"><a href="#cb102-289" aria-hidden="true" tabindex="-1"></a>        <span class="co">#}</span></span>
<span id="cb102-290"><a href="#cb102-290" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>missing_group)) {</span>
<span id="cb102-291"><a href="#cb102-291" aria-hidden="true" tabindex="-1"></a>          <span class="co">#missing_group_cols &lt;- paste0(rf, "_", rfac$missing_group)</span></span>
<span id="cb102-292"><a href="#cb102-292" aria-hidden="true" tabindex="-1"></a>          <span class="co">#temp_rf[[missing_group_cols]] &lt;- NULL</span></span>
<span id="cb102-293"><a href="#cb102-293" aria-hidden="true" tabindex="-1"></a>          temp_rf[rfac<span class="sc">$</span>missing_group[<span class="sc">!</span><span class="fu">is.na</span>(rfac<span class="sc">$</span>missing_group)]] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb102-294"><a href="#cb102-294" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-295"><a href="#cb102-295" aria-hidden="true" tabindex="-1"></a>        <span class="co"># rf_escaped &lt;- gsub("([().])", "\\\\\\1", rf)</span></span>
<span id="cb102-296"><a href="#cb102-296" aria-hidden="true" tabindex="-1"></a>        <span class="co"># rf_levels_colnames &lt;- names(temp_rf)[grepl(paste0("^", rf_escaped, "_.*(?&lt;!Missing)$"), names(temp_rf), perl = TRUE)]</span></span>
<span id="cb102-297"><a href="#cb102-297" aria-hidden="true" tabindex="-1"></a>        <span class="co"># if((!is.null(rfac$include_self) &amp;&amp; rfac$include_self)) {</span></span>
<span id="cb102-298"><a href="#cb102-298" aria-hidden="true" tabindex="-1"></a>        <span class="co">#   temp_rf[rf_levels_colnames] &lt;- lapply(temp_rf[rf_levels_colnames], function(x) replace(x, is.na(x), 0))</span></span>
<span id="cb102-299"><a href="#cb102-299" aria-hidden="true" tabindex="-1"></a>        <span class="co">#   formula &lt;- paste0(formula, " + ", paste0("`", rf_levels_colnames, "`", collapse = " + "))</span></span>
<span id="cb102-300"><a href="#cb102-300" aria-hidden="true" tabindex="-1"></a>        <span class="co"># }</span></span>
<span id="cb102-301"><a href="#cb102-301" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-302"><a href="#cb102-302" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>((<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>include_self) <span class="sc">&amp;&amp;</span> rfac<span class="sc">$</span>include_self)) {</span>
<span id="cb102-303"><a href="#cb102-303" aria-hidden="true" tabindex="-1"></a>          formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + "</span>, <span class="fu">paste0</span>(<span class="st">"`"</span>, <span class="fu">names</span>(rf_masks)[<span class="sc">!</span>(<span class="fu">names</span>(rf_masks)[<span class="sc">!</span><span class="fu">endsWith</span>(<span class="fu">names</span>(rf_masks), <span class="st">"Missing"</span>)] <span class="sc">%in%</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>reference_level), rfac<span class="sc">$</span>reference_level, <span class="cn">TRUE</span>))] , <span class="st">"`"</span>, <span class="at">collapse =</span> <span class="st">" + "</span>))</span>
<span id="cb102-304"><a href="#cb102-304" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb102-305"><a href="#cb102-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-306"><a href="#cb102-306" aria-hidden="true" tabindex="-1"></a>      } <span class="cf">else</span> {</span>
<span id="cb102-307"><a href="#cb102-307" aria-hidden="true" tabindex="-1"></a>        formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + `"</span>, rf, <span class="st">"`"</span>)</span>
<span id="cb102-308"><a href="#cb102-308" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb102-309"><a href="#cb102-309" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-310"><a href="#cb102-310" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>combine_missing) <span class="sc">&amp;&amp;</span> rfac<span class="sc">$</span>combine_missing) {</span>
<span id="cb102-311"><a href="#cb102-311" aria-hidden="true" tabindex="-1"></a>      combined_mask <span class="ot">&lt;-</span> <span class="fu">rowSums</span>(temp_rf[<span class="fu">names</span>(temp_rf)[<span class="fu">endsWith</span>(<span class="fu">names</span>(temp_rf), <span class="st">'_Missing'</span>)]]) <span class="sc">&gt;</span> <span class="dv">0</span></span>
<span id="cb102-312"><a href="#cb102-312" aria-hidden="true" tabindex="-1"></a>      prefixes <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"_Missing$"</span>, <span class="st">""</span>, <span class="fu">names</span>(temp_rf)[<span class="fu">grep</span>(<span class="st">"_Missing$"</span>, <span class="fu">names</span>(temp_rf))])</span>
<span id="cb102-313"><a href="#cb102-313" aria-hidden="true" tabindex="-1"></a>      matched_cols <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">grep</span>(<span class="fu">paste</span>(prefixes, <span class="at">collapse=</span><span class="st">"|"</span>), <span class="fu">names</span>(temp_rf), <span class="at">value =</span> <span class="cn">TRUE</span>))</span>
<span id="cb102-314"><a href="#cb102-314" aria-hidden="true" tabindex="-1"></a>      matched_cols <span class="ot">&lt;-</span> matched_cols[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"_Missing$"</span>, matched_cols)]</span>
<span id="cb102-315"><a href="#cb102-315" aria-hidden="true" tabindex="-1"></a>      temp_rf[combined_mask, matched_cols] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb102-316"><a href="#cb102-316" aria-hidden="true" tabindex="-1"></a>      temp_rf[[<span class="st">'Missing'</span>]] <span class="ot">&lt;-</span> combined_mask</span>
<span id="cb102-317"><a href="#cb102-317" aria-hidden="true" tabindex="-1"></a>      formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(formula, <span class="st">" + Missing"</span>)</span>
<span id="cb102-318"><a href="#cb102-318" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb102-319"><a href="#cb102-319" aria-hidden="true" tabindex="-1"></a>    formula <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"Surv(fupca_start_age, c_age, event) ~ "</span>, <span class="fu">sub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">+"</span>, <span class="st">""</span>, formula))</span>
<span id="cb102-320"><a href="#cb102-320" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-321"><a href="#cb102-321" aria-hidden="true" tabindex="-1"></a>    formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(formula)</span>
<span id="cb102-322"><a href="#cb102-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-323"><a href="#cb102-323" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> { <span class="co"># Fitting a categorical variable without trend</span></span>
<span id="cb102-324"><a href="#cb102-324" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if(!is.null(rfac$realname)) {</span></span>
<span id="cb102-325"><a href="#cb102-325" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   colnames(temp_rf)[1] &lt;- rfac$realname</span></span>
<span id="cb102-326"><a href="#cb102-326" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   rf &lt;- rfac$realname</span></span>
<span id="cb102-327"><a href="#cb102-327" aria-hidden="true" tabindex="-1"></a>    <span class="co"># }</span></span>
<span id="cb102-328"><a href="#cb102-328" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-329"><a href="#cb102-329" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Unordering the factor</span></span>
<span id="cb102-330"><a href="#cb102-330" aria-hidden="true" tabindex="-1"></a>    temp_rf[[rf]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(temp_rf[[rf]], <span class="at">levels =</span> <span class="fu">levels</span>(temp_rf[[rf]]), <span class="at">ordered =</span> <span class="cn">FALSE</span>)</span>
<span id="cb102-331"><a href="#cb102-331" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-332"><a href="#cb102-332" aria-hidden="true" tabindex="-1"></a>    temp_rf <span class="ot">&lt;-</span> <span class="fu">dummy_cols</span>(temp_rf, <span class="at">select_columns =</span> rf, <span class="at">remove_selected_columns =</span> <span class="cn">FALSE</span>,<span class="at">remove_first_dummy=</span><span class="cn">TRUE</span>,<span class="at">ignore_na=</span><span class="cn">TRUE</span>)</span>
<span id="cb102-333"><a href="#cb102-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-334"><a href="#cb102-334" aria-hidden="true" tabindex="-1"></a>    formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste0</span>(<span class="st">"Surv(fupca_start_age, c_age, event) ~ "</span>, <span class="fu">paste0</span>(<span class="st">"`"</span>, <span class="fu">names</span>(temp_rf)[<span class="fu">grepl</span>(<span class="fu">paste0</span>(<span class="st">"^"</span>, rf, <span class="st">"_"</span>), <span class="fu">names</span>(temp_rf))], <span class="st">"`"</span>, <span class="at">collapse =</span> <span class="st">" + "</span>)))</span>
<span id="cb102-335"><a href="#cb102-335" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-336"><a href="#cb102-336" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb102-337"><a href="#cb102-337" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-338"><a href="#cb102-338" aria-hidden="true" tabindex="-1"></a>  cox_model <span class="ot">&lt;-</span> <span class="fu">coxph</span>(formula, <span class="at">data =</span> temp_rf)</span>
<span id="cb102-339"><a href="#cb102-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-340"><a href="#cb102-340" aria-hidden="true" tabindex="-1"></a>  exp_coef <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">coef</span>(cox_model))</span>
<span id="cb102-341"><a href="#cb102-341" aria-hidden="true" tabindex="-1"></a>  conf_int <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">confint</span>(cox_model))</span>
<span id="cb102-342"><a href="#cb102-342" aria-hidden="true" tabindex="-1"></a>  conf_int_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(conf_int), <span class="cf">function</span>(i) conf_int[i, ])</span>
<span id="cb102-343"><a href="#cb102-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(conf_int_list) <span class="ot">&lt;-</span> <span class="fu">rownames</span>(conf_int)</span>
<span id="cb102-344"><a href="#cb102-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-345"><a href="#cb102-345" aria-hidden="true" tabindex="-1"></a>  p_values <span class="ot">&lt;-</span> <span class="fu">summary</span>(cox_model)<span class="sc">$</span>coefficients[, <span class="st">"Pr(&gt;|z|)"</span>]</span>
<span id="cb102-346"><a href="#cb102-346" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-347"><a href="#cb102-347" aria-hidden="true" tabindex="-1"></a>  <span class="co">#variable_names &lt;- str_match(names(exp_coef), "(?:\\w+:)?`?([^`:]+)`?$")[, 2]</span></span>
<span id="cb102-348"><a href="#cb102-348" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-349"><a href="#cb102-349" aria-hidden="true" tabindex="-1"></a>  before_colon <span class="ot">&lt;-</span> <span class="fu">str_match</span>(<span class="fu">names</span>(exp_coef), <span class="st">"([^:]+)"</span>)[, <span class="dv">1</span>]</span>
<span id="cb102-350"><a href="#cb102-350" aria-hidden="true" tabindex="-1"></a>  after_colon <span class="ot">&lt;-</span> <span class="fu">str_match</span>(<span class="fu">names</span>(exp_coef), <span class="st">".*?:.*?`?([^`:]+)`?$"</span>)[, <span class="dv">2</span>]</span>
<span id="cb102-351"><a href="#cb102-351" aria-hidden="true" tabindex="-1"></a>  variable_names <span class="ot">&lt;-</span> after_colon</span>
<span id="cb102-352"><a href="#cb102-352" aria-hidden="true" tabindex="-1"></a>  variable_names[<span class="fu">is.na</span>(variable_names)] <span class="ot">&lt;-</span> before_colon[<span class="fu">is.na</span>(variable_names)]</span>
<span id="cb102-353"><a href="#cb102-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-354"><a href="#cb102-354" aria-hidden="true" tabindex="-1"></a>  result_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Term =</span> <span class="fu">names</span>(exp_coef), </span>
<span id="cb102-355"><a href="#cb102-355" aria-hidden="true" tabindex="-1"></a>                            <span class="at">Group_Name =</span> <span class="cn">NA</span>,</span>
<span id="cb102-356"><a href="#cb102-356" aria-hidden="true" tabindex="-1"></a>                            <span class="at">HR =</span> exp_coef, </span>
<span id="cb102-357"><a href="#cb102-357" aria-hidden="true" tabindex="-1"></a>                            <span class="at">lowerCI =</span> <span class="cn">NA</span>,</span>
<span id="cb102-358"><a href="#cb102-358" aria-hidden="true" tabindex="-1"></a>                            <span class="at">upperCI =</span> <span class="cn">NA</span>,</span>
<span id="cb102-359"><a href="#cb102-359" aria-hidden="true" tabindex="-1"></a>                            <span class="at">pValue =</span> <span class="cn">NA</span>,</span>
<span id="cb102-360"><a href="#cb102-360" aria-hidden="true" tabindex="-1"></a>                            <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb102-361"><a href="#cb102-361" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-362"><a href="#cb102-362" aria-hidden="true" tabindex="-1"></a>  result_df<span class="sc">$</span>Reference_Group <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">list</span>(<span class="fu">list</span>()), <span class="fu">nrow</span>(result_df))</span>
<span id="cb102-363"><a href="#cb102-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-364"><a href="#cb102-364" aria-hidden="true" tabindex="-1"></a>                     </span>
<span id="cb102-365"><a href="#cb102-365" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(variable_names)) {</span>
<span id="cb102-366"><a href="#cb102-366" aria-hidden="true" tabindex="-1"></a>    result_df<span class="sc">$</span>Term[i] <span class="ot">&lt;-</span> (<span class="fu">names</span>(exp_coef)[i])</span>
<span id="cb102-367"><a href="#cb102-367" aria-hidden="true" tabindex="-1"></a>    result_df<span class="sc">$</span>Group_Name[i] <span class="ot">&lt;-</span> rfac<span class="sc">$</span>realname</span>
<span id="cb102-368"><a href="#cb102-368" aria-hidden="true" tabindex="-1"></a>    result_df<span class="sc">$</span>HR[i] <span class="ot">&lt;-</span> exp_coef[i]</span>
<span id="cb102-369"><a href="#cb102-369" aria-hidden="true" tabindex="-1"></a>    result_df<span class="sc">$</span>lowerCI[i] <span class="ot">&lt;-</span> conf_int[i,<span class="dv">1</span>]</span>
<span id="cb102-370"><a href="#cb102-370" aria-hidden="true" tabindex="-1"></a>    result_df<span class="sc">$</span>upperCI[i] <span class="ot">&lt;-</span> conf_int[i,<span class="dv">2</span>]</span>
<span id="cb102-371"><a href="#cb102-371" aria-hidden="true" tabindex="-1"></a>    result_df<span class="sc">$</span>pValue[i] <span class="ot">&lt;-</span> p_values[i]</span>
<span id="cb102-372"><a href="#cb102-372" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(variable_names[i])) {</span>
<span id="cb102-373"><a href="#cb102-373" aria-hidden="true" tabindex="-1"></a>          variable_names_extracted <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">"_[^_]*$"</span>, <span class="st">""</span>, variable_names[i])</span>
<span id="cb102-374"><a href="#cb102-374" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.na</span>(after_colon[i])) {</span>
<span id="cb102-375"><a href="#cb102-375" aria-hidden="true" tabindex="-1"></a>            <span class="co">#variable &lt;- before_colon[i]</span></span>
<span id="cb102-376"><a href="#cb102-376" aria-hidden="true" tabindex="-1"></a>            result_df<span class="sc">$</span>Reference_Group[[i]] <span class="ot">&lt;-</span> <span class="fu">c</span>(result_df<span class="sc">$</span>Reference_Group[[i]], <span class="fu">list</span>(before_colon[i]))</span>
<span id="cb102-377"><a href="#cb102-377" aria-hidden="true" tabindex="-1"></a>          } <span class="co">#else {</span></span>
<span id="cb102-378"><a href="#cb102-378" aria-hidden="true" tabindex="-1"></a>            <span class="co">#variable &lt;- ifelse(!is.na(rfac$realname), rfac$realname, rf)</span></span>
<span id="cb102-379"><a href="#cb102-379" aria-hidden="true" tabindex="-1"></a>          <span class="co">#}</span></span>
<span id="cb102-380"><a href="#cb102-380" aria-hidden="true" tabindex="-1"></a>      <span class="co">#  if(is.factor(temp_rf[[rf]])) {</span></span>
<span id="cb102-381"><a href="#cb102-381" aria-hidden="true" tabindex="-1"></a>          factor_group <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.factor</span>(temp_rf[[rf]]) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>reference_level), rfac<span class="sc">$</span>reference_level, <span class="fu">ifelse</span>(<span class="fu">is.factor</span>(temp_rf[[rf]]), </span>
<span id="cb102-382"><a href="#cb102-382" aria-hidden="true" tabindex="-1"></a>                                                                                                  <span class="fu">levels</span>(temp_rf[[rf]])[<span class="dv">1</span>], <span class="cn">NA</span>))</span>
<span id="cb102-383"><a href="#cb102-383" aria-hidden="true" tabindex="-1"></a>       <span class="co"># } else {</span></span>
<span id="cb102-384"><a href="#cb102-384" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span>(<span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>interactions) <span class="sc">&amp;&amp;</span> <span class="sc">!</span><span class="fu">is.null</span>(rfac<span class="sc">$</span>interactions[[<span class="fu">gsub</span>(<span class="st">"`"</span>, <span class="st">""</span>, variable_names_extracted)]]<span class="sc">$</span>reference_level)) {</span>
<span id="cb102-385"><a href="#cb102-385" aria-hidden="true" tabindex="-1"></a>           ref_level <span class="ot">&lt;-</span> rfac<span class="sc">$</span>interactions[[<span class="fu">gsub</span>(<span class="st">"`"</span>, <span class="st">""</span>, variable_names_extracted)]]<span class="sc">$</span>reference_level</span>
<span id="cb102-386"><a href="#cb102-386" aria-hidden="true" tabindex="-1"></a>           factor_group <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">class</span>(ref_level)<span class="sc">==</span><span class="st">"function"</span>, </span>
<span id="cb102-387"><a href="#cb102-387" aria-hidden="true" tabindex="-1"></a>                                              <span class="fu">round</span>(<span class="fu">ref_level</span>(dataset_surv_rf[[orig_on]]), <span class="dv">2</span>),</span>
<span id="cb102-388"><a href="#cb102-388" aria-hidden="true" tabindex="-1"></a>                                              ref_level)</span>
<span id="cb102-389"><a href="#cb102-389" aria-hidden="true" tabindex="-1"></a>        <span class="co">#    }</span></span>
<span id="cb102-390"><a href="#cb102-390" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb102-391"><a href="#cb102-391" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb102-392"><a href="#cb102-392" aria-hidden="true" tabindex="-1"></a>          <span class="co">#result_df$Reference_Group[[i]] &lt;- list(variable, factor_group)</span></span>
<span id="cb102-393"><a href="#cb102-393" aria-hidden="true" tabindex="-1"></a>          result_df<span class="sc">$</span>Reference_Group[[i]] <span class="ot">&lt;-</span> <span class="fu">c</span>(result_df<span class="sc">$</span>Reference_Group[[i]], <span class="fu">list</span>(factor_group))</span>
<span id="cb102-394"><a href="#cb102-394" aria-hidden="true" tabindex="-1"></a>     }  <span class="co">#else {</span></span>
<span id="cb102-395"><a href="#cb102-395" aria-hidden="true" tabindex="-1"></a>        <span class="co"># result_df$Variable[i] &lt;- ifelse(!is.na(rfac$realname), rfac$realname, rf)</span></span>
<span id="cb102-396"><a href="#cb102-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-397"><a href="#cb102-397" aria-hidden="true" tabindex="-1"></a>    <span class="co"># }</span></span>
<span id="cb102-398"><a href="#cb102-398" aria-hidden="true" tabindex="-1"></a>   <span class="co"># result_df$Baseline_group[i] &lt;- ifelse(is.factor(temp_rf[[rf]]) &amp; !is.null(rfac$reference_level), rfac$reference_level, ifelse(is.factor(temp_rf[[rf]]), </span></span>
<span id="cb102-399"><a href="#cb102-399" aria-hidden="true" tabindex="-1"></a>   <span class="co">#                                                                                                 levels(temp_rf[[rf]])[1], NA))</span></span>
<span id="cb102-400"><a href="#cb102-400" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb102-401"><a href="#cb102-401" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb102-402"><a href="#cb102-402" aria-hidden="true" tabindex="-1"></a>  result_df <span class="ot">&lt;-</span> result_df <span class="sc">%&gt;%</span></span>
<span id="cb102-403"><a href="#cb102-403" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">grepl</span>(<span class="st">"Missing(`?)$"</span>, Term, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>), <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="co"># Rearrange to put "Missing" terms at the end.</span></span>
<span id="cb102-404"><a href="#cb102-404" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-405"><a href="#cb102-405" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb102-406"><a href="#cb102-406" aria-hidden="true" tabindex="-1"></a>   uni_results_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(uni_results_df, result_df)</span>
<span id="cb102-407"><a href="#cb102-407" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb102-408"><a href="#cb102-408" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Adding to multivariate formula and df:</span></span>
<span id="cb102-409"><a href="#cb102-409" aria-hidden="true" tabindex="-1"></a>   univariate_model_terms <span class="ot">&lt;-</span> <span class="fu">c</span>(univariate_model_terms, <span class="fu">strsplit</span>(<span class="fu">as.character</span>(formula), <span class="st">"~"</span>, <span class="at">fixed =</span> <span class="cn">TRUE</span>)[<span class="dv">3</span>])</span>
<span id="cb102-410"><a href="#cb102-410" aria-hidden="true" tabindex="-1"></a>   <span class="fu">names</span>(univariate_model_terms)[<span class="fu">length</span>(univariate_model_terms)] <span class="ot">&lt;-</span> rfac<span class="sc">$</span>realname</span>
<span id="cb102-411"><a href="#cb102-411" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-412"><a href="#cb102-412" aria-hidden="true" tabindex="-1"></a>   combined_analysis_df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(combined_analysis_df, temp_rf <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">'fupca_start_age'</span>, <span class="st">'c_age'</span>, <span class="st">'event'</span>)))</span>
<span id="cb102-413"><a href="#cb102-413" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-414"><a href="#cb102-414" aria-hidden="true" tabindex="-1"></a>  <span class="co"># If the parent variable is a factor then:</span></span>
<span id="cb102-415"><a href="#cb102-415" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   if(!is.null(rfac$reference_level)) =&gt; rfac$reference_level</span></span>
<span id="cb102-416"><a href="#cb102-416" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   else =&gt; levels(temp_rf[[rf]])[1]</span></span>
<span id="cb102-417"><a href="#cb102-417" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>[1] “Log for variable ‘PhysMetTotalLog2’: this is a continuous variable and you did not configure a trend for itself, thus it will be auto-configured.” [1] “Warning for variable ‘R1menopause’: you have not specified a missing group (within a trend variable); complete case analysis will be performed.”</p>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>combined_analysis_df <span class="ot">&lt;-</span> <span class="fu">cbind</span>(combined_analysis_df, dataset_surv_rf <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">'fupca_start_age'</span>, <span class="st">'c_age'</span>, <span class="st">'event'</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="multivariate-analysis" class="level2">
<h2 class="anchored" data-anchor-id="multivariate-analysis">Multivariate analysis</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding on survival information</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>multivariate_formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(<span class="fu">paste0</span>(<span class="st">'Surv(fupca_start_age, c_age, event) ~ '</span>, <span class="fu">paste</span>(univariate_model_terms, <span class="at">collapse =</span> <span class="st">"+"</span>)))</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>mult_out <span class="ot">&lt;-</span> <span class="fu">coxph</span>(multivariate_formula, combined_analysis_df)</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>coef_df <span class="ot">&lt;-</span> <span class="fu">summary</span>(mult_out)<span class="sc">$</span>coefficients</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>exp_coef <span class="ot">&lt;-</span> <span class="fu">exp</span>(coef_df[, <span class="st">"coef"</span>])</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>conf_int <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">confint</span>(mult_out))</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>p_values <span class="ot">&lt;-</span> <span class="fu">summary</span>(mult_out)<span class="sc">$</span>coefficients[, <span class="st">"Pr(&gt;|z|)"</span>]</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>mult_results_df <span class="ot">&lt;-</span> uni_results_df</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(mult_results_df)) {</span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>  term <span class="ot">&lt;-</span> mult_results_df<span class="sc">$</span>Term[i]</span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (term <span class="sc">%in%</span> <span class="fu">rownames</span>(coef_df)) {</span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>    mult_results_df<span class="sc">$</span>HR[i] <span class="ot">&lt;-</span> exp_coef[term]</span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>    mult_results_df<span class="sc">$</span>lowerCI[i] <span class="ot">&lt;-</span> conf_int[term, <span class="dv">1</span>]</span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a>    mult_results_df<span class="sc">$</span>upperCI[i] <span class="ot">&lt;-</span> conf_int[term, <span class="dv">2</span>]</span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a>    mult_results_df<span class="sc">$</span>pValue[i] <span class="ot">&lt;-</span> p_values[term]</span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb104-22"><a href="#cb104-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb104-23"><a href="#cb104-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-24"><a href="#cb104-24" aria-hidden="true" tabindex="-1"></a><span class="co">#head(mult_results_df)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom sorting function</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>sort_terms <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(Group_Name, <span class="fu">grepl</span>(<span class="st">"Missing[`']?$"</span>, Term), Term)</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge the data frames</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>  uni_results_df <span class="sc">%&gt;%</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">ifelse</span>(. <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"Group_Name"</span>, <span class="st">"Reference_Group"</span>), ., <span class="fu">paste0</span>(., <span class="st">"_uni"</span>))),</span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>  mult_results_df <span class="sc">%&gt;%</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">ifelse</span>(. <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"Group_Name"</span>, <span class="st">"Reference_Group"</span>), ., <span class="fu">paste0</span>(., <span class="st">"_mult"</span>))),</span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"Group_Name"</span>, <span class="st">"Reference_Group"</span>)</span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-16"><a href="#cb105-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove existing backticks and then envelop in backticks</span></span>
<span id="cb105-17"><a href="#cb105-17" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> combined_df <span class="sc">%&gt;%</span></span>
<span id="cb105-18"><a href="#cb105-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Term =</span> <span class="fu">str_replace_all</span>(Term, <span class="st">"`"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-19"><a href="#cb105-19" aria-hidden="true" tabindex="-1"></a>           <span class="fu">str_c</span>(<span class="st">"`"</span>, ., <span class="st">"`"</span>))</span>
<span id="cb105-20"><a href="#cb105-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-21"><a href="#cb105-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Split and sort the combined data frame by Group_Name</span></span>
<span id="cb105-22"><a href="#cb105-22" aria-hidden="true" tabindex="-1"></a>grouped_sorted_dfs <span class="ot">&lt;-</span> <span class="fu">split</span>(combined_df, combined_df<span class="sc">$</span>Group_Name) <span class="sc">%&gt;%</span></span>
<span id="cb105-23"><a href="#cb105-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(sort_terms)</span>
<span id="cb105-24"><a href="#cb105-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-25"><a href="#cb105-25" aria-hidden="true" tabindex="-1"></a>create_gt_table <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_name) {</span>
<span id="cb105-26"><a href="#cb105-26" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Group_Name)</span>
<span id="cb105-27"><a href="#cb105-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-28"><a href="#cb105-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(df) <span class="sc">%&gt;%</span></span>
<span id="cb105-29"><a href="#cb105-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_header</span>(</span>
<span id="cb105-30"><a href="#cb105-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">sprintf</span>(<span class="st">"Group: %s"</span>, group_name)</span>
<span id="cb105-31"><a href="#cb105-31" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb105-32"><a href="#cb105-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(</span>
<span id="cb105-33"><a href="#cb105-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="st">"Univariable Analysis"</span>,</span>
<span id="cb105-34"><a href="#cb105-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="fu">c</span>(<span class="fu">grep</span>(<span class="st">"_uni$"</span>, <span class="fu">names</span>(df), <span class="at">value =</span> <span class="cn">TRUE</span>))</span>
<span id="cb105-35"><a href="#cb105-35" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb105-36"><a href="#cb105-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_spanner</span>(</span>
<span id="cb105-37"><a href="#cb105-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">label =</span> <span class="st">"Multivariable Analysis"</span>,</span>
<span id="cb105-38"><a href="#cb105-38" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="fu">c</span>(<span class="fu">grep</span>(<span class="st">"_mult$"</span>, <span class="fu">names</span>(df), <span class="at">value =</span> <span class="cn">TRUE</span>))</span>
<span id="cb105-39"><a href="#cb105-39" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb105-40"><a href="#cb105-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(</span>
<span id="cb105-41"><a href="#cb105-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">Term =</span> <span class="st">"Term"</span>,</span>
<span id="cb105-42"><a href="#cb105-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">Reference_Group =</span> <span class="st">"Reference Group"</span>,</span>
<span id="cb105-43"><a href="#cb105-43" aria-hidden="true" tabindex="-1"></a>      <span class="at">HR_uni =</span> <span class="st">"HR"</span>,</span>
<span id="cb105-44"><a href="#cb105-44" aria-hidden="true" tabindex="-1"></a>      <span class="at">lowerCI_uni =</span> <span class="st">"Lower CI"</span>,</span>
<span id="cb105-45"><a href="#cb105-45" aria-hidden="true" tabindex="-1"></a>      <span class="at">upperCI_uni =</span> <span class="st">"Upper CI"</span>,</span>
<span id="cb105-46"><a href="#cb105-46" aria-hidden="true" tabindex="-1"></a>      <span class="at">pValue_uni =</span> <span class="st">"p-Value"</span>,</span>
<span id="cb105-47"><a href="#cb105-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">HR_mult =</span> <span class="st">"HR"</span>,</span>
<span id="cb105-48"><a href="#cb105-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">lowerCI_mult =</span> <span class="st">"Lower CI"</span>,</span>
<span id="cb105-49"><a href="#cb105-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">upperCI_mult =</span> <span class="st">"Upper CI"</span>,</span>
<span id="cb105-50"><a href="#cb105-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">pValue_mult =</span> <span class="st">"p-Value"</span></span>
<span id="cb105-51"><a href="#cb105-51" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb105-52"><a href="#cb105-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fmt_number</span>(</span>
<span id="cb105-53"><a href="#cb105-53" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="fu">c</span>(<span class="fu">grep</span>(<span class="st">"HR|lowerCI|upperCI|pValue"</span>, <span class="fu">names</span>(df), <span class="at">value =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb105-54"><a href="#cb105-54" aria-hidden="true" tabindex="-1"></a>      <span class="at">decimals =</span> <span class="dv">4</span></span>
<span id="cb105-55"><a href="#cb105-55" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb105-56"><a href="#cb105-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"Reference_Group"</span>),</span>
<span id="cb105-57"><a href="#cb105-57" aria-hidden="true" tabindex="-1"></a>      <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb105-58"><a href="#cb105-58" aria-hidden="true" tabindex="-1"></a>     <span class="fu">fmt</span>(</span>
<span id="cb105-59"><a href="#cb105-59" aria-hidden="true" tabindex="-1"></a>      <span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"pValue_uni"</span>, <span class="st">"pValue_mult"</span>),</span>
<span id="cb105-60"><a href="#cb105-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">fns =</span> <span class="cf">function</span>(x) {</span>
<span id="cb105-61"><a href="#cb105-61" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ifelse</span>(x <span class="sc">&lt;</span> <span class="fl">0.001</span>, <span class="fu">formatC</span>(x, <span class="at">format =</span> <span class="st">"e"</span>, <span class="at">digits =</span> <span class="dv">2</span>),</span>
<span id="cb105-62"><a href="#cb105-62" aria-hidden="true" tabindex="-1"></a>               <span class="fu">formatC</span>(x, <span class="at">format =</span> <span class="st">"f"</span>, <span class="at">digits =</span> <span class="dv">4</span>))</span>
<span id="cb105-63"><a href="#cb105-63" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb105-64"><a href="#cb105-64" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb105-65"><a href="#cb105-65" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tab_style</span>(</span>
<span id="cb105-66"><a href="#cb105-66" aria-hidden="true" tabindex="-1"></a>      <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb105-67"><a href="#cb105-67" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>)</span>
<span id="cb105-68"><a href="#cb105-68" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb105-69"><a href="#cb105-69" aria-hidden="true" tabindex="-1"></a>      <span class="at">locations =</span> <span class="fu">cells_column_labels</span>(<span class="at">columns =</span> <span class="fu">everything</span>())</span>
<span id="cb105-70"><a href="#cb105-70" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb105-71"><a href="#cb105-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_style</span>(</span>
<span id="cb105-72"><a href="#cb105-72" aria-hidden="true" tabindex="-1"></a>      <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="cb105-73"><a href="#cb105-73" aria-hidden="true" tabindex="-1"></a>        <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>)</span>
<span id="cb105-74"><a href="#cb105-74" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb105-75"><a href="#cb105-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> <span class="st">"Term"</span>)</span>
<span id="cb105-76"><a href="#cb105-76" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb105-77"><a href="#cb105-77" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb105-78"><a href="#cb105-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-79"><a href="#cb105-79" aria-hidden="true" tabindex="-1"></a>gt_tables <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="fu">names</span>(grouped_sorted_dfs), <span class="cf">function</span>(group_name) {</span>
<span id="cb105-80"><a href="#cb105-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">create_gt_table</span>(grouped_sorted_dfs[[group_name]], group_name)</span>
<span id="cb105-81"><a href="#cb105-81" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb105-82"><a href="#cb105-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-83"><a href="#cb105-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the tables</span></span>
<span id="cb105-84"><a href="#cb105-84" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (table <span class="cf">in</span> gt_tables) {</span>
<span id="cb105-85"><a href="#cb105-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(table)</span>
<span id="cb105-86"><a href="#cb105-86" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="psuavxytcx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#psuavxytcx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#psuavxytcx thead, #psuavxytcx tbody, #psuavxytcx tfoot, #psuavxytcx tr, #psuavxytcx td, #psuavxytcx th {
  border-style: none;
}

#psuavxytcx p {
  margin: 0;
  padding: 0;
}

#psuavxytcx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#psuavxytcx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#psuavxytcx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#psuavxytcx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#psuavxytcx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#psuavxytcx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#psuavxytcx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#psuavxytcx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#psuavxytcx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#psuavxytcx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#psuavxytcx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#psuavxytcx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#psuavxytcx .gt_spanner_row {
  border-bottom-style: hidden;
}

#psuavxytcx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#psuavxytcx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#psuavxytcx .gt_from_md > :first-child {
  margin-top: 0;
}

#psuavxytcx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#psuavxytcx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#psuavxytcx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#psuavxytcx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#psuavxytcx .gt_row_group_first td {
  border-top-width: 2px;
}

#psuavxytcx .gt_row_group_first th {
  border-top-width: 2px;
}

#psuavxytcx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#psuavxytcx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#psuavxytcx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#psuavxytcx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#psuavxytcx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#psuavxytcx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#psuavxytcx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#psuavxytcx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#psuavxytcx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#psuavxytcx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#psuavxytcx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#psuavxytcx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#psuavxytcx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#psuavxytcx .gt_left {
  text-align: left;
}

#psuavxytcx .gt_center {
  text-align: center;
}

#psuavxytcx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#psuavxytcx .gt_font_normal {
  font-weight: normal;
}

#psuavxytcx .gt_font_bold {
  font-weight: bold;
}

#psuavxytcx .gt_font_italic {
  font-style: italic;
}

#psuavxytcx .gt_super {
  font-size: 65%;
}

#psuavxytcx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#psuavxytcx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#psuavxytcx .gt_indent_1 {
  text-indent: 5px;
}

#psuavxytcx .gt_indent_2 {
  text-indent: 10px;
}

#psuavxytcx .gt_indent_3 {
  text-indent: 15px;
}

#psuavxytcx .gt_indent_4 {
  text-indent: 20px;
}

#psuavxytcx .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: ACORN score
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>ACORN score</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Wealthy achievers
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9575
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9317
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
0.9840
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0018
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9690
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9420
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
0.9967
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.0288
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>ACORN score_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Wealthy achievers
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.7052
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.4588
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0840
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1113
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.7049
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.4585
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0835
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.1109
</td>
</tr>
</tbody>

</table>
</div>
<div id="nkgvoriyot" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#nkgvoriyot table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nkgvoriyot thead, #nkgvoriyot tbody, #nkgvoriyot tfoot, #nkgvoriyot tr, #nkgvoriyot td, #nkgvoriyot th {
  border-style: none;
}

#nkgvoriyot p {
  margin: 0;
  padding: 0;
}

#nkgvoriyot .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nkgvoriyot .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nkgvoriyot .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nkgvoriyot .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nkgvoriyot .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nkgvoriyot .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nkgvoriyot .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nkgvoriyot .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nkgvoriyot .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nkgvoriyot .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nkgvoriyot .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nkgvoriyot .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nkgvoriyot .gt_spanner_row {
  border-bottom-style: hidden;
}

#nkgvoriyot .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nkgvoriyot .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nkgvoriyot .gt_from_md > :first-child {
  margin-top: 0;
}

#nkgvoriyot .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nkgvoriyot .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nkgvoriyot .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nkgvoriyot .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nkgvoriyot .gt_row_group_first td {
  border-top-width: 2px;
}

#nkgvoriyot .gt_row_group_first th {
  border-top-width: 2px;
}

#nkgvoriyot .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nkgvoriyot .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nkgvoriyot .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nkgvoriyot .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nkgvoriyot .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nkgvoriyot .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nkgvoriyot .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nkgvoriyot .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nkgvoriyot .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nkgvoriyot .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nkgvoriyot .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nkgvoriyot .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nkgvoriyot .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nkgvoriyot .gt_left {
  text-align: left;
}

#nkgvoriyot .gt_center {
  text-align: center;
}

#nkgvoriyot .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nkgvoriyot .gt_font_normal {
  font-weight: normal;
}

#nkgvoriyot .gt_font_bold {
  font-weight: bold;
}

#nkgvoriyot .gt_font_italic {
  font-style: italic;
}

#nkgvoriyot .gt_super {
  font-size: 65%;
}

#nkgvoriyot .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nkgvoriyot .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nkgvoriyot .gt_indent_1 {
  text-indent: 5px;
}

#nkgvoriyot .gt_indent_2 {
  text-indent: 10px;
}

#nkgvoriyot .gt_indent_3 {
  text-indent: 15px;
}

#nkgvoriyot .gt_indent_4 {
  text-indent: 20px;
}

#nkgvoriyot .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Age at menarche
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Trend by age (per year)</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
13
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9785
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9560
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0016
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0680
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9683
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9455
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
0.9917
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.0082
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Trend by age (per year)_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
13
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9655
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.8641
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0787
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.5344
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9754
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.8728
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0899
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.6597
</td>
</tr>
</tbody>

</table>
</div>
<div id="bsjcweupoi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#bsjcweupoi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bsjcweupoi thead, #bsjcweupoi tbody, #bsjcweupoi tfoot, #bsjcweupoi tr, #bsjcweupoi td, #bsjcweupoi th {
  border-style: none;
}

#bsjcweupoi p {
  margin: 0;
  padding: 0;
}

#bsjcweupoi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bsjcweupoi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bsjcweupoi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bsjcweupoi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bsjcweupoi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bsjcweupoi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bsjcweupoi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bsjcweupoi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bsjcweupoi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bsjcweupoi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bsjcweupoi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bsjcweupoi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bsjcweupoi .gt_spanner_row {
  border-bottom-style: hidden;
}

#bsjcweupoi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bsjcweupoi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bsjcweupoi .gt_from_md > :first-child {
  margin-top: 0;
}

#bsjcweupoi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bsjcweupoi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bsjcweupoi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bsjcweupoi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bsjcweupoi .gt_row_group_first td {
  border-top-width: 2px;
}

#bsjcweupoi .gt_row_group_first th {
  border-top-width: 2px;
}

#bsjcweupoi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsjcweupoi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bsjcweupoi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bsjcweupoi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bsjcweupoi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsjcweupoi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bsjcweupoi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bsjcweupoi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bsjcweupoi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bsjcweupoi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bsjcweupoi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsjcweupoi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bsjcweupoi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bsjcweupoi .gt_left {
  text-align: left;
}

#bsjcweupoi .gt_center {
  text-align: center;
}

#bsjcweupoi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bsjcweupoi .gt_font_normal {
  font-weight: normal;
}

#bsjcweupoi .gt_font_bold {
  font-weight: bold;
}

#bsjcweupoi .gt_font_italic {
  font-style: italic;
}

#bsjcweupoi .gt_super {
  font-size: 65%;
}

#bsjcweupoi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bsjcweupoi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bsjcweupoi .gt_indent_1 {
  text-indent: 5px;
}

#bsjcweupoi .gt_indent_2 {
  text-indent: 10px;
}

#bsjcweupoi .gt_indent_3 {
  text-indent: 15px;
}

#bsjcweupoi .gt_indent_4 {
  text-indent: 20px;
}

#bsjcweupoi .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Alcohol
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>CurrentPast:Alcohol consumption (per 10 units)</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
CurrentPast, 10
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0445
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0196
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0701
</td>
<td headers="pValue_uni" class="gt_row gt_right">
4.16e-04
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0345
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.0086
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0612
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.0089
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Current</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.1246
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0174
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2431
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0216
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0624
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9592
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.1767
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.2458
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Past</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0957
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9647
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2444
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1596
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0504
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9241
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.1938
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.4519
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>CurrentPast:Alcohol consumption (per 10 units)_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
CurrentPast, 10
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.1005
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9559
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2671
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1827
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.1064
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9604
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.2746
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.1613
</td>
</tr>
</tbody>

</table>
</div>
<div id="oehhoazuzj" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#oehhoazuzj table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#oehhoazuzj thead, #oehhoazuzj tbody, #oehhoazuzj tfoot, #oehhoazuzj tr, #oehhoazuzj td, #oehhoazuzj th {
  border-style: none;
}

#oehhoazuzj p {
  margin: 0;
  padding: 0;
}

#oehhoazuzj .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#oehhoazuzj .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#oehhoazuzj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#oehhoazuzj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#oehhoazuzj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oehhoazuzj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oehhoazuzj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oehhoazuzj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#oehhoazuzj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#oehhoazuzj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#oehhoazuzj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#oehhoazuzj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#oehhoazuzj .gt_spanner_row {
  border-bottom-style: hidden;
}

#oehhoazuzj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#oehhoazuzj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#oehhoazuzj .gt_from_md > :first-child {
  margin-top: 0;
}

#oehhoazuzj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#oehhoazuzj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#oehhoazuzj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#oehhoazuzj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#oehhoazuzj .gt_row_group_first td {
  border-top-width: 2px;
}

#oehhoazuzj .gt_row_group_first th {
  border-top-width: 2px;
}

#oehhoazuzj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oehhoazuzj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#oehhoazuzj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#oehhoazuzj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oehhoazuzj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oehhoazuzj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#oehhoazuzj .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#oehhoazuzj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#oehhoazuzj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oehhoazuzj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oehhoazuzj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oehhoazuzj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oehhoazuzj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oehhoazuzj .gt_left {
  text-align: left;
}

#oehhoazuzj .gt_center {
  text-align: center;
}

#oehhoazuzj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#oehhoazuzj .gt_font_normal {
  font-weight: normal;
}

#oehhoazuzj .gt_font_bold {
  font-weight: bold;
}

#oehhoazuzj .gt_font_italic {
  font-style: italic;
}

#oehhoazuzj .gt_super {
  font-size: 65%;
}

#oehhoazuzj .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#oehhoazuzj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#oehhoazuzj .gt_indent_1 {
  text-indent: 5px;
}

#oehhoazuzj .gt_indent_2 {
  text-indent: 10px;
}

#oehhoazuzj .gt_indent_3 {
  text-indent: 15px;
}

#oehhoazuzj .gt_indent_4 {
  text-indent: 20px;
}

#oehhoazuzj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Birthweight
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Birthweight</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
3500
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0672
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9965
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.1431
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0631
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0222
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9530
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0964
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.5386
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Birthweight_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
3500
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9966
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9286
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0695
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.9249
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0128
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9434
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0873
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.7246
</td>
</tr>
</tbody>

</table>
</div>
<div id="zhcubmgiem" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#zhcubmgiem table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zhcubmgiem thead, #zhcubmgiem tbody, #zhcubmgiem tfoot, #zhcubmgiem tr, #zhcubmgiem td, #zhcubmgiem th {
  border-style: none;
}

#zhcubmgiem p {
  margin: 0;
  padding: 0;
}

#zhcubmgiem .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zhcubmgiem .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zhcubmgiem .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zhcubmgiem .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zhcubmgiem .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zhcubmgiem .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zhcubmgiem .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zhcubmgiem .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zhcubmgiem .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zhcubmgiem .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zhcubmgiem .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zhcubmgiem .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zhcubmgiem .gt_spanner_row {
  border-bottom-style: hidden;
}

#zhcubmgiem .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zhcubmgiem .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zhcubmgiem .gt_from_md > :first-child {
  margin-top: 0;
}

#zhcubmgiem .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zhcubmgiem .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zhcubmgiem .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zhcubmgiem .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zhcubmgiem .gt_row_group_first td {
  border-top-width: 2px;
}

#zhcubmgiem .gt_row_group_first th {
  border-top-width: 2px;
}

#zhcubmgiem .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zhcubmgiem .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zhcubmgiem .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zhcubmgiem .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zhcubmgiem .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zhcubmgiem .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zhcubmgiem .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zhcubmgiem .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zhcubmgiem .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zhcubmgiem .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zhcubmgiem .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zhcubmgiem .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zhcubmgiem .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zhcubmgiem .gt_left {
  text-align: left;
}

#zhcubmgiem .gt_center {
  text-align: center;
}

#zhcubmgiem .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zhcubmgiem .gt_font_normal {
  font-weight: normal;
}

#zhcubmgiem .gt_font_bold {
  font-weight: bold;
}

#zhcubmgiem .gt_font_italic {
  font-style: italic;
}

#zhcubmgiem .gt_super {
  font-size: 65%;
}

#zhcubmgiem .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zhcubmgiem .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zhcubmgiem .gt_indent_1 {
  text-indent: 5px;
}

#zhcubmgiem .gt_indent_2 {
  text-indent: 10px;
}

#zhcubmgiem .gt_indent_3 {
  text-indent: 15px;
}

#zhcubmgiem .gt_indent_4 {
  text-indent: 20px;
}

#zhcubmgiem .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: BMI at age 20
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Trend by unit BMI increase</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
10
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9694
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9561
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
0.9829
</td>
<td headers="pValue_uni" class="gt_row gt_right">
1.08e-05
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9676
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9536
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
0.9818
</td>
<td headers="pValue_mult" class="gt_row gt_right">
9.46e-06
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Trend by unit BMI increase_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
10
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.6572
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.5500
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
0.7852
</td>
<td headers="pValue_uni" class="gt_row gt_right">
3.78e-06
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.6513
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.5403
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
0.7850
</td>
<td headers="pValue_mult" class="gt_row gt_right">
6.77e-06
</td>
</tr>
</tbody>

</table>
</div>
<div id="ukqqwtndmb" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#ukqqwtndmb table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ukqqwtndmb thead, #ukqqwtndmb tbody, #ukqqwtndmb tfoot, #ukqqwtndmb tr, #ukqqwtndmb td, #ukqqwtndmb th {
  border-style: none;
}

#ukqqwtndmb p {
  margin: 0;
  padding: 0;
}

#ukqqwtndmb .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ukqqwtndmb .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ukqqwtndmb .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ukqqwtndmb .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ukqqwtndmb .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ukqqwtndmb .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ukqqwtndmb .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ukqqwtndmb .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ukqqwtndmb .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ukqqwtndmb .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ukqqwtndmb .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ukqqwtndmb .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ukqqwtndmb .gt_spanner_row {
  border-bottom-style: hidden;
}

#ukqqwtndmb .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ukqqwtndmb .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ukqqwtndmb .gt_from_md > :first-child {
  margin-top: 0;
}

#ukqqwtndmb .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ukqqwtndmb .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ukqqwtndmb .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ukqqwtndmb .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ukqqwtndmb .gt_row_group_first td {
  border-top-width: 2px;
}

#ukqqwtndmb .gt_row_group_first th {
  border-top-width: 2px;
}

#ukqqwtndmb .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ukqqwtndmb .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ukqqwtndmb .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ukqqwtndmb .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ukqqwtndmb .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ukqqwtndmb .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ukqqwtndmb .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ukqqwtndmb .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ukqqwtndmb .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ukqqwtndmb .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ukqqwtndmb .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ukqqwtndmb .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ukqqwtndmb .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ukqqwtndmb .gt_left {
  text-align: left;
}

#ukqqwtndmb .gt_center {
  text-align: center;
}

#ukqqwtndmb .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ukqqwtndmb .gt_font_normal {
  font-weight: normal;
}

#ukqqwtndmb .gt_font_bold {
  font-weight: bold;
}

#ukqqwtndmb .gt_font_italic {
  font-style: italic;
}

#ukqqwtndmb .gt_super {
  font-size: 65%;
}

#ukqqwtndmb .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ukqqwtndmb .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ukqqwtndmb .gt_indent_1 {
  text-indent: 5px;
}

#ukqqwtndmb .gt_indent_2 {
  text-indent: 10px;
}

#ukqqwtndmb .gt_indent_3 {
  text-indent: 15px;
}

#ukqqwtndmb .gt_indent_4 {
  text-indent: 20px;
}

#ukqqwtndmb .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Family history of breast cancer
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Present</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Absent
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.7136
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.5895
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.8473
</td>
<td headers="pValue_uni" class="gt_row gt_right">
7.87e-45
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.6920
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.5691
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.8246
</td>
<td headers="pValue_mult" class="gt_row gt_right">
1.59e-42
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Family history of breast cancer_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Absent
</td>
<td headers="HR_uni" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="pValue_uni" class="gt_row gt_right">
NA
</td>
<td headers="HR_mult" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="pValue_mult" class="gt_row gt_right">
NA
</td>
</tr>
</tbody>

</table>
</div>
<div id="bpwgdweryi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#bpwgdweryi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bpwgdweryi thead, #bpwgdweryi tbody, #bpwgdweryi tfoot, #bpwgdweryi tr, #bpwgdweryi td, #bpwgdweryi th {
  border-style: none;
}

#bpwgdweryi p {
  margin: 0;
  padding: 0;
}

#bpwgdweryi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bpwgdweryi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bpwgdweryi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bpwgdweryi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bpwgdweryi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bpwgdweryi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bpwgdweryi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bpwgdweryi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bpwgdweryi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bpwgdweryi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bpwgdweryi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bpwgdweryi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bpwgdweryi .gt_spanner_row {
  border-bottom-style: hidden;
}

#bpwgdweryi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bpwgdweryi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bpwgdweryi .gt_from_md > :first-child {
  margin-top: 0;
}

#bpwgdweryi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bpwgdweryi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bpwgdweryi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bpwgdweryi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bpwgdweryi .gt_row_group_first td {
  border-top-width: 2px;
}

#bpwgdweryi .gt_row_group_first th {
  border-top-width: 2px;
}

#bpwgdweryi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bpwgdweryi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bpwgdweryi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bpwgdweryi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bpwgdweryi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bpwgdweryi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bpwgdweryi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bpwgdweryi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bpwgdweryi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bpwgdweryi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bpwgdweryi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bpwgdweryi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bpwgdweryi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bpwgdweryi .gt_left {
  text-align: left;
}

#bpwgdweryi .gt_center {
  text-align: center;
}

#bpwgdweryi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bpwgdweryi .gt_font_normal {
  font-weight: normal;
}

#bpwgdweryi .gt_font_bold {
  font-weight: bold;
}

#bpwgdweryi .gt_font_italic {
  font-style: italic;
}

#bpwgdweryi .gt_super {
  font-size: 65%;
}

#bpwgdweryi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bpwgdweryi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bpwgdweryi .gt_indent_1 {
  text-indent: 5px;
}

#bpwgdweryi .gt_indent_2 {
  text-indent: 10px;
}

#bpwgdweryi .gt_indent_3 {
  text-indent: 15px;
}

#bpwgdweryi .gt_indent_4 {
  text-indent: 20px;
}

#bpwgdweryi .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Height at age 20
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Trend by cm height increase</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
165
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.1889
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.1310
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2498
</td>
<td headers="pValue_uni" class="gt_row gt_right">
1.13e-11
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.1590
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.1004
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.2206
</td>
<td headers="pValue_mult" class="gt_row gt_right">
2.42e-08
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Trend by cm height increase_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
165
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.8816
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.4987
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.5583
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.6645
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0302
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.5724
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.8541
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.9209
</td>
</tr>
</tbody>

</table>
</div>
<div id="qbexyedwbv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#qbexyedwbv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qbexyedwbv thead, #qbexyedwbv tbody, #qbexyedwbv tfoot, #qbexyedwbv tr, #qbexyedwbv td, #qbexyedwbv th {
  border-style: none;
}

#qbexyedwbv p {
  margin: 0;
  padding: 0;
}

#qbexyedwbv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qbexyedwbv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qbexyedwbv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qbexyedwbv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qbexyedwbv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qbexyedwbv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qbexyedwbv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qbexyedwbv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qbexyedwbv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qbexyedwbv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qbexyedwbv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qbexyedwbv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qbexyedwbv .gt_spanner_row {
  border-bottom-style: hidden;
}

#qbexyedwbv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qbexyedwbv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qbexyedwbv .gt_from_md > :first-child {
  margin-top: 0;
}

#qbexyedwbv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qbexyedwbv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qbexyedwbv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qbexyedwbv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qbexyedwbv .gt_row_group_first td {
  border-top-width: 2px;
}

#qbexyedwbv .gt_row_group_first th {
  border-top-width: 2px;
}

#qbexyedwbv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qbexyedwbv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qbexyedwbv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qbexyedwbv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qbexyedwbv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qbexyedwbv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qbexyedwbv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qbexyedwbv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qbexyedwbv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qbexyedwbv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qbexyedwbv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qbexyedwbv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qbexyedwbv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qbexyedwbv .gt_left {
  text-align: left;
}

#qbexyedwbv .gt_center {
  text-align: center;
}

#qbexyedwbv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qbexyedwbv .gt_font_normal {
  font-weight: normal;
}

#qbexyedwbv .gt_font_bold {
  font-weight: bold;
}

#qbexyedwbv .gt_font_italic {
  font-style: italic;
}

#qbexyedwbv .gt_super {
  font-size: 65%;
}

#qbexyedwbv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qbexyedwbv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qbexyedwbv .gt_indent_1 {
  text-indent: 5px;
}

#qbexyedwbv .gt_indent_2 {
  text-indent: 10px;
}

#qbexyedwbv .gt_indent_3 {
  text-indent: 15px;
}

#qbexyedwbv .gt_indent_4 {
  text-indent: 20px;
}

#qbexyedwbv .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: History of benign breast disease
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Yes</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
No
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.5063
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.4026
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.6178
</td>
<td headers="pValue_uni" class="gt_row gt_right">
2.31e-29
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.4709
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.3689
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.5805
</td>
<td headers="pValue_mult" class="gt_row gt_right">
6.61e-26
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>History of benign breast disease_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
No
</td>
<td headers="HR_uni" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="pValue_uni" class="gt_row gt_right">
NA
</td>
<td headers="HR_mult" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="pValue_mult" class="gt_row gt_right">
NA
</td>
</tr>
</tbody>

</table>
</div>
<div id="ngorwjyoyg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#ngorwjyoyg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ngorwjyoyg thead, #ngorwjyoyg tbody, #ngorwjyoyg tfoot, #ngorwjyoyg tr, #ngorwjyoyg td, #ngorwjyoyg th {
  border-style: none;
}

#ngorwjyoyg p {
  margin: 0;
  padding: 0;
}

#ngorwjyoyg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ngorwjyoyg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ngorwjyoyg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ngorwjyoyg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ngorwjyoyg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ngorwjyoyg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ngorwjyoyg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ngorwjyoyg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ngorwjyoyg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ngorwjyoyg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ngorwjyoyg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ngorwjyoyg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ngorwjyoyg .gt_spanner_row {
  border-bottom-style: hidden;
}

#ngorwjyoyg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ngorwjyoyg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ngorwjyoyg .gt_from_md > :first-child {
  margin-top: 0;
}

#ngorwjyoyg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ngorwjyoyg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ngorwjyoyg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ngorwjyoyg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ngorwjyoyg .gt_row_group_first td {
  border-top-width: 2px;
}

#ngorwjyoyg .gt_row_group_first th {
  border-top-width: 2px;
}

#ngorwjyoyg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ngorwjyoyg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ngorwjyoyg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ngorwjyoyg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ngorwjyoyg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ngorwjyoyg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ngorwjyoyg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ngorwjyoyg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ngorwjyoyg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ngorwjyoyg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ngorwjyoyg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ngorwjyoyg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ngorwjyoyg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ngorwjyoyg .gt_left {
  text-align: left;
}

#ngorwjyoyg .gt_center {
  text-align: center;
}

#ngorwjyoyg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ngorwjyoyg .gt_font_normal {
  font-weight: normal;
}

#ngorwjyoyg .gt_font_bold {
  font-weight: bold;
}

#ngorwjyoyg .gt_font_italic {
  font-style: italic;
}

#ngorwjyoyg .gt_super {
  font-size: 65%;
}

#ngorwjyoyg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ngorwjyoyg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ngorwjyoyg .gt_indent_1 {
  text-indent: 5px;
}

#ngorwjyoyg .gt_indent_2 {
  text-indent: 10px;
}

#ngorwjyoyg .gt_indent_3 {
  text-indent: 15px;
}

#ngorwjyoyg .gt_indent_4 {
  text-indent: 20px;
}

#ngorwjyoyg .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Menopause status
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Postmenopausal:Age at menopause</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal, 50
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0135
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0032
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0238
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0100
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0131
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.0028
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0235
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.0128
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Postmenopausal:BMI</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal, 25
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0188
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0089
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0289
</td>
<td headers="pValue_uni" class="gt_row gt_right">
1.84e-04
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0320
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.0214
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0427
</td>
<td headers="pValue_mult" class="gt_row gt_right">
2.20e-09
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Postmenopausal:HRT status_Current</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal, Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.4199
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.2685
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.5893
</td>
<td headers="pValue_uni" class="gt_row gt_right">
1.10e-09
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.4067
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.2559
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.5756
</td>
<td headers="pValue_mult" class="gt_row gt_right">
3.67e-09
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Postmenopausal:HRT status_Former</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal, Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9630
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.8690
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0672
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.4720
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9631
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.8686
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0679
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.4755
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Premenopausal:OC status_Current</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Premenopausal, Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.3099
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0184
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.6849
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0355
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.2888
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.0014
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.6587
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.0488
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Premenopausal:OC status_Former</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Premenopausal, Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.2325
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9815
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.5476
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0720
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.1820
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9402
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.4859
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.1521
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Premenopausal</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0658
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.8332
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.3634
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.6121
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.1080
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.8652
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.4188
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.4165
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Postmenopausal:Age at menopause_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal, 50
</td>
<td headers="HR_uni" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="pValue_uni" class="gt_row gt_right">
NA
</td>
<td headers="HR_mult" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="pValue_mult" class="gt_row gt_right">
NA
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Postmenopausal:BMI_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal, 25
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.8606
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.6100
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2144
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.3929
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9344
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.6558
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.3313
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.7070
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Postmenopausal:HRT status_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Postmenopausal, Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9253
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.4397
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.9469
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.8379
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9205
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.4373
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.9374
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.8273
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Premenopausal:OC status_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Premenopausal, Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0786
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.1501
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
7.7526
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.9400
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.1632
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.1618
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
8.3638
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.8806
</td>
</tr>
</tbody>

</table>
</div>
<div id="koeaxcuokv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#koeaxcuokv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#koeaxcuokv thead, #koeaxcuokv tbody, #koeaxcuokv tfoot, #koeaxcuokv tr, #koeaxcuokv td, #koeaxcuokv th {
  border-style: none;
}

#koeaxcuokv p {
  margin: 0;
  padding: 0;
}

#koeaxcuokv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#koeaxcuokv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#koeaxcuokv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#koeaxcuokv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#koeaxcuokv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#koeaxcuokv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#koeaxcuokv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#koeaxcuokv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#koeaxcuokv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#koeaxcuokv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#koeaxcuokv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#koeaxcuokv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#koeaxcuokv .gt_spanner_row {
  border-bottom-style: hidden;
}

#koeaxcuokv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#koeaxcuokv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#koeaxcuokv .gt_from_md > :first-child {
  margin-top: 0;
}

#koeaxcuokv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#koeaxcuokv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#koeaxcuokv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#koeaxcuokv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#koeaxcuokv .gt_row_group_first td {
  border-top-width: 2px;
}

#koeaxcuokv .gt_row_group_first th {
  border-top-width: 2px;
}

#koeaxcuokv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#koeaxcuokv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#koeaxcuokv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#koeaxcuokv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#koeaxcuokv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#koeaxcuokv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#koeaxcuokv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#koeaxcuokv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#koeaxcuokv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#koeaxcuokv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#koeaxcuokv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#koeaxcuokv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#koeaxcuokv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#koeaxcuokv .gt_left {
  text-align: left;
}

#koeaxcuokv .gt_center {
  text-align: center;
}

#koeaxcuokv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#koeaxcuokv .gt_font_normal {
  font-weight: normal;
}

#koeaxcuokv .gt_font_bold {
  font-weight: bold;
}

#koeaxcuokv .gt_font_italic {
  font-style: italic;
}

#koeaxcuokv .gt_super {
  font-size: 65%;
}

#koeaxcuokv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#koeaxcuokv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#koeaxcuokv .gt_indent_1 {
  text-indent: 5px;
}

#koeaxcuokv .gt_indent_2 {
  text-indent: 10px;
}

#koeaxcuokv .gt_indent_3 {
  text-indent: 15px;
}

#koeaxcuokv .gt_indent_4 {
  text-indent: 20px;
}

#koeaxcuokv .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Pregnancies
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Nulliparous</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0848
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9840
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.1959
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1017
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0801
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9780
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.1929
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.1282
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Parous:Age at 1st pregnancy</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous, 25
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0204
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0118
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0290
</td>
<td headers="pValue_uni" class="gt_row gt_right">
2.85e-06
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0207
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.0119
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0296
</td>
<td headers="pValue_mult" class="gt_row gt_right">
3.69e-06
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Parous:Duration of breastfeeding</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous, 0
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9997
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9989
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0006
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.5618
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9996
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9987
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0005
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.3733
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Parous:Number of births</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous, 2
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9624
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9122
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0155
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1617
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9683
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9176
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0219
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.2415
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Parous:Age at 1st pregnancy_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous, 25
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.6393
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.3277
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2475
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1897
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.6221
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.3188
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.2140
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.1641
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Parous:Duration of breastfeeding_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous, 0
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9365
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.8081
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0852
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.3828
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9714
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.8377
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.1264
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.7007
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Parous:Number of births_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous, 2
</td>
<td headers="HR_uni" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
NA
</td>
<td headers="pValue_uni" class="gt_row gt_right">
NA
</td>
<td headers="HR_mult" class="gt_row gt_right">
NA
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
NA
</td>
<td headers="pValue_mult" class="gt_row gt_right">
NA
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>pregparous_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Parous
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.4419
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.1104
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.7689
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.2485
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.5018
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.1253
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
2.0099
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.3301
</td>
</tr>
</tbody>

</table>
</div>
<div id="humhsbghvk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#humhsbghvk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#humhsbghvk thead, #humhsbghvk tbody, #humhsbghvk tfoot, #humhsbghvk tr, #humhsbghvk td, #humhsbghvk th {
  border-style: none;
}

#humhsbghvk p {
  margin: 0;
  padding: 0;
}

#humhsbghvk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#humhsbghvk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#humhsbghvk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#humhsbghvk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#humhsbghvk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#humhsbghvk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#humhsbghvk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#humhsbghvk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#humhsbghvk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#humhsbghvk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#humhsbghvk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#humhsbghvk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#humhsbghvk .gt_spanner_row {
  border-bottom-style: hidden;
}

#humhsbghvk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#humhsbghvk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#humhsbghvk .gt_from_md > :first-child {
  margin-top: 0;
}

#humhsbghvk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#humhsbghvk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#humhsbghvk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#humhsbghvk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#humhsbghvk .gt_row_group_first td {
  border-top-width: 2px;
}

#humhsbghvk .gt_row_group_first th {
  border-top-width: 2px;
}

#humhsbghvk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#humhsbghvk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#humhsbghvk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#humhsbghvk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#humhsbghvk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#humhsbghvk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#humhsbghvk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#humhsbghvk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#humhsbghvk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#humhsbghvk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#humhsbghvk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#humhsbghvk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#humhsbghvk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#humhsbghvk .gt_left {
  text-align: left;
}

#humhsbghvk .gt_center {
  text-align: center;
}

#humhsbghvk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#humhsbghvk .gt_font_normal {
  font-weight: normal;
}

#humhsbghvk .gt_font_bold {
  font-weight: bold;
}

#humhsbghvk .gt_font_italic {
  font-style: italic;
}

#humhsbghvk .gt_super {
  font-size: 65%;
}

#humhsbghvk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#humhsbghvk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#humhsbghvk .gt_indent_1 {
  text-indent: 5px;
}

#humhsbghvk .gt_indent_2 {
  text-indent: 10px;
}

#humhsbghvk .gt_indent_3 {
  text-indent: 15px;
}

#humhsbghvk .gt_indent_4 {
  text-indent: 20px;
}

#humhsbghvk .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Smoking
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>[-Inf,17)</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.1313
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0247
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2490
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0145
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.1199
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.0118
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.2396
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.0288
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>[17,20)</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.1554
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
1.0550
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2654
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.0018
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.1173
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
1.0186
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.2255
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.0187
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>[20, Inf)</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0264
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9077
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.1606
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.6778
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9843
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.8693
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.1145
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.8029
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Smoking_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
Never
</td>
<td headers="HR_uni" class="gt_row gt_right">
1.0065
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.7864
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.2882
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.9591
</td>
<td headers="HR_mult" class="gt_row gt_right">
1.0316
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.8053
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.3215
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.8057
</td>
</tr>
</tbody>

</table>
</div>
<div id="bypzhjevmf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">

<style>#bypzhjevmf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bypzhjevmf thead, #bypzhjevmf tbody, #bypzhjevmf tfoot, #bypzhjevmf tr, #bypzhjevmf td, #bypzhjevmf th {
  border-style: none;
}

#bypzhjevmf p {
  margin: 0;
  padding: 0;
}

#bypzhjevmf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bypzhjevmf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bypzhjevmf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bypzhjevmf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bypzhjevmf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bypzhjevmf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bypzhjevmf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bypzhjevmf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bypzhjevmf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bypzhjevmf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bypzhjevmf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bypzhjevmf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bypzhjevmf .gt_spanner_row {
  border-bottom-style: hidden;
}

#bypzhjevmf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bypzhjevmf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bypzhjevmf .gt_from_md > :first-child {
  margin-top: 0;
}

#bypzhjevmf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bypzhjevmf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bypzhjevmf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bypzhjevmf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bypzhjevmf .gt_row_group_first td {
  border-top-width: 2px;
}

#bypzhjevmf .gt_row_group_first th {
  border-top-width: 2px;
}

#bypzhjevmf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bypzhjevmf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bypzhjevmf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bypzhjevmf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bypzhjevmf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bypzhjevmf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bypzhjevmf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bypzhjevmf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bypzhjevmf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bypzhjevmf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bypzhjevmf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bypzhjevmf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bypzhjevmf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bypzhjevmf .gt_left {
  text-align: left;
}

#bypzhjevmf .gt_center {
  text-align: center;
}

#bypzhjevmf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bypzhjevmf .gt_font_normal {
  font-weight: normal;
}

#bypzhjevmf .gt_font_bold {
  font-weight: bold;
}

#bypzhjevmf .gt_font_italic {
  font-style: italic;
}

#bypzhjevmf .gt_super {
  font-size: 65%;
}

#bypzhjevmf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bypzhjevmf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bypzhjevmf .gt_indent_1 {
  text-indent: 5px;
}

#bypzhjevmf .gt_indent_2 {
  text-indent: 10px;
}

#bypzhjevmf .gt_indent_3 {
  text-indent: 15px;
}

#bypzhjevmf .gt_indent_4 {
  text-indent: 20px;
}

#bypzhjevmf .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading">
<td colspan="10" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="">
Group: Total physical activity (log2)
</td>
</tr>
<tr class="gt_col_headings gt_spanner_row">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Term">
Term
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" style="font-weight: bold;" scope="col" id="Reference Group">
Reference Group
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Univariable Analysis">
<span class="gt_column_spanner">Univariable Analysis</span>
</th>
<th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Multivariable Analysis">
<span class="gt_column_spanner">Multivariable Analysis</span>
</th>
</tr>
<tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="HR">
HR
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Lower CI">
Lower CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="Upper CI">
Upper CI
</th>
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" style="font-weight: bold;" scope="col" id="p-Value">
p-Value
</th>
</tr>
</thead>

<tbody class="gt_table_body">
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Total physical activity (log2) Trend</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
5.69
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.9770
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.9486
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0062
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1217
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.9906
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.9615
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.0206
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.5356
</td>
</tr>
<tr>
<td headers="Term" class="gt_row gt_left" style="font-weight: bold;">
<code>Total physical activity (log2) Trend_Missing</code>
</td>
<td headers="Reference_Group" class="gt_row gt_center">
5.69
</td>
<td headers="HR_uni" class="gt_row gt_right">
0.8602
</td>
<td headers="lowerCI_uni" class="gt_row gt_right">
0.6952
</td>
<td headers="upperCI_uni" class="gt_row gt_right">
1.0644
</td>
<td headers="pValue_uni" class="gt_row gt_right">
0.1657
</td>
<td headers="HR_mult" class="gt_row gt_right">
0.8924
</td>
<td headers="lowerCI_mult" class="gt_row gt_right">
0.7203
</td>
<td headers="upperCI_mult" class="gt_row gt_right">
1.1056
</td>
<td headers="pValue_mult" class="gt_row gt_right">
0.2975
</td>
</tr>
</tbody>

</table>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>